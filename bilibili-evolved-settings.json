{
  "userStyles": {},
  "userPlugins": {
    "downloadVideo.outputs.aria2": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/download/aria2-output\"]=t():e[\"video/download/aria2-output\"]=t()}(globalThis,(()=>(()=>{var e={648:(e,t,n)=>{var o=n(218)((function(e){return e[1]}));o.push([e.id,\".rpc-config.download-video-config-section {\\n  display: flex;\\n  align-items: center;\\n  flex-direction: column;\\n  align-items: stretch;\\n}\\n.rpc-config.download-video-config-section > * {\\n  display: flex;\\n  align-items: center;\\n}\\n.rpc-config.download-video-config-section > *:not(:last-child) {\\n  margin-bottom: 12px;\\n}\\n.rpc-config.download-video-config-section .profile-item-name {\\n  margin-right: 8px;\\n}\\n.rpc-config.download-video-config-section .profile-other .profile-item-name {\\n  align-self: flex-start;\\n}\\n.rpc-config.download-video-config-section .profile-select .be-textbox,\\n.rpc-config.download-video-config-section .profile-select .be-dropdown {\\n  margin-right: 8px;\\n}\\n.rpc-config.download-video-config-section .profile-select .be-button {\\n  padding: 4px;\\n}\\n.rpc-config.download-video-config-section .profile-method {\\n  align-self: flex-start;\\n}\\n.rpc-config.download-video-config-section .online-assets-download {\\n  flex-direction: column;\\n  align-items: start;\\n}\",\"\"]),e.exports=o},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,n,o){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var i={};if(o)for(var s=0;s<this.length;s++){\n// eslint-disable-next-line prefer-destructuring\nvar r=this[s][0];null!=r&&(i[r]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);o&&i[c[0]]||(n&&(c[2]?c[2]=\"\".concat(n,\" and \").concat(c[2]):c[2]=n),t.push(c))}},t}},332:(e,t,n)=>{\"use strict\";var o,i=function(){return void 0===o&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\no=Boolean(window&&document&&document.all&&!window.atob)),o},s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function a(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},o=[],i=0;i<e.length;i++){var s=e[i],c=t.base?s[0]+t.base:s[0],l=n[c]||0,d=\"\".concat(c,\" \").concat(l);n[c]=l+1;var p=a(d),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==p?(r[p].references++,r[p].updater(f)):r.push({identifier:d,updater:h(f,t),references:1}),o.push(d)}return o}function l(e){var t=document.createElement(\"style\"),o=e.attributes||{};if(void 0===o.nonce){var i=n.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),\"function\"==typeof e.insert)e.insert(t);else{var r=s(e.insert||\"head\");if(!r)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");r.appendChild(t)}return t}var d,p=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join(\"\\n\")});function f(e,t,n,o){var i=n?\"\":o.media?\"@media \".concat(o.media,\" {\").concat(o.css,\"}\"):o.css;if(e.styleSheet)e.styleSheet.cssText=p(t,i);else{var s=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}function u(e,t,n){var o=n.css,i=n.media,s=n.sourceMap;if(i?e.setAttribute(\"media\",i):e.removeAttribute(\"media\"),s&&\"undefined\"!=typeof btoa&&(o+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s)))),\" */\")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var m=null,v=0;function h(e,t){var n,o,i;if(t.singleton){var s=v++;n=m||(m=l(t)),o=f.bind(null,n,s,!1),i=f.bind(null,n,s,!0)}else n=l(t),o=u.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=i());var n=c(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var i=a(n[o]);r[i].references--}for(var s=c(e,t),l=0;l<n.length;l++){var d=a(n[l]);0===r[d].references&&(r[d].updater(),r.splice(d,1))}n=s}}}},303:(e,t,n)=>{\"use strict\";n.r(t),n.d(t,{default:()=>P});var o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"div\",{staticClass:\"rpc-config download-video-config-section\"},[t(\"div\",{staticClass:\"online-assets-download\"},[t(\"div\",{staticClass:\"download-video-config-item\"},[t(\"div\",{staticClass:\"download-video-config-title\"},[e._v(\"使用 aria2 下载附属资源:\")]),e._v(\" \"),t(\"SwitchBox\",{on:{change:e.saveAssetsSettings},model:{value:e.isPluginDownloadAssets,callback:function(t){e.isPluginDownloadAssets=t},expression:\"isPluginDownloadAssets\"}})],1),e._v(\" \"),t(\"div\",{staticClass:\"download-video-config-description\"},[e._v(\"\\n      存在于服务器的附属资源 (例如封面) 可以一并发送到 aria2 下载.\\n    \")])]),e._v(\" \"),e.isRenaming?t(\"div\",{staticClass:\"profile-select\"},[t(\"div\",{staticClass:\"profile-item-name\"},[e._v(\"重命名 RPC 预设:\")]),e._v(\" \"),t(\"TextBox\",{ref:\"renameInput\",model:{value:e.profileRename,callback:function(t){e.profileRename=t},expression:\"profileRename\"}}),e._v(\" \"),t(\"VButton\",{key:\"check\",attrs:{type:\"transparent\",title:\"完成\"},on:{click:function(t){return e.endRename()}}},[t(\"VIcon\",{attrs:{icon:\"mdi-check\",size:16}})],1)],1):t(\"div\",{staticClass:\"profile-select\"},[t(\"div\",{staticClass:\"profile-item-name\"},[e._v(\"RPC 预设:\")]),e._v(\" \"),t(\"VDropdown\",{attrs:{items:e.rpcProfiles},scopedSlots:e._u([{key:\"item\",fn:function({item:t}){return[e._v(\"\\n        \"+e._s(t.name)+\"\\n      \")]}}]),model:{value:e.selectedRpcProfile,callback:function(t){e.selectedRpcProfile=t},expression:\"selectedRpcProfile\"}}),e._v(\" \"),t(\"VButton\",{key:\"edit\",attrs:{type:\"transparent\",title:\"重命名\"},on:{click:function(t){return e.startRename()}}},[t(\"VIcon\",{attrs:{icon:\"mdi-pencil-outline\",size:16}})],1),e._v(\" \"),t(\"VButton\",{key:\"new\",attrs:{type:\"transparent\",title:\"新建预设\"},on:{click:function(t){return e.newProfile()}}},[t(\"VIcon\",{attrs:{icon:\"mdi-plus\",size:16}})],1),e._v(\" \"),t(\"VButton\",{key:\"delete\",attrs:{disabled:e.rpcProfiles.length<2,type:\"transparent\",title:\"删除当前预设\"},on:{click:function(t){return e.deleteProfile()}}},[t(\"VIcon\",{attrs:{icon:\"mdi-trash-can-outline\",size:16}})],1)],1),e._v(\" \"),e.selectedRpcProfile?[t(\"div\",{staticClass:\"profile-secret-key\"},[t(\"div\",{staticClass:\"profile-item-name\"},[e._v(\"密钥:\")]),e._v(\" \"),t(\"TextBox\",{attrs:{\"change-on-blur\":\"\"},model:{value:e.selectedRpcProfile.secretKey,callback:function(t){e.$set(e.selectedRpcProfile,\"secretKey\",t)},expression:\"selectedRpcProfile.secretKey\"}})],1),e._v(\" \"),t(\"div\",{staticClass:\"profile-dir\"},[t(\"div\",{staticClass:\"profile-item-name\"},[e._v(\"路径:\")]),e._v(\" \"),t(\"TextBox\",{attrs:{\"change-on-blur\":\"\"},model:{value:e.selectedRpcProfile.dir,callback:function(t){e.$set(e.selectedRpcProfile,\"dir\",t)},expression:\"selectedRpcProfile.dir\"}})],1),e._v(\" \"),t(\"div\",{staticClass:\"profile-host\"},[t(\"div\",{staticClass:\"profile-item-name\"},[e._v(\"主机:\")]),e._v(\" \"),t(\"TextBox\",{attrs:{\"change-on-blur\":\"\"},model:{value:e.selectedRpcProfile.host,callback:function(t){e.$set(e.selectedRpcProfile,\"host\",t)},expression:\"selectedRpcProfile.host\"}})],1),e._v(\" \"),t(\"div\",{staticClass:\"profile-port\"},[t(\"div\",{staticClass:\"profile-item-name\"},[e._v(\"端口:\")]),e._v(\" \"),t(\"TextBox\",{attrs:{\"change-on-blur\":\"\"},model:{value:e.selectedRpcProfile.port,callback:function(t){e.$set(e.selectedRpcProfile,\"port\",t)},expression:\"selectedRpcProfile.port\"}})],1),e._v(\" \"),t(\"div\",{staticClass:\"profile-method\"},[t(\"div\",{staticClass:\"profile-item-name\"},[e._v(\"方法:\")]),e._v(\" \"),t(\"VDropdown\",{attrs:{items:[\"get\",\"post\"],\"key-mapper\":e=>e},scopedSlots:e._u([{key:\"item\",fn:function({item:t}){return[e._v(\"\\n          \"+e._s(t)+\"\\n        \")]}}],null,!1,883355439),model:{value:e.selectedRpcProfile.method,callback:function(t){e.$set(e.selectedRpcProfile,\"method\",t)},expression:\"selectedRpcProfile.method\"}})],1),e._v(\" \"),t(\"div\",{staticClass:\"profile-other\"},[t(\"div\",{staticClass:\"profile-item-name\"},[e._v(\"其他配置:\")]),e._v(\" \"),t(\"TextArea\",{attrs:{placeholder:\"some-key=value\",\"change-on-blur\":\"\"},model:{value:e.selectedRpcProfile.other,callback:function(t){e.$set(e.selectedRpcProfile,\"other\",t)},expression:\"selectedRpcProfile.other\"}})],1)]:e._e()],2)};o._withStripped=!0;const i=coreApis.settings;var s=n(391);const r=coreApis.ui,a={name:\"未命名\",secretKey:\"\",dir:\"\",host:\"127.0.0.1\",port:\"6800\",method:\"get\",other:\"\"},{options:c}=(0,i.getComponentSettings)(\"downloadVideo\"),l={...{rpcProfiles:[a],selectedRpcProfileName:a.name,isPluginDownloadAssets:!1},...c},d=l.rpcProfiles.find((e=>e.name===l.selectedRpcProfileName))??(l.rpcProfiles.length<1?(l.rpcProfiles.push(a),a):l.rpcProfiles[0]);console.log(l,d);const p=Vue.extend({components:{TextBox:r.TextBox,VButton:r.VButton,VIcon:r.VIcon,VDropdown:r.VDropdown,TextArea:r.TextArea,SwitchBox:r.SwitchBox},data:()=>({isRenaming:!1,profileRename:\"\",rpcProfiles:l.rpcProfiles,selectedRpcProfile:d,isPluginDownloadAssets:l.isPluginDownloadAssets}),methods:{saveProfileSettings(){l.selectedRpcProfileName=this.selectedRpcProfile.name,l.rpcProfiles=this.rpcProfiles,c.selectedRpcProfileName=l.selectedRpcProfileName,c.rpcProfiles=l.rpcProfiles},saveAssetsSettings(){l.isPluginDownloadAssets=this.isPluginDownloadAssets,c.isPluginDownloadAssets=l.isPluginDownloadAssets},async startRename(){this.profileRename=this.selectedRpcProfile.name,this.isRenaming=!0,await this.$nextTick(),this.$refs.renameInput?.focus()},endRename(){const e=this.profileRename;e?l.rpcProfiles.some((t=>t.name!==this.selectedRpcProfile.name&&t.name===e))?s.Toast.error(\"名称不得与其他预设重复\",\"重命名 RPC 预设\",2e3):(this.selectedRpcProfile.name=this.profileRename,this.isRenaming=!1,this.saveProfileSettings()):s.Toast.error(\"名称不得为空\",\"重命名 RPC 预设\",2e3)},newProfile(){const e={...this.selectedRpcProfile},t={num:1,toString(){return`未命名${this.num}`}};for(;l.rpcProfiles.some((e=>e.name===t.toString()));)t.num++;e.name=t.toString(),l.rpcProfiles.push(e),this.selectedRpcProfile=e},deleteProfile(){if(l.rpcProfiles.length<2)return;const e=l.rpcProfiles.findIndex((e=>e.name===this.selectedRpcProfile.name));-1!==e&&confirm(`确认删除 RPC 预设 \"${this.selectedRpcProfile.name}\" 吗?`)&&(l.rpcProfiles.splice(e,1),this.selectedRpcProfile=l.rpcProfiles[0])}}});var f=n(332),u=n.n(f),m=n(648),v=n.n(m),h={insert:\"head\",singleton:!1};u()(v(),h);v().locals;var g=function(e,t,n,o,i,s,r,a){var c,l=\"function\"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),o&&(l.functional=!0),s&&(l._scopeId=\"data-v-\"+s),r?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:e,options:l}}(p,o,[],!1,null,null,null);const P=g.exports},391:e=>{\"use strict\";e.exports=coreApis.toast}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={id:o,exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var o={};return(()=>{\"use strict\";n.d(o,{plugin:()=>v});const e=coreApis.download,t=coreApis.utils.constants,i=coreApis.utils.title,s={name:\"aria2\",displayName:\"aria2 Input\",description:\"使用 aria2 命令行输入文件开始下载. (aria2c -i xxx.txt)\",runAction:async n=>{const{infos:o}=n,s=document.URL.replace(window.location.search,\"\"),r=`\\n# Generated by Bilibili Evolved Video Export\\n# https://github.com/the1812/Bilibili-Evolved/\\n${o.map((e=>e.titledFragments.map((e=>({url:e.url,params:{referer:s,userAgent:t.UserAgent,out:e.title}}))).flat().map((e=>{const t=Object.entries(e.params).map((e=>{let[t,n]=e;return`  ${lodash.kebabCase(t)}=${n}`})).join(\"\\n\");return`${e.url}\\n${t}`})))).flat().join(\"\\n\")}`.trim();await e.DownloadPackage.single(`${(0,i.getFriendlyTitle)()}.txt`,r)}},r=coreApis.ajax;var a=n(391);const c=coreApis.utils.log,l=e=>{const t=e.host.match(/^http[s]?:\\/\\//)?e.host:`http://${e.host}`;return{option:e,host:t,methodName:\"aria2.addUri\"}},d=async(e,t)=>{try{let n=await t();return\"string\"==typeof n&&(n=JSON.parse(n)),void 0!==n.error?1===n.error.code?{param:e,success:!1,message:\"请求遭到拒绝, 请检查您的密钥相关设置.\"}:{param:e,success:!1,message:`请求发生错误, code = ${n.error.code}, message = ${n.error.message}`}:{param:e,success:!0,message:n.result}}catch(t){return{param:e,success:!1,message:`无法连接到RPC主机, error = ${t.toString()}`}}},p=async(e,t)=>{const{option:n,host:o,methodName:i}=l(e);return d(t,(async()=>{const e=window.btoa(unescape(encodeURIComponent(JSON.stringify(t.params)))),s=`${o}:${n.port}/jsonrpc?method=${i}&id=${t.id}&params=${e}`;return console.log(`RPC request: ${s}`),s.startsWith(\"http:\")?(0,r.monkey)({method:\"GET\",url:s,responseType:\"json\"}):(0,r.getJson)(s)}))},f=async(e,t)=>{const{option:n,host:o,methodName:i}=l(e);return d(t,(async()=>{const e=`${o}:${n.port}/jsonrpc`,s={method:i,id:t.id,params:t.params};return e.startsWith(\"http:\")?(0,r.monkey)({method:\"POST\",url:e,responseType:\"json\",data:JSON.stringify(s)}):(0,r.postJson)(e,s)}))},u=e=>{if(!e)return{};const t=e.split(\"\\n\").map((e=>{const[t,...n]=e.trim().split(\"=\");return[t.trim(),n.join(\"=\").trim()]})).filter((e=>Boolean(e[1])));return Object.fromEntries(t)},m={name:\"aria2Rpc\",displayName:\"aria2 RPC\",description:\"使用 aria2 RPC 功能发送下载请求.\",runAction:async(e,n)=>{const{infos:o,extraOnlineAssets:i}=e,{selectedRpcProfile:s,isPluginDownloadAssets:r}=n,{secretKey:l,dir:d,other:m}=s,v=document.URL.replace(window.location.search,\"\"),h=(e,n)=>{const o=[];l&&o.push(`token:${l}`),o.push([e]),o.push({referer:v,\"user-agent\":t.UserAgent,out:n,dir:d||void 0,...u(m)});return{params:o,id:encodeURIComponent(n)}},g=o.map((e=>e.titledFragments.map((e=>{const{url:t,title:n}=e;return h(t,n)})))).flat(),P=e=>r&&void 0!==e.getUrls,y=(await Promise.all(i.filter((e=>P(e.asset))).map((async e=>{const{asset:t,instance:n}=e;return(await t.getUrls(o,n)).map((e=>{let{name:t,url:n}=e;return h(n,t)}))})))).flat();e.extraOnlineAssets=i.filter((e=>!P(e.asset)));const R=[...g,...y],x=await(async(e,t)=>{const n=[];for(const o of t){let t;t=\"get\"===e.method?await p(e,o):await f(e,o),n.push(t)}return n})(s,R);if(console.table(x),1===x.length){const e=x[0];e.success?a.Toast.success(`成功发送了请求, GID = ${e.message}`,\"aria2 RPC\",5e3):(0,c.logError)(e.message)}else{const e=x.filter((e=>e.success)).length,t=x.length-e;a.Toast.info(`发送了 ${x.length} 个请求, 成功 ${e} 个, 失败 ${t} 个.`,\"aria2 RPC\",5e3)}},component:()=>Promise.resolve().then(n.bind(n,303)).then((e=>e.default))},v={name:\"downloadVideo.outputs.aria2\",displayName:\"下载视频 - aria2 输出支持\",description:\"为下载视频增加 aria2 文件导出和 RPC 输出支持.\",setup:e=>{let{addData:t}=e;t(\"downloadVideo.outputs\",(e=>{e.push(s),e.push(m)}))},commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"}})(),o=o.plugin})()));",
      "displayName": "下载视频 - aria2 输出支持",
      "name": "downloadVideo.outputs.aria2",
      "description": "为下载视频增加 aria2 文件导出和 RPC 输出支持.",
      "commitHash": "16157b4de819f235d2ac1af2618408dccc3c3779"
    },
    "downloadVideo.outputs.idm": {
      "code": "!function(e,o){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=o():\"function\"==typeof define&&define.amd?define([],o):\"object\"==typeof exports?exports[\"video/download/idm-output\"]=o():e[\"video/download/idm-output\"]=o()}(globalThis,(()=>(()=>{\"use strict\";var e={d:(o,t)=>{for(var n in t)e.o(t,n)&&!e.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:t[n]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o)},o={};e.d(o,{plugin:()=>d});const t=coreApis.download,n=coreApis.utils.constants,i=coreApis.utils.title,d={name:\"downloadVideo.outputs.idm\",displayName:\"下载视频 - IDM 输出支持\",description:\"为下载视频增加 IDM 输出支持，建议配合 [ef2.exe](https://github.com/MotooriKashin/ef2) 以简化操作、保留文件名.\",setup:e=>{let{addData:o}=e;o(\"downloadVideo.outputs\",(e=>{e.push({name:\"idm\",displayName:\"IDM\",description:\"使用 IDM 的 .ef2 格式导出, 可以在 IDM 中使用导入开始下载.\",runAction:async e=>{const{infos:o}=e,d=document.URL.replace(window.location.search,\"\"),a=o.map((e=>e.titledFragments.map((e=>`<\\n${e.url}\\nreferer: ${d}\\nUser-Agent: ${n.UserAgent}\\nfilename: ${e.title}\\n>`.trim())))).flat().concat(\"\").join(\"\\n\").replace(/([^\\r])\\n/g,\"$1\\r\\n\");await t.DownloadPackage.single(`${(0,i.getFriendlyTitle)()}.ef2`,a)}})}))},commitHash:\"7c0f561bf67af23f5d7bd22b7346e259d8e4dc73\",coreVersion:\"2.9.5\"};return o=o.plugin})()));",
      "displayName": "下载视频 - IDM 输出支持",
      "name": "downloadVideo.outputs.idm",
      "description": "为下载视频增加 IDM 输出支持.",
      "commitHash": "3397e56dc08dc5bcce962efe77f2bbcd634b05e2",
      "coreVersion": "2.6.0"
    },
    "downloadVideo.outputs.motrix": {
      "code": "!function(o,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/download/motrix-output\"]=t():o[\"video/download/motrix-output\"]=t()}(globalThis,(()=>(()=>{\"use strict\";var o={d:(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t)},t={};o.d(t,{plugin:()=>r});const e=coreApis.toast,r={name:\"downloadVideo.outputs.motrix\",displayName:\"下载视频 - Motrix 输出支持\",description:\"为下载视频增加 Motrix 输出支持.\",setup:o=>{let{addData:t}=o;t(\"downloadVideo.outputs\",(o=>{o.push({name:\"motrix\",displayName:\"Motrix\",description:\"调用 Motrix 下载.\",runAction:async o=>{const t=o.infos.flatMap((o=>o.titledFragments));try{const o=new URLSearchParams({uris:t.map((o=>o.url)).join(\"\\n\"),referer:document.URL.replace(window.location.search,\"\")});window.open(`motrix://new-task?${o.toString()}`,\"_self\")}catch(o){e.Toast.error(String(o),\"发生错误\")}}})}))},commitHash:\"7c0f561bf67af23f5d7bd22b7346e259d8e4dc73\",coreVersion:\"2.9.5\"};return t=t.plugin})()));",
      "displayName": "下载视频 - Motrix 输出支持",
      "name": "downloadVideo.outputs.motrix",
      "description": "为下载视频增加 Motrix 输出支持.",
      "commitHash": "9920134d9a7d1daa1c45b8afde4421a2fc9a9ae8",
      "coreVersion": "2.9.0"
    }
  },
  "userComponents": {
    "downloadLiveRecords": {
      "code": "!function(e,o){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=o():\"function\"==typeof define&&define.amd?define([],o):\"object\"==typeof exports?exports[\"live/download-records\"]=o():e[\"live/download-records\"]=o()}(globalThis,(()=>(()=>{\"use strict\";var e={660:(e,o,t)=>{t.r(o),t.d(o,{default:()=>l});var n=function(){var e=this,o=e.$createElement;return(e._self._c||o)(\"DefaultWidget\",{staticClass:\"download-live-records\",attrs:{disabled:e.disabled,name:\"下载录像\",icon:\"mdi-download\"},on:{click:function(o){return e.download()}}})};n._withStripped=!0;const r=coreApis.ui,i=coreApis.ajax,s=coreApis.toast,a=coreApis.utils.log;var d=function(e,o,t,n,r,i,s,a){var d,l=\"function\"==typeof e?e.options:e;if(o&&(l.render=o,l.staticRenderFns=t,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId=\"data-v-\"+i),s?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=d):r&&(d=a?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),d)if(l.functional){l._injectStyles=d;var c=l.render;l.render=function(e,o){return d.call(o),c(e,o)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,d):[d]}return{exports:e,options:l}}(Vue.extend({components:{DefaultWidget:r.DefaultWidget},data:()=>({disabled:!1}),methods:{async download(){try{this.disabled=!0;const e=document.URL.replace(window.location.search,\"\").match(/^https:\\/\\/live\\.bilibili\\.com\\/record\\/(.+)/);if(!e)return void(0,a.logError)(new Error(`获取录像ID失败: ${document.URL}`));const o=e[1],t=await(0,i.getJson)(`https://api.live.bilibili.com/xlive/web-room/v1/record/getLiveRecordUrl?rid=${o}&platform=html5`);if(0!==t.code)return void(0,a.logError)(new Error(`获取录像链接失败: ${t.message}`));const n=t.data.list.map((e=>e.url));s.Toast.success(n.map((e=>`<a class=\"download-link\" target=\"_blank\" href=\"${e}\">${e}</a>`)).join(\"\\n\"),\"下载录像\")}finally{this.disabled=!1}}}}),n,[],!1,null,null,null);d.options.__file=\"registry/lib/components/live/download-records/DownloadRecords.vue\";const l=d.exports}},o={};function t(n){var r=o[n];if(void 0!==r)return r.exports;var i=o[n]={exports:{}};return e[n](i,i.exports,t),i.exports}t.d=(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),t.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var n={};return(()=>{t.d(n,{component:()=>e});const e=(0,coreApis.componentApis.define.defineComponentMetadata)({name:\"downloadLiveRecords\",displayName:\"直播录像下载\",description:{\"zh-CN\":\"在直播录像页面 `live.bilibili.com/record/` 中添加下载支持.\"},tags:[componentsTags.live],entry:none,widget:{component:()=>Promise.resolve().then(t.bind(t,660)).then((e=>e.default))},urlInclude:[/^https:\\/\\/live\\.bilibili\\.com\\/record\\/(.+)/],commitHash:\"9581897e44a2a9ffca6a3f25876cc215d655b056\",coreVersion:\"2.6.3\"})})(),n=n.component})()));",
      "metadata": {
        "name": "downloadLiveRecords",
        "displayName": "直播录像下载",
        "description": {
          "zh-CN": "在直播录像页面 `live.bilibili.com/record/` 中添加下载支持."
        },
        "tags": [
          {
            "name": "live",
            "displayName": "直播",
            "color": "#26A69A",
            "icon": "mdi-video-wireless-outline",
            "order": 4
          }
        ],
        "commitHash": "9581897e44a2a9ffca6a3f25876cc215d655b056",
        "coreVersion": "2.6.3"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "downloadDanmaku": {
      "code": "!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports[\"video/danmaku/download\"]=e():t[\"video/danmaku/download\"]=e()}(globalThis,(()=>(()=>{var t={508:(t,e,i)=>{\"use strict\";i.r(e),i.d(e,{decodeDanmakuSegment:()=>a,decodeDanmakuView:()=>s,getDanmakuSegment:()=>d,getDanmakuView:()=>c,proto:()=>o});const n=coreApis.runtimeLibrary,o={nested:{DmWebViewReply:{fields:{state:{type:\"int32\",id:1},text:{type:\"string\",id:2},textSide:{type:\"string\",id:3},dmSge:{type:\"DmSegConfig\",id:4},flag:{type:\"DanmakuFlagConfig\",id:5},specialDms:{rule:\"repeated\",type:\"string\",id:6},checkBox:{type:\"bool\",id:7},count:{type:\"int64\",id:8},commandDms:{rule:\"repeated\",type:\"CommandDm\",id:9},dmSetting:{type:\"DanmuWebPlayerConfig\",id:10}}},CommandDm:{fields:{id:{type:\"int64\",id:1},oid:{type:\"int64\",id:2},mid:{type:\"int64\",id:3},command:{type:\"string\",id:4},content:{type:\"string\",id:5},progress:{type:\"int32\",id:6},ctime:{type:\"string\",id:7},mtime:{type:\"string\",id:8},extra:{type:\"string\",id:9},idStr:{type:\"string\",id:10}}},DmSegConfig:{fields:{pageSize:{type:\"int64\",id:1},total:{type:\"int64\",id:2}}},DanmakuFlagConfig:{fields:{recFlag:{type:\"int32\",id:1},recText:{type:\"string\",id:2},recSwitch:{type:\"int32\",id:3}}},DmSegMobileReply:{fields:{elems:{rule:\"repeated\",type:\"DanmakuElem\",id:1}}},DanmakuElem:{fields:{id:{type:\"int64\",id:1},progress:{type:\"int32\",id:2},mode:{type:\"int32\",id:3},fontsize:{type:\"int32\",id:4},color:{type:\"uint32\",id:5},midHash:{type:\"string\",id:6},content:{type:\"string\",id:7},ctime:{type:\"int64\",id:8},weight:{type:\"int32\",id:9},action:{type:\"string\",id:10},pool:{type:\"int32\",id:11},idStr:{type:\"string\",id:12},attr:{type:\"int32\",id:13}}},DanmuWebPlayerConfig:{fields:{dmSwitch:{type:\"bool\",id:1},aiSwitch:{type:\"bool\",id:2},aiLevel:{type:\"int32\",id:3},blocktop:{type:\"bool\",id:4},blockscroll:{type:\"bool\",id:5},blockbottom:{type:\"bool\",id:6},blockcolor:{type:\"bool\",id:7},blockspecial:{type:\"bool\",id:8},preventshade:{type:\"bool\",id:9},dmask:{type:\"bool\",id:10},opacity:{type:\"float\",id:11},dmarea:{type:\"int32\",id:12},speedplus:{type:\"float\",id:13},fontsize:{type:\"float\",id:14},screensync:{type:\"bool\",id:15},speedsync:{type:\"bool\",id:16},fontfamily:{type:\"string\",id:17},bold:{type:\"bool\",id:18},fontborder:{type:\"int32\",id:19},drawType:{type:\"string\",id:20}}}}},r=lodash.curry((async(t,e)=>{const i=new Uint8Array(\"arrayBuffer\"in Blob.prototype?await e.arrayBuffer():await new Response(e).arrayBuffer()),r=(await n.protobufLibrary).Root.fromJSON(o).lookupType(t),a=r.decode(i);return r.toObject(a)})),a=r(\"DmSegMobileReply\"),s=r(\"DmWebViewReply\"),l=async t=>(await unsafeWindow.fetch(t,{mode:\"cors\",credentials:\"include\"})).blob(),c=async(t,e)=>{const i=await l(`https://api.bilibili.com/x/v2/dm/web/view?type=1&oid=${e}&pid=${t}`);if(!i)throw new Error(\"获取弹幕信息失败\");return await s(i)},d=async(t,e,i)=>{const n=await l(`https://api.bilibili.com/x/v2/dm/web/seg.so?type=1&oid=${e}&pid=${t}&segment_index=${i+1}`);if(!n)throw new Error(`弹幕片段${i+1}下载失败`);return a(n)}},53:(t,e,i)=>{\"use strict\";i.r(e),i.d(e,{JsonDanmaku:()=>$,convertToAss:()=>C,convertToAssFromJson:()=>A,convertToXmlFromJson:()=>P,getBlobByType:()=>H,getUserDanmakuConfig:()=>D});const n=coreApis.utils.lazyPanel;var o=i(414);const r=coreApis.utils.sort;var a=i(674);const s=coreApis.componentApis.video.assUtils;function l(t,e,i){return(e=function(t){var e=function(t,e){if(\"object\"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||\"default\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(t)}(t,\"string\");return\"symbol\"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class c{constructor(t){let{content:e,time:i,type:n,fontSize:o,color:r}=t;l(this,\"content\",void 0),l(this,\"time\",void 0),l(this,\"startTime\",void 0),l(this,\"type\",void 0),l(this,\"fontSize\",void 0),l(this,\"color\",void 0),this.content=e,this.time=i,this.startTime=parseFloat(i),this.type=parseInt(n),this.fontSize=parseFloat(o),this.color=parseInt(r)}}function d(t,e,i){return(e=function(t){var e=function(t,e){if(\"object\"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||\"default\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(t)}(t,\"string\");return\"symbol\"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class u extends c{constructor(t){let{content:e,time:i,type:n,fontSize:o,color:r,typeTag:a,colorTag:s,endTime:l}=t;super({content:e,time:i,type:n,fontSize:o,color:r}),d(this,\"typeTag\",void 0),d(this,\"colorTag\",void 0),d(this,\"endTime\",void 0),this.typeTag=a,this.colorTag=s,this.endTime=l}text(t){let e=t[this.fontSize];e||(e=t[25]);const i=e.match(/Style:(.*?),/)[1].trim();return`Dialogue: 0,${this.time},${this.endTime},${i},,0,0,0,,{${this.typeTag}${this.colorTag}}${this.content}`}}class p{constructor(t,e,i,n,o){d(this,\"danmakus\",void 0),d(this,\"title\",void 0),d(this,\"fontStyles\",void 0),d(this,\"blockTypes\",void 0),d(this,\"resolution\",void 0),this.danmakus=t,this.title=e,this.fontStyles=i,this.blockTypes=n,this.resolution=o}generateAss(){return`${`\\n[Script Info]\\n; Script generated by Bilibili Evolved Danmaku Converter\\n; https://github.com/the1812/Bilibili-Evolved/\\nTitle: ${this.title}\\nScriptType: v4.00+\\nPlayResX: ${this.resolution.x}\\nPlayResY: ${this.resolution.y}\\nTimer: 10.0000\\nWrapStyle: 2\\nScaledBorderAndShadow: no\\n\\n[V4+ Styles]\\nFormat: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding\\n${Object.values(this.fontStyles).join(\"\\n\")}\\n\\n[Events]\\nFormat: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text\\n                `.trim()}\\n${this.danmakus.map((t=>t.text(this.fontStyles))).filter((t=>\"\"!==t)).join(\"\\n\")}`}}const m=coreApis.componentApis.video.xmlUtils;function h(t,e,i){return(e=function(t){var e=function(t,e){if(\"object\"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||\"default\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(t)}(t,\"string\");return\"symbol\"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class f extends c{constructor(t){let{content:e,time:i,type:n,fontSize:o,color:r,timeStamp:a,pool:s,userHash:l,rowId:c}=t;super({content:e,time:i,type:n,fontSize:o,color:r}),h(this,\"timeStamp\",void 0),h(this,\"pool\",void 0),h(this,\"userHash\",void 0),h(this,\"rowId\",void 0),h(this,\"pDataArray\",void 0),this.timeStamp=parseInt(a),this.pool=parseInt(s),this.userHash=l,this.rowId=parseInt(c),this.pDataArray=[i,n,o,r,a,s,l,c]}text(){return`<d p=\"${this.pDataArray.join(\",\")}\">${(0,m.escapeContent)(this.content)}</d>`}static parse(t){const e=t.getAttribute(\"p\"),[i,n,o,r,a,s,l,c]=e.split(\",\"),d=t.innerHTML;return new f({content:d,time:i,type:n,fontSize:o,color:r,timeStamp:a,pool:s,userHash:l,rowId:c})}}class g{constructor(t){h(this,\"xml\",void 0),h(this,\"danmakus\",void 0),this.xml=t;const e=(new DOMParser).parseFromString(t,\"application/xml\").documentElement;this.danmakus=[...e.querySelectorAll(\"d[p]\")].map((t=>f.parse(t)))}}const y=coreApis.utils;let v=function(t){return t[t.Normal=1]=\"Normal\",t[t.Normal2=2]=\"Normal2\",t[t.Normal3=3]=\"Normal3\",t[t.Bottom=4]=\"Bottom\",t[t.Top=5]=\"Top\",t[t.Reversed=6]=\"Reversed\",t[t.Special=7]=\"Special\",t[t.Special2=8]=\"Special2\",t}({});function b(t,e,i){return(e=function(t){var e=function(t,e){if(\"object\"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||\"default\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(t)}(t,\"string\");return\"symbol\"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class S{constructor(t,e,i,n){b(this,\"horizontalStack\",void 0),b(this,\"horizontalTrack\",void 0),b(this,\"verticalStack\",void 0),b(this,\"verticalTrack\",void 0),b(this,\"resolution\",void 0),b(this,\"duration\",void 0),b(this,\"canvas\",void 0),b(this,\"context\",void 0),b(this,\"fontSizes\",void 0),b(this,\"bottomMarginPercent\",void 0),b(this,\"danmakuHeight\",void 0),b(this,\"trackHeight\",void 0),b(this,\"trackCount\",void 0),this.horizontalStack=[],this.horizontalTrack=[],this.verticalStack=[],this.verticalTrack=[],this.resolution=e,this.duration=i,this.canvas=document.createElement(\"canvas\"),this.context=this.canvas.getContext(\"2d\"),this.fontSizes={30:`64px ${t}`,25:`52px ${t}`,18:`36px ${t}`,45:`90px ${t}`},this.bottomMarginPercent=n,this.generateTracks()}generateTracks(){this.danmakuHeight=52,this.trackHeight=2*S.margin+52,this.trackCount=parseInt((0,y.fixed)(this.resolution.y*(1-this.bottomMarginPercent)/this.trackHeight,0))}getTextSize(t){this.context.font=this.fontSizes[t.fontSize];return[this.context.measureText(t.content).width/2,this.danmakuHeight/2]}getTags(t,e){let{targetTrack:i,initTrackNumber:n,nextTrackNumber:o,willOverlay:r,getTrackItem:a,getTag:s}=e;const[l,c]=this.getTextSize(t),d=2*l,u=this.duration(t)*d/(this.resolution.x+d)+S.nextDanmakuDelay;let p=n,m=null;const h=t=>r(t,p,d);do{m=i.find(h),p+=o}while(m&&p<=this.trackCount&&p>=0);return p>this.trackCount||p<0?\"\\\\pos(0,-999)\":(p-=o,i.push(a(p,d,u)),s({trackNumber:p,x:l,y:c}))}getHorizontalTags(t){return this.getTags(t,{targetTrack:this.horizontalTrack,initTrackNumber:0,nextTrackNumber:1,willOverlay:(e,i,n)=>e.trackNumber===i&&(e.width<n?this.duration(t)*this.resolution.x/(this.resolution.x+n)<=e.end-t.startTime:e.visible>t.startTime),getTrackItem:(e,i,n)=>({width:i,start:t.startTime,visible:t.startTime+n,end:t.startTime+this.duration(t),trackNumber:e}),getTag:e=>{let{trackNumber:i,x:n,y:o}=e;return`\\\\move(${this.resolution.x+n},${i*this.trackHeight+S.margin+o},${-n},${i*this.trackHeight+S.margin+o},0,${1e3*this.duration(t)})`}})}getVerticalTags(t){const e=\"top\"===S.danmakuType[t.type];return this.getTags(t,{targetTrack:this.verticalTrack,initTrackNumber:e?0:this.trackCount-1,nextTrackNumber:e?1:-1,willOverlay:(e,i)=>e.trackNumber===i&&e.end>t.startTime,getTrackItem:e=>({start:t.startTime,end:t.startTime+this.duration(t),trackNumber:e}),getTag:t=>{let{trackNumber:i,y:n}=t;return e?`\\\\pos(${this.resolution.x/2},${i*this.trackHeight+S.margin+n})`:`\\\\pos(${this.resolution.x/2},${this.resolution.y-S.margin-n-(this.trackCount-1-i)*this.trackHeight})`}})}push(t){let e=\"\",i=[];switch(S.danmakuType[t.type]){case\"normal\":case\"reversed\":e=this.getHorizontalTags(t),i=this.horizontalStack;break;case\"top\":case\"bottom\":e=this.getVerticalTags(t),i=this.verticalStack;break;default:return{tags:\"\\\\pos(0,-999)\"}}const n={tags:e};return i.push(n),n}}function w(t,e,i){return(e=function(t){var e=function(t,e){if(\"object\"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||\"default\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(t)}(t,\"string\");return\"symbol\"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}b(S,\"danmakuType\",{[v.Normal]:\"normal\",[v.Normal2]:\"normal\",[v.Normal3]:\"normal\",[v.Bottom]:\"bottom\",[v.Top]:\"top\",[v.Reversed]:\"reversed\",[v.Special]:\"special\",[v.Special2]:\"special\"}),b(S,\"margin\",4),b(S,\"nextDanmakuDelay\",.05);class k{constructor(t){let{title:e,font:i,alpha:n,duration:o,blockTypes:r,blockFilter:a,resolution:s,bottomMarginPercent:l,bold:c}=t;w(this,\"title\",void 0),w(this,\"font\",void 0),w(this,\"alpha\",void 0),w(this,\"duration\",void 0),w(this,\"blockTypes\",void 0),w(this,\"blockFilter\",void 0),w(this,\"resolution\",void 0),w(this,\"bold\",void 0),w(this,\"danmakuStack\",void 0),this.title=e,this.font=i,this.alpha=Math.round(255*n).toString(16).toUpperCase().padStart(2,\"0\"),this.duration=o,this.blockTypes=r,this.blockFilter=a||(()=>!0),this.resolution=s,this.bold=c,this.danmakuStack=new S(i,s,o,l)}get fontStyles(){return{36:`Style: Larger,${this.font},72,&H${this.alpha}FFFFFF,&H${this.alpha}FFFFFF,&H${this.alpha}000000,&H${this.alpha}000000,${this.bold?\"1\":\"0\"},0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0`,30:`Style: Large,${this.font},64,&H${this.alpha}FFFFFF,&H${this.alpha}FFFFFF,&H${this.alpha}000000,&H${this.alpha}000000,${this.bold?\"1\":\"0\"},0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0`,25:`Style: Medium,${this.font},52,&H${this.alpha}FFFFFF,&H${this.alpha}FFFFFF,&H${this.alpha}000000,&H${this.alpha}000000,${this.bold?\"1\":\"0\"},0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0`,18:`Style: Small,${this.font},36,&H${this.alpha}FFFFFF,&H${this.alpha}FFFFFF,&H${this.alpha}000000,&H${this.alpha}000000,${this.bold?\"1\":\"0\"},0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0`,45:`Style: ExtraLarge,${this.font},90,&H${this.alpha}FFFFFF,&H${this.alpha}FFFFFF,&H${this.alpha}000000,&H${this.alpha}000000,${this.bold?\"1\":\"0\"},0,0,0,100,100,0,0,1,1.2,0,5,0,0,0,0`}}xmlDanmakuToAssDocument(t){const e=[];for(const i of t){const t=-1!==this.blockTypes.indexOf(i.type),n=-1!==this.blockTypes.indexOf(\"color\")&&i.color!==k.white;if(t||n)continue;if(!this.blockFilter(i))continue;const[o,r]=(0,s.convertTimeByDuration)(i.startTime,this.duration(i));e.push(new u({content:(0,s.normalizeContent)(i.content),time:o,endTime:r,type:i.type.valueOf().toString(),fontSize:i.fontSize.toString(),color:i.color.toString(),typeTag:this.convertType(i),colorTag:(0,s.convertHexColorForDialogue)(i.color.toString(16))}))}return new p(e,this.title,this.fontStyles,this.blockTypes,this.resolution)}xmlStringToAssDocument(t){const e=new g(t);return this.xmlDanmakuToAssDocument(e.danmakus.sort((0,r.ascendingSort)((t=>t.startTime))))}convertType(t){return this.danmakuStack.push(t).tags}}w(k,\"white\",16777215);const T=coreApis.componentApis.video.playerAgent;var x=i(986);function F(t,e,i){return(e=function(t){var e=function(t,e){if(\"object\"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||\"default\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(t)}(t,\"string\");return\"symbol\"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class ${constructor(t,e){this.aid=t,this.cid=e,F(this,\"jsonDanmakus\",[])}get xmlDanmakus(){return this.jsonDanmakus.map((t=>({content:t.content,time:t.progress?(t.progress/1e3).toString():\"0\",type:t.mode?.toString()??\"1\",fontSize:t.fontsize?.toString()??\"25\",color:t.color?.toString()??\"16777215\",timeStamp:t.ctime?.toString()??\"0\",pool:t.pool?.toString()??\"0\",userHash:t.midHash??\"0\",rowId:t.idStr??\"0\"})))}async fetchInfo(){const{getDanmakuSegment:t,getDanmakuView:e}=await Promise.resolve().then(i.bind(i,508)),n=await e(this.aid,this.cid),{total:a}=n.dmSge;if(void 0===a)throw new Error(`获取弹幕分页数失败: ${JSON.stringify(lodash.omit(n,\"flag\"))}`);console.log(\"segment count =\",a);const s=await Promise.all(new Array(a).fill(0).map((async(e,i)=>{try{const e=await t(this.aid,this.cid,i),n=e.elems??[];return console.log(`received blob for segment ${i+1}, count = ${n.length}, result =`,e),n}catch(t){throw(0,o.logError)(t),t}})));return this.jsonDanmakus=s.flat().sort((0,r.ascendingSort)((t=>t.progress??0))),this}}const D=async()=>{const t=(0,x.getComponentSettings)(\"downloadDanmaku\").options,e=(0,a.getFriendlyTitle)(),i={font:\"微软雅黑\",alpha:.4,duration:t=>{switch(t.type){case 4:case 5:return 4;default:return 6}},blockTypes:[7,8],resolution:{x:1920,y:1080},bottomMarginPercent:.15,bold:!1};let r={...i,title:e};try{await(0,n.loadDanmakuSettingsPanel)();if(localStorage.getItem(\"bilibili_player_settings\")){r.blockTypes=(()=>{const t=[],e={scroll:[1,2,3],top:[5],bottom:[4],color:[\"color\"]};for(const[i,n]of Object.entries(e))!1===T.playerAgent.getPlayerConfig(`block.type_${i}`,!0)&&t.push(...n);return t.concat(7,8)})(),r.bold=T.playerAgent.getPlayerConfig(\"dmSetting.bold\",!1),r.alpha=lodash.clamp(1-parseFloat(T.playerAgent.getPlayerConfig(\"dmSetting.opacity\",\"0.4\")),0,1);const e=1.4-.4*T.playerAgent.getPlayerConfig(\"dmSetting.fontsize\",1);r.resolution={x:Math.round(1920*e),y:Math.round(1080*e)},r.duration=(()=>{const e=18-3*(\"auto\"===t.speed?T.playerAgent.getPlayerConfig(\"dmSetting.speedplus\",0):t.speed);return t=>{switch(t.type){case 4:case 5:return 4;default:return e}}})();const i=T.playerAgent.getPlayerConfig(\"dmSetting.danmakuArea\",0);r.bottomMarginPercent=i>=100?0:i/100,0===r.bottomMarginPercent&&T.playerAgent.getPlayerConfig(\"dmSetting.preventshade\",!1)&&(r.bottomMarginPercent=.15);const n=T.playerAgent.getPlayerConfig(\"block.list\",[]);r.blockFilter=t=>{for(const e of n)if(e.s)switch(e.t){default:return!0;case\"keyword\":if(t.content.includes(e.v))return!1;break;case\"regexp\":if(new RegExp(e.v).test(t.content))return!1;break;case\"user\":if(t.userHash===e.v)return!1}return!0}}else console.warn(\"[弹幕转换] 未找到播放器设置\"),r={...r,...i};r.font=dq(\":is(.bilibili-player-video-danmaku-setting-right-font, .bpx-player-dm-setting-right-font-content-fontfamily) .bui-select-result\").innerText}catch(t){(0,o.logError)(t),r={...r,...i}}for(const[t,e]of Object.entries(r))null==e&&(console.warn(\"danmaku config invalid for key\",t,\", value =\",e),r[t]=i[e]);return console.log(r),r},C=async t=>new k(await D()).xmlStringToAssDocument(t).generateAss(),A=async t=>new k(await D()).xmlDanmakuToAssDocument(t.xmlDanmakus.map((t=>new f(t)))).generateAss(),P=t=>`\\n<?xml version=\"1.0\" encoding=\"UTF-8\"?><i><chatserver>chat.bilibili.com</chatserver><chatid>${t.cid}</chatid><mission>0</mission><maxlimit>${t.xmlDanmakus.length}</maxlimit><state>0</state><real_name>0</real_name><source>k-v</source>\\n${t.xmlDanmakus.map((t=>`  ${new f(t).text()}`)).join(\"\\n\")}\\n</i>\\n  `.trim(),H=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:unsafeWindow;const{aid:i,cid:n}=e,o=await new $(i,n).fetchInfo();switch(t){case\"xml\":return new Blob([P(o)],{type:\"text/xml\"});default:case\"json\":return new Blob([JSON.stringify(o.jsonDanmakus,void 0,2)],{type:\"text/json\"});case\"ass\":return new Blob([await A(o)],{type:\"text/ass\"})}}},662:(t,e,i)=>{var n=i(218)((function(t){return t[1]}));n.push([t.id,\".download-danmaku-config.download-video-config-section .be-dropdown {\\n  text-transform: uppercase;\\n}\",\"\"]),t.exports=n},218:t=>{\"use strict\";\n// eslint-disable-next-line func-names\nt.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=t(e);return e[2]?\"@media \".concat(e[2],\" {\").concat(i,\"}\"):i})).join(\"\")},\n// eslint-disable-next-line func-names\ne.i=function(t,i,n){\"string\"==typeof t&&(\n// eslint-disable-next-line no-param-reassign\nt=[[null,t,\"\"]]);var o={};if(n)for(var r=0;r<this.length;r++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[r][0];null!=a&&(o[a]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);n&&o[l[0]]||(i&&(l[2]?l[2]=\"\".concat(i,\" and \").concat(l[2]):l[2]=i),e.push(l))}},e}},332:(t,e,i)=>{\"use strict\";var n,o=function(){return void 0===n&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\nn=Boolean(window&&document&&document.all&&!window.atob)),n},r=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),a=[];function s(t){for(var e=-1,i=0;i<a.length;i++)if(a[i].identifier===t){e=i;break}return e}function l(t,e){for(var i={},n=[],o=0;o<t.length;o++){var r=t[o],l=e.base?r[0]+e.base:r[0],c=i[l]||0,d=\"\".concat(l,\" \").concat(c);i[l]=c+1;var u=s(d),p={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(a[u].references++,a[u].updater(p)):a.push({identifier:d,updater:g(p,e),references:1}),n.push(d)}return n}function c(t){var e=document.createElement(\"style\"),n=t.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),\"function\"==typeof t.insert)t.insert(e);else{var a=r(t.insert||\"head\");if(!a)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");a.appendChild(e)}return e}var d,u=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join(\"\\n\")});function p(t,e,i,n){var o=i?\"\":n.media?\"@media \".concat(n.media,\" {\").concat(n.css,\"}\"):n.css;if(t.styleSheet)t.styleSheet.cssText=u(e,o);else{var r=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function m(t,e,i){var n=i.css,o=i.media,r=i.sourceMap;if(o?t.setAttribute(\"media\",o):t.removeAttribute(\"media\"),r&&\"undefined\"!=typeof btoa&&(n+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r)))),\" */\")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var h=null,f=0;function g(t,e){var i,n,o;if(e.singleton){var r=f++;i=h||(h=c(e)),n=p.bind(null,i,r,!1),o=p.bind(null,i,r,!0)}else i=c(e),n=m.bind(null,i,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||\"boolean\"==typeof e.singleton||(e.singleton=o());var i=l(t=t||[],e);return function(t){if(t=t||[],\"[object Array]\"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var o=s(i[n]);a[o].references--}for(var r=l(t,e),c=0;c<i.length;c++){var d=s(i[c]);0===a[d].references&&(a[d].updater(),a.splice(d,1))}i=r}}}},327:(t,e,i)=>{\"use strict\";i.r(e),i.d(e,{default:()=>u});var n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(\"div\",{staticClass:\"multiple-widgets\"},[e(\"DefaultWidget\",{attrs:{disabled:t.disabled,name:\"下载弹幕 (XML)\",icon:\"danmaku\"},on:{click:function(e){return t.download(\"xml\")}}}),t._v(\" \"),e(\"DefaultWidget\",{attrs:{disabled:t.disabled,name:\"下载弹幕 (JSON)\",icon:\"danmaku\"},on:{click:function(e){return t.download(\"json\")}}}),t._v(\" \"),e(\"DefaultWidget\",{attrs:{disabled:t.disabled,name:\"下载弹幕 (ASS)\",icon:\"danmaku\"},on:{click:function(e){return t.download(\"ass\")}}})],1)};n._withStripped=!0;const o=coreApis.download;var r=i(414),a=i(674);const s=coreApis.pluginApis.data;var l=i(648);var c=i(53);(0,s.addData)(\"ui.icons\",(t=>{t.danmaku='<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\"  viewBox=\"0 0 24 24\"><path d=\"M20,4H4C2.9,4,2,4.9,2,6v12c0,1.1,0.9,2,2,2h4h5.9H20c1.1,0,2-0.9,2-2V6C22,4.9,21.1,4,20,4z M5,7h8v2H5V7z M7,17H5v-2h2V17z M6.3,13v-2H18v2H6.3z M19,17H9v-2h10V17z M19,9h-4.1V7H19V9z\"/></svg>'}));const d=Vue.extend({components:{DefaultWidget:l.DefaultWidget},data:()=>({disabled:!1}),methods:{async download(t){try{this.disabled=!0;const e=(0,a.getFriendlyTitle)(),i=await(0,c.getBlobByType)(t);await o.DownloadPackage.single(`${e}.${t}`,i)}catch(t){(0,r.logError)(t)}finally{this.disabled=!1}}}});const u=(0,i(893).Z)(d,n,[],!1,null,null,null).exports},369:(t,e,i)=>{\"use strict\";i.r(e),i.d(e,{default:()=>m});var n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(\"div\",{staticClass:\"download-danmaku-config download-video-config-section\"},[e(\"div\",{staticClass:\"download-video-config-item\"},[e(\"div\",{staticClass:\"download-video-config-title\"},[t._v(\"弹幕:\")]),t._v(\" \"),e(\"VDropdown\",{attrs:{items:t.items},scopedSlots:t._u([{key:\"item\",fn:function({item:e}){return[t._v(\"\\n        \"+t._s(e)+\"\\n      \")]}}]),model:{value:t.type,callback:function(e){t.type=e},expression:\"type\"}})],1)])};n._withStripped=!0;var o=i(986),r=i(648);const a=(0,o.getComponentSettings)(\"downloadVideo\").options,s=Vue.extend({components:{VDropdown:r.VDropdown},data:()=>({type:a.danmakuType??\"无\",items:[\"无\",\"ass\",\"json\",\"xml\"]}),computed:{enabled(){return\"无\"!==this.type}},watch:{type(t){a.danmakuType=t}}});var l=i(332),c=i.n(l),d=i(662),u=i.n(d),p={insert:\"head\",singleton:!1};c()(u(),p);u().locals;const m=(0,i(893).Z)(s,n,[],!1,null,null,null).exports},893:(t,e,i)=>{\"use strict\";function n(t,e,i,n,o,r,a,s){var l,c=\"function\"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId=\"data-v-\"+r),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):o&&(l=s?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}i.d(e,{Z:()=>n})},986:t=>{\"use strict\";t.exports=coreApis.settings},648:t=>{\"use strict\";t.exports=coreApis.ui},414:t=>{\"use strict\";t.exports=coreApis.utils.log},674:t=>{\"use strict\";t.exports=coreApis.utils.title}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={id:n,exports:{}};return t[n](r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})};var n={};return(()=>{\"use strict\";i.d(n,{component:()=>s});const t=coreApis.componentApis.define,e=coreApis.spinQuery,o=coreApis.toast,r=coreApis.utils.urls,a=(0,t.defineOptionsMetadata)({speed:{defaultValue:\"auto\",hidden:!0}}),s=(0,t.defineComponentMetadata)({name:\"downloadDanmaku\",displayName:\"下载弹幕\",description:{\"zh-CN\":\"启用下载弹幕支持, 在视频和番剧页面中可从功能面板里下载弹幕. 请注意 ASS 弹幕下载不会包含高级弹幕, 字幕弹幕等.\"},tags:[componentsTags.video],entry:none,reload:none,unload:none,options:a,plugin:{displayName:\"下载视频 - 下载弹幕支持\",setup:t=>{let{addData:e}=t;e(\"downloadVideo.assets\",(async t=>{const{getBlobByType:e}=await Promise.resolve().then(i.bind(i,53));t.push({name:\"downloadDanmaku\",displayName:\"下载弹幕\",getAssets:async(t,i)=>{const{type:n,enabled:r}=i;if(!r)return[];const a=o.Toast.info(\"获取弹幕中...\",\"下载弹幕\");let s=0;const l=await Promise.allSettled(t.map((async i=>{const o=await e(n,i.input);return s++,a.message=`获取弹幕中... (${s}/${t.length})`,{name:`${i.input.title}.${n}`,data:o}}))),c=l.filter((t=>\"fulfilled\"===t.status)),d=l.filter((t=>\"rejected\"===t.status));return a.message=`获取完成. 成功 ${c.length} 个, 失败 ${d.length} 个.`,c.map((t=>t.value))},component:()=>Promise.resolve().then(i.bind(i,369)).then((t=>t.default))})}))}},urlInclude:r.videoAndBangumiUrls,widget:{condition:e.hasVideo,component:()=>Promise.resolve().then(i.bind(i,327)).then((t=>t.default))},commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),n=n.component})()));",
      "metadata": {
        "name": "downloadDanmaku",
        "displayName": "下载弹幕",
        "description": {
          "zh-CN": "启用下载弹幕支持, 在视频和番剧页面中可从功能面板里下载弹幕. 请注意 ASS 弹幕下载不会包含高级弹幕, 字幕弹幕等."
        },
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "options": {
          "speed": {
            "defaultValue": "auto",
            "hidden": true
          }
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {
          "speed": "auto"
        }
      }
    },
    "downloadVideo": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/download\"]=t():e[\"video/download\"]=t()}(globalThis,(()=>(()=>{var e,t,i={51:(e,t,i)=>{\"use strict\";i.d(t,{_i:()=>p,o1:()=>x,Ld:()=>w,JV:()=>b,SS:()=>y});var n=i(375),o=i(605);const s=coreApis.utils.sort;var a=i(391),r=i(457),d=i(548),l=i(662),c=i(184),u=i(986);const p={video:\".mp4\",audio:\".m4a\",flacAudio:\".flac\"};let h=function(e){return e.Avc=\"AVC/H.264\",e.Hevc=\"HEVC/H.265\",e.Av1=\"AV1\",e}({});const f=e=>{const{options:t}=(0,u.getComponentSettings)(\"downloadVideo\");return\"video\"===e?t.dashVideoExtension:\"audio\"===e?t.dashAudioExtension:\"flacAudio\"===e?t.dashFlacAudioExtension:p[e]??\".m4s\"},m=e=>({url:e.downloadUrl,backupUrls:e.backupUrls,length:e.duration,size:Math.trunc(e.bandWidth*e.duration/8),extension:f(e.type)}),v=e=>{const{videoDashes:t,audioDashes:i,videoCodec:n}=e,o=[];if(0!==t.length){const e=e=>e.videoCodec===n;if(t.some(e)){const i=t.filter(e).sort((0,s.ascendingSort)((e=>e.bandWidth)))[0];o.push(m(i))}else o.push(m(t.sort((0,s.ascendingSort)((e=>e.bandWidth)))[0]))}if(0!==i.length){const e=i.sort((0,s.descendingSort)((e=>e.bandWidth)))[0];o.push(m(e))}return o},g=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{codec:i=h.Avc,filters:s}=t,u={video:()=>!0,audio:()=>!0,...s},{aid:p,cid:f,quality:m}=e,g={avid:p,cid:f,qn:m?.value??\"\",otype:\"json\",fourk:1,fnver:0,fnval:4048},b=r.bangumiUrls.some((e=>(0,o.matchUrlPattern)(e))),y=b?(0,c.l)((0,o.formData)(g)):(0,c.s)((0,o.formData)(g)),w=await(0,n.bilibiliApi)((0,n.getJsonWithCredentials)(y),\"获取视频链接失败\");if(!w.dash)throw new Error(\"此视频没有 dash 格式, 请改用其他格式.\");const x=a.allQualities.find((e=>e.value===w.quality)),{duration:_,video:k,audio:I,dolby:C,flac:A}=w.dash,V=e=>{switch(e){case 12:return h.Hevc;case 13:return h.Av1;default:return h.Avc}},S=k.filter((e=>e.id===x.value)).map((e=>({type:\"video\",videoCodec:V(e.codecid),quality:x,width:e.width,height:e.height,codecs:e.codecs,codecId:e.codecid,bandWidth:e.bandwidth,frameRate:e.frameRate,backupUrls:(e.backupUrl||e.backup_url||[]).map((e=>e.replace(\"http:\",\"https:\"))),downloadUrl:(e.baseUrl||e.base_url||\"\").replace(\"http:\",\"https:\"),duration:_}))).filter((e=>u.video(e))),D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"audio\";return{type:t,bandWidth:e.bandwidth,codecs:e.codecs,codecId:e.codecid??0,backupUrls:(e.backupUrl||e.backup_url||[]).map((e=>e.replace(\"http:\",\"https:\"))),downloadUrl:(e.baseUrl||e.base_url||\"\").replace(\"http:\",\"https:\"),duration:_}},E=(I||[]).map((e=>D(e))).filter((e=>u.audio(e)));C&&E.push(...C.audio?.map((e=>D(e)))??[]),A&&E.push(...A.audio?[D(A.audio,\"flacAudio\")]:[]);const O=v({audioDashes:E,videoDashes:S,videoCodec:i}),U=w.accept_quality.map((e=>a.allQualities.find((t=>t.value===e)))).filter((e=>void 0!==e)),T=new l.c({input:e,jsonData:w,fragments:O,qualities:U,currentQuality:x});return(0,d.c)(e,T),T},b={name:\"video.dash.avc\",displayName:\"dash (AVC/H.264)\",description:\"音画分离的 mp4 格式, 编码为 H.264, 体积较大, 兼容性较好. 下载后可以合并为单个 mp4 文件. 如果视频源没有此编码, 则会自动选择其他同清晰度的编码格式.\",downloadVideoInfo:async e=>g(e,{codec:h.Avc})},y={name:\"video.dash.hevc\",displayName:\"dash (HEVC/H.265)\",description:\"音画分离的 mp4 格式, 编码为 H.265, 体积中等, 兼容性较差. 下载后可以合并为单个 mp4 文件. 如果视频源没有此编码, 则会自动选择其他同清晰度的编码格式.\",downloadVideoInfo:async e=>g(e,{codec:h.Hevc})},w={name:\"video.dash.av1\",displayName:\"dash (AV1)\",description:\"音画分离的 mp4 格式, 编码为 AV1, 体积较小, 兼容性中等. 下载后可以合并为单个 mp4 文件. 如果视频源没有此编码, 则会自动选择其他同清晰度的编码格式.\",downloadVideoInfo:async e=>g(e,{codec:h.Av1})},x={name:\"video.dash.audio\",displayName:\"dash (仅音频)\",description:\"仅下载视频中的音频轨道.\",downloadVideoInfo:async e=>g(e,{filters:{video:()=>!1}})}},184:(e,t,i)=>{\"use strict\";i.d(t,{l:()=>o,s:()=>n});const n=e=>`https://api.bilibili.com/x/player/playurl?${e}`,o=e=>`https://api.bilibili.com/pgc/player/web/playurl?${e}`},548:(e,t,i)=>{\"use strict\";i.d(t,{c:()=>o});var n=i(391);const o=(e,t)=>{e.quality&&t.currentQuality.value!==e.quality.value&&(e.allowQualityDrop?console.warn(`'${e.title}' 不支持选择的清晰度${e.quality.displayName}, 已降级为${t.currentQuality.displayName}`):(e=>{if(n.vipRequiredQualities.find((t=>t.value===e)))throw new Error(\"您选择的清晰度需要大会员, 请更改清晰度后重试.\");if(n.loginRequiredQualities.find((t=>t.value===e)))throw new Error(\"您选择的清晰度需要先登录.\");throw new Error(\"获取下载链接失败, 请尝试更换清晰度或更换格式.\")})(e.quality.value))}},662:(e,t,i)=>{\"use strict\";i.d(t,{u:()=>d,c:()=>r});const n=coreApis.download;var o=i(289),s=i(674);function a(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||\"default\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class r{constructor(e){a(this,\"input\",void 0),a(this,\"fragments\",void 0),a(this,\"qualities\",void 0),a(this,\"currentQuality\",void 0),a(this,\"jsonData\",void 0),Object.assign(this,e)}get totalSize(){return lodash.sumBy(this.fragments,(e=>e.size))}get totalLength(){return lodash.sumBy(this.fragments,(e=>e.length))}get titledFragments(){return this.fragments.map(((e,t)=>{const i=this.fragments.filter((t=>t.extension===e.extension)).length>1?` - ${(0,o.formatNumber)(t+1,this.fragments.length)}`:\"\";return{...e,title:`${this.input.title}${i}${e.extension}`}}))}}class d{constructor(e){this.infos=e,a(this,\"inputs\",[]),a(this,\"extraAssets\",[]),a(this,\"extraOnlineAssets\",[]),this.inputs=e.map((e=>e.input))}get isSingleVideo(){return this.inputs.length<2}async downloadExtraAssets(){console.log(\"[downloadExtraAssets]\",this.extraAssets);const e=`${(0,s.getFriendlyTitle)(!1)}.zip`,{infos:t}=this,i=(await Promise.all([...this.extraAssets,...this.extraOnlineAssets].map((e=>{let{asset:i,instance:n}=e;return i.getAssets(t,n)})))).flat();await new n.DownloadPackage(i).emit(e)}}},536:(e,t,i)=>{var n=i(218)((function(e){return e[1]}));n.push([e.id,\".download-video-panel {\\n  background-color: #fff;\\n  color: black;\\n  border-radius: 8px;\\n  border: 1px solid rgba(136, 136, 136, 0.1333333333);\\n  box-sizing: border-box;\\n  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.05);\\n  font-size: 12px;\\n  padding: 6px;\\n  top: 100px;\\n  left: 50%;\\n  transform: translateX(-50%) scale(0.95);\\n  transition: 0.2s ease-out;\\n  z-index: 1000;\\n  width: 320px;\\n  height: calc(100vh - 200px);\\n  display: flex;\\n  flex-direction: column;\\n}\\nbody.dark .download-video-panel {\\n  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.2);\\n}\\nbody.dark .download-video-panel {\\n  background-color: #282828;\\n  color: #eee;\\n}\\n.download-video-panel.open {\\n  transform: translateX(-50%);\\n}\\n.download-video-panel .be-textbox,\\n.download-video-panel .be-textarea {\\n  flex-grow: 1;\\n}\\n.download-video-panel-header {\\n  display: flex;\\n  align-items: center;\\n  border-bottom: 1px solid rgba(136, 136, 136, 0.1333333333);\\n  padding: 6px 0;\\n  margin: 0 6px;\\n}\\n.download-video-panel-header .title {\\n  font-size: 16px;\\n  font-weight: 600;\\n  flex-grow: 1;\\n  margin: 0 8px;\\n}\\n.download-video-panel-header .be-button {\\n  padding: 4px;\\n}\\n.download-video-panel-content {\\n  overflow: auto;\\n  scrollbar-width: none !important;\\n  overscroll-behavior: contain;\\n  display: flex;\\n  align-items: stretch;\\n  flex-direction: column;\\n  flex: 1 0 0;\\n  padding: 12px 6px;\\n  align-items: flex-start;\\n}\\n.download-video-panel-content::-webkit-scrollbar {\\n  height: 0 !important;\\n  width: 0 !important;\\n}\\n.download-video-panel-content > :not(:first-child) {\\n  margin-top: 12px;\\n}\\n.download-video-panel .download-video-config-item {\\n  display: flex;\\n  align-items: center;\\n}\\n.download-video-panel .download-video-config-item .download-video-config-title {\\n  margin-right: 8px;\\n}\\n.download-video-panel .download-video-config-item.error {\\n  color: #e57373;\\n}\\n.download-video-panel .download-video-config-section {\\n  align-self: stretch;\\n}\\n.download-video-panel .download-video-config-description {\\n  color: rgba(136, 136, 136, 0.8666666667);\\n  margin-top: 4px;\\n}\\n.download-video-panel .download-video-config-description a {\\n  color: var(--theme-color-70);\\n}\\n.download-video-panel-footer {\\n  display: flex;\\n  align-items: center;\\n  border-top: 1px solid rgba(136, 136, 136, 0.1333333333);\\n  padding: 6px 0;\\n  margin: 0 6px;\\n  justify-content: center;\\n}\\n.download-video-panel .run-download {\\n  font-size: 13px;\\n  padding: 6px 12px;\\n}\",\"\"]),e.exports=n},320:(e,t,i)=>{var n=i(218)((function(e){return e[1]}));n.push([e.id,\".episodes-picker-header {\\n  display: flex;\\n  align-items: center;\\n}\\n.episodes-picker-checked-ratio {\\n  flex-grow: 1;\\n  margin-left: 4px;\\n}\\n.episodes-picker-actions {\\n  display: flex;\\n  align-items: center;\\n}\\n.episodes-picker-actions .be-button {\\n  padding: 4px;\\n}\\n.episodes-picker-actions .be-button.invert-selection .be-icon {\\n  font-size: 14px;\\n}\\n.episodes-picker-actions .be-button.select-all .be-icon, .episodes-picker-actions .be-button.deselect-all .be-icon {\\n  transform: translateY(1px);\\n}\\n.episodes-picker-items {\\n  max-height: 400px;\\n  overflow: auto;\\n}\\n.episodes-picker-items:not(:empty) {\\n  margin-top: 4px;\\n  border: 1px solid rgba(136, 136, 136, 0.2666666667);\\n  border-radius: 6px;\\n}\\n.episodes-picker-items .be-check-box {\\n  padding: 2px 6px;\\n}\\n.episodes-picker-items .episode-duration {\\n  margin-right: 4px;\\n  text-align: right;\\n  flex: 1 1 0;\\n  opacity: 0.5;\\n}\\n.episodes-picker-empty {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  padding: 4px 0;\\n}\",\"\"]),e.exports=n},965:(e,t,i)=>{var n=i(218)((function(e){return e[1]}));n.push([e.id,\".single-video-info.download-video-config-section {\\n  position: relative;\\n  height: 125px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n.single-video-info.download-video-config-section img {\\n  height: 125px;\\n  object-fit: contain;\\n  border-radius: 8px;\\n}\\n.single-video-info.download-video-config-section img.shadow {\\n  position: absolute;\\n  filter: blur(8px) brightness(0.8);\\n  transform: scaleY(0.95) translateY(4px);\\n  z-index: -1;\\n  opacity: 0.3;\\n}\",\"\"]),e.exports=n},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(i,\"}\"):i})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,i,n){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var o={};if(n)for(var s=0;s<this.length;s++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[s][0];null!=a&&(o[a]=!0)}for(var r=0;r<e.length;r++){var d=[].concat(e[r]);n&&o[d[0]]||(i&&(d[2]?d[2]=\"\".concat(i,\" and \").concat(d[2]):d[2]=i),t.push(d))}},t}},332:(e,t,i)=>{\"use strict\";var n,o=function(){return void 0===n&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\nn=Boolean(window&&document&&document.all&&!window.atob)),n},s=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),a=[];function r(e){for(var t=-1,i=0;i<a.length;i++)if(a[i].identifier===e){t=i;break}return t}function d(e,t){for(var i={},n=[],o=0;o<e.length;o++){var s=e[o],d=t.base?s[0]+t.base:s[0],l=i[d]||0,c=\"\".concat(d,\" \").concat(l);i[d]=l+1;var u=r(c),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(a[u].references++,a[u].updater(p)):a.push({identifier:c,updater:v(p,t),references:1}),n.push(c)}return n}function l(e){var t=document.createElement(\"style\"),n=e.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),\"function\"==typeof e.insert)e.insert(t);else{var a=s(e.insert||\"head\");if(!a)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");a.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join(\"\\n\")});function p(e,t,i,n){var o=i?\"\":n.media?\"@media \".concat(n.media,\" {\").concat(n.css,\"}\"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var s=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function h(e,t,i){var n=i.css,o=i.media,s=i.sourceMap;if(o?e.setAttribute(\"media\",o):e.removeAttribute(\"media\"),s&&\"undefined\"!=typeof btoa&&(n+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s)))),\" */\")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var f=null,m=0;function v(e,t){var i,n,o;if(t.singleton){var s=m++;i=f||(f=l(t)),n=p.bind(null,i,s,!1),o=p.bind(null,i,s,!0)}else i=l(t),n=h.bind(null,i,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=o());var i=d(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var o=r(i[n]);a[o].references--}for(var s=d(e,t),l=0;l<i.length;l++){var c=r(i[l]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}i=s}}}},494:(e,t,i)=>{\"use strict\";i.r(t),i.d(t,{default:()=>J});var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"VPopup\",{staticClass:\"download-video-panel\",attrs:{fixed:\"\",\"trigger-element\":e.triggerElement},model:{value:e.open,callback:function(t){e.open=t},expression:\"open\"}},[t(\"div\",{staticClass:\"download-video-panel-header\"},[t(\"VIcon\",{attrs:{icon:\"mdi-download\"}}),e._v(\" \"),t(\"div\",{staticClass:\"title\"},[e._v(\"下载视频\")]),e._v(\" \"),t(\"VButton\",{attrs:{type:\"transparent\",title:\"关闭\"},on:{click:function(t){e.open=!1}}},[t(\"VIcon\",{attrs:{icon:\"mdi-close\",size:20}})],1)],1),e._v(\" \"),t(\"div\",{staticClass:\"download-video-panel-content\"},[e.selectedInput?t(\"div\",{staticClass:\"download-video-config-item\"},[t(\"div\",{staticClass:\"download-video-config-title\"},[e._v(\"输入源:\")]),e._v(\" \"),t(\"VDropdown\",{attrs:{items:e.inputs},model:{value:e.selectedInput,callback:function(t){e.selectedInput=t},expression:\"selectedInput\"}})],1):e._e(),e._v(\" \"),0===e.inputs.length?t(\"div\",{staticClass:\"download-video-config-item error\"},[e._v(\"\\n      没有匹配的输入源, 请确保安装了适合此页面的插件.\\n    \")]):e._e(),e._v(\" \"),e.selectedInput&&e.selectedInput.component?t(e.selectedInput.component,{ref:\"inputOptions\",tag:\"component\"}):e._e(),e._v(\" \"),e.selectedApi?t(\"div\",{staticClass:\"download-video-config-item\"},[t(\"div\",{staticClass:\"download-video-config-title\"},[e._v(\"格式:\")]),e._v(\" \"),t(\"VDropdown\",{attrs:{items:e.apis},model:{value:e.selectedApi,callback:function(t){e.selectedApi=t},expression:\"selectedApi\"}})],1):e._e(),e._v(\" \"),e.selectedApi&&e.selectedApi.description?t(\"div\",{staticClass:\"download-video-config-description\",domProps:{innerHTML:e._s(e.selectedApi.description)}}):e._e(),e._v(\" \"),e.selectedQuality?t(\"div\",{staticClass:\"download-video-config-item\"},[t(\"div\",{staticClass:\"download-video-config-title\"},[e._v(\"清晰度:\")]),e._v(\" \"),t(\"VDropdown\",{attrs:{items:e.filteredQualities},on:{change:function(t){return e.saveSelectedQuality()}},model:{value:e.selectedQuality,callback:function(t){e.selectedQuality=t},expression:\"selectedQuality\"}})],1):e._e(),e._v(\" \"),!e.testData.multiple&&e.selectedQuality?[e.testData.videoInfo?t(\"div\",{staticClass:\"download-video-config-description\"},[e._v(\"\\n        预计大小: \"+e._s(e.formatFileSize(e.testData.videoInfo.totalSize))+\"\\n      \")]):e._e(),e._v(\" \"),null===e.testData.videoInfo?t(\"div\",{staticClass:\"download-video-config-description\"},[e._v(\"\\n        正在计算大小\\n      \")]):e._e()]:e._e(),e._v(\" \"),t(\"div\",{staticClass:\"download-video-config-item\"},[t(\"div\",{staticClass:\"download-video-config-title\"},[e._v(\"使用备用下载地址:\")]),e._v(\" \"),t(\"SwitchBox\",{model:{value:e.useBackupUrls,callback:function(t){e.useBackupUrls=t},expression:\"useBackupUrls\"}})],1),e._v(\" \"),t(\"div\",{staticClass:\"download-video-config-description\"},[e._v(\"\\n      若默认下载地址速度缓慢, 可以尝试更换备用下载地址.\\n    \")]),e._v(\" \"),e._l(e.assetsWithOptions,(function(e){return t(e.component,{key:e.name,ref:\"assetsOptions\",refInFor:!0,tag:\"component\",attrs:{name:e.name}})})),e._v(\" \"),e.selectedOutput?t(\"div\",{staticClass:\"download-video-config-item\"},[t(\"div\",{staticClass:\"download-video-config-title\"},[e._v(\"输出方式:\")]),e._v(\" \"),t(\"VDropdown\",{attrs:{items:e.outputs},model:{value:e.selectedOutput,callback:function(t){e.selectedOutput=t},expression:\"selectedOutput\"}})],1):e._e(),e._v(\" \"),e.selectedOutput&&e.selectedOutput.description?t(\"div\",{staticClass:\"download-video-config-description\",domProps:{innerHTML:e._s(e.selectedOutput.description)}}):e._e(),e._v(\" \"),e.selectedOutput&&e.selectedOutput.component?t(e.selectedOutput.component,{ref:\"outputOptions\",tag:\"component\"}):e._e()],2),e._v(\" \"),t(\"div\",{staticClass:\"download-video-panel-footer\"},[t(\"VButton\",{staticClass:\"run-download\",attrs:{type:\"primary\",disabled:!e.canStartDownload},on:{click:function(t){return e.startDownload(e.$refs.outputOptions,e.selectedOutput)}}},[e._v(\"\\n      开始\\n    \")])],1)])};n._withStripped=!0;var o=i(986),s=i(605);const a=coreApis.utils.log;var r=i(289);const d=coreApis.ui,l=coreApis.pluginApis.data;var c=i(391);const u=coreApis.toast;var p=i(674),h=i(375),f=i(457),m=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"div\",{staticClass:\"episodes-picker download-video-config-section\"},[t(\"div\",{staticClass:\"episodes-picker-header\"},[t(\"div\",{staticClass:\"episodes-picker-title\"},[e._v(\"选集:\")]),e._v(\" \"),t(\"div\",{staticClass:\"episodes-picker-checked-ratio\"},[e._v(\"\\n      \"+e._s(e.checkedRatio)+\"\\n    \")]),e._v(\" \"),t(\"div\",{staticClass:\"episodes-picker-actions\"},[t(\"VButton\",{staticClass:\"select-all\",attrs:{title:\"全选\",type:\"transparent\"},on:{click:function(t){e.forEachItem((e=>e.isChecked=!0))}}},[t(\"VIcon\",{attrs:{size:16,icon:\"mdi-checkbox-multiple-marked-circle\"}})],1),e._v(\" \"),t(\"VButton\",{staticClass:\"deselect-all\",attrs:{title:\"全不选\",type:\"transparent\"},on:{click:function(t){e.forEachItem((e=>e.isChecked=!1))}}},[t(\"VIcon\",{attrs:{size:16,icon:\"mdi-checkbox-multiple-blank-circle-outline\"}})],1),e._v(\" \"),t(\"VButton\",{staticClass:\"invert-selection\",attrs:{title:\"反选\",type:\"transparent\"},on:{click:function(t){e.forEachItem((e=>e.isChecked=!e.isChecked))}}},[t(\"VIcon\",{attrs:{size:16,icon:\"mdi-circle-slice-4\"}})],1)],1)]),e._v(\" \"),t(\"div\",{staticClass:\"episodes-picker-items\"},[0===e.episodeItems.length?t(\"div\",{staticClass:\"episodes-picker-empty\"},[t(\"VEmpty\")],1):e._e(),e._v(\" \"),e._l(e.episodeItems,(function(i,n){return t(\"div\",{key:i.key,staticClass:\"episodes-picker-item\"},[t(\"CheckBox\",{attrs:{\"icon-position\":\"left\",\"data-aid\":i.inputItem.aid,\"data-cid\":i.inputItem.cid,\"data-bvid\":i.inputItem.bvid},nativeOn:{click:function(t){return e.shiftSelect(t,i,n)}},model:{value:i.isChecked,callback:function(t){e.$set(i,\"isChecked\",t)},expression:\"item.isChecked\"}},[t(\"span\",{staticClass:\"episode-title\"},[e._v(\"\\n          \"+e._s(i.title)+\"\\n        \")]),e._v(\" \"),i.durationText?t(\"span\",{staticClass:\"episode-duration\"},[e._v(\"\\n          \"+e._s(i.durationText)+\"\\n        \")]):e._e()])],1)}))],2)])};m._withStripped=!0;const v=Vue.extend({components:{VButton:d.VButton,VIcon:d.VIcon,CheckBox:d.CheckBox,VEmpty:d.VEmpty},props:{api:{type:Function,required:!0}},data:()=>({episodeItems:[],maxCheckedItems:32,lastCheckedEpisodeIndex:-1}),computed:{checkedRatio(){return`(${this.episodeItems.filter((e=>e.isChecked)).length}/${this.episodeItems.length})`},inputItems(){return this.episodeItems.map((e=>e.inputItem))},checkedInputItems(){return this.episodeItems.filter((e=>e.isChecked)).map((e=>e.inputItem))}},created(){this.getEpisodeItems()},methods:{shiftSelect(e,t,i){e.shiftKey&&-1!==this.lastCheckedEpisodeIndex?e.shiftKey&&-1!==this.lastCheckedEpisodeIndex&&(this.episodeItems.slice(Math.min(this.lastCheckedEpisodeIndex,i)+1,Math.max(this.lastCheckedEpisodeIndex,i)).forEach((e=>{e.isChecked=!e.isChecked})),this.lastCheckedEpisodeIndex=i,e.preventDefault()):this.lastCheckedEpisodeIndex=i},forEachItem(e){this.episodeItems.forEach(e)},async getEpisodeItems(){this.episodeItems.length>0||(this.episodeItems=await this.api(this))}}});var g=i(332),b=i.n(g),y=i(320),w=i.n(y),x={insert:\"head\",singleton:!1};b()(w(),x);w().locals;var _=i(893);const k=(0,_.Z)(v,m,[],!1,null,null,null).exports,I=e=>Vue.extend({computed:{checkedInputItems(){return this.$refs.picker.checkedInputItems}},render:t=>t(k,{props:{api:e},ref:\"picker\"})}),C={name:\"bangumi.batch\",displayName:\"当前番剧 (多P)\",match:f.bangumiUrls,batch:!0,getInputs:async e=>e?.checkedInputItems??[],component:async()=>I((async e=>{const t=dq('script[type=\"application/ld+json\"]');if(!t)return(0,a.logError)(\"获取番剧数据失败: 无法找到 Metadata\"),[];const i=JSON.parse(t.innerHTML.trim()),n=lodash.get(i,\"itemListElement.0.url\",null);if(null===n)return(0,a.logError)(\"获取番剧数据失败: 无法找到 metaUrl\"),[];const s=n.match(/play\\/ss(\\d+)/)?.[1];if(void 0===s)return(0,a.logError)(\"获取番剧数据失败: 无法解析 Season ID\"),[];const d=await(0,h.getJson)(`https://api.bilibili.com/pgc/web/season/section?season_id=${s}`);if(0!==d.code)return(0,a.logError)(`获取番剧数据失败: 无法获取番剧集数列表, message=${d.message}`),[];const l=[...d.result.main_section.episodes,...d.result.section?.flatMap((e=>e.episodes))??[]];return l.map((c=l.length,(t,i)=>{const n=t.long_title?t.title:(i+1).toString(),s=t.long_title?t.long_title:t.title;return{key:t.cid,title:`${n} - ${s}`,isChecked:i<e.maxCheckedItems,inputItem:{aid:t.aid,cid:t.cid,title:(0,p.formatTitle)((0,o.getGeneralSettings)().batchFilenameFormat,!1,{ep:s,cid:t.cid,aid:t.aid,n:(0,r.formatNumber)(parseFloat(n),c)??n}),allowQualityDrop:!0}}}));var c}))},A={name:\"video.batch\",displayName:\"当前视频 (多P)\",match:f.videoUrls,batch:!0,getInputs:async e=>e?.checkedInputItems??[],component:async()=>I((async e=>{const{aid:t}=unsafeWindow,i=`https://api.bilibili.com/x/web-interface/view?aid=${t}`,n=await(0,h.getJsonWithCredentials)(i);if(0!==n.code)return(0,a.logError)(`获取视频选集列表失败, message = ${n.message}`),[];const{pages:s,owner:d,pubdate:l}=n.data;if(void 0===s)return(0,a.logError)(\"获取视频选集列表失败, 没有找到选集信息.\"),[];const c=(0,p.getTitleVariablesFromDate)(new Date(1e3*l));return s.map(((i,n)=>({key:i.cid,title:`P${i.page} ${i.part}`,isChecked:n<e.maxCheckedItems,durationText:(0,r.formatDuration)(i.duration),inputItem:{allowQualityDrop:!0,title:(0,p.formatTitle)((0,o.getGeneralSettings)().batchFilenameFormat,!1,{n:(0,r.formatNumber)(i.page,s.length),cid:i.cid,ep:i.part,user:d?.name,userID:d?.mid?.toString(),publishYear:c.year,publishMonth:c.month,publishDay:c.day,publishHour:c.hour,publishMinute:c.minute,publishSecond:c.second,publishMillisecond:c.millisecond}),cid:i.cid,aid:t}})))}))},V={name:\"video.seasonBatch\",displayName:\"当前视频 (合集)\",match:f.videoUrls,batch:!0,getInputs:async e=>e?.checkedInputItems??[],component:async()=>I((async e=>{const{aid:t,bvid:i}=unsafeWindow,n=`https://api.bilibili.com/x/web-interface/wbi/view/detail?bvid=${i}&aid=${t}`,s=await(0,h.getJsonWithCredentials)(n);if(0!==s.code)return(0,a.logError)(`获取视频合集列表失败, message = ${s.message}`),[];const d=lodash.get(s,\"data.View.owner\",{}),l=lodash.get(s,\"data.View.ugc_season.sections\",[]);if(0===l.length)return[];const c=lodash.sumBy(l,(e=>e.episodes.length));return l.flatMap(((t,i)=>{const{episodes:n=[]}=t;return n.map(((t,n)=>{const s=n+lodash.sumBy(l.slice(0,i),(e=>e.episodes.length)),a=t.cid,u=s+1,h=`P${u} ${t.title}`,f=(0,p.getTitleVariablesFromDate)(new Date(1e3*t.arc.pubdate));return{key:a,title:h,isChecked:s<e.maxCheckedItems,durationText:(0,r.formatDuration)(t.arc.duration),inputItem:{allowQualityDrop:!0,title:(0,p.formatTitle)((0,o.getGeneralSettings)().batchFilenameFormat,!1,{n:(0,r.formatNumber)(u,c),title:t.page.part,cid:t.cid,aid:t.aid,bvid:t.bvid,ep:t.title,user:d.name,userID:d.mid?.toString(),publishYear:f.year,publishMonth:f.month,publishDay:f.day,publishHour:f.hour,publishMinute:f.minute,publishSecond:f.second,publishMillisecond:f.millisecond}),cid:t.cid,aid:t.aid}}}))}))}))},S={name:\"video\",displayName:\"当前视频\",match:f.videoUrls,getInputs:async()=>[{aid:unsafeWindow.aid,cid:unsafeWindow.cid,title:(0,p.getFriendlyTitle)(!0)}],component:()=>Promise.resolve().then(i.bind(i,413)).then((e=>e.default))};var D=i(51),E=i(548),O=i(662),U=i(184);const T=(e,t)=>{const i=e=>t.length>e?t[e]:t[t.length-1];return{fragments:e.durl.map(((e,t)=>({length:e.length,size:e.size,url:e.url,backupUrls:e.backup_url,extension:i(t)}))),qualities:e.accept_quality.map((e=>c.allQualities.find((t=>t.value===e)))).filter((e=>void 0!==e)),currentQuality:c.allQualities.find((t=>t.value===e.quality))}},$={name:\"video.flv\",displayName:\"flv\",description:\"使用 flv 格式下载, 兼容 H.264 编码. 支持的清晰度相比于 dash 会少很多.\",downloadVideoInfo:e=>(async e=>{const{aid:t,cid:i,quality:n}=e,o={avid:t,cid:i,qn:n?.value??\"\",otype:\"json\"},a=f.bangumiUrls.some((e=>(0,s.matchUrlPattern)(e))),r=a?(0,U.l)((0,s.formData)(o)):(0,U.s)((0,s.formData)(o)),d=await(0,h.bilibiliApi)((0,h.getJsonWithCredentials)(r),\"获取视频链接失败\"),l=new O.c({input:e,jsonData:d,...T(d,[\".flv\"])});return(0,E.c)(e,l),l})(e)},j=coreApis.runtimeLibrary,P={name:\"steamSaver\",displayName:\"StreamSaver\",description:'使用 StreamSaver 输出到本地文件, 下载过程中请勿关闭页面. 注意: 需要浏览器允许来自 jimmywarting.github.io (StreamSaver 的网站) 的第三方 cookie, 详细原因见 <a href=\"https://github.com/jimmywarting/StreamSaver.js?#how-does-it-work\" target=\"blank\">How does it work</a>, 否则弹出的链接点击后会没有反应.',runAction:async e=>{const t=await j.StreamSaverLibrary,i=e.infos.flatMap((e=>e.titledFragments)),n=u.Toast.show(i.map(((e,t)=>`<a class=\"link\" data-index=\"${t}\">${e.title}</a>`)).join(\"\\n\"),\"下载视频\"),o=await n.element;dqa(o,\"a[data-index]\").forEach((e=>{e.addEventListener(\"click\",(async()=>{const{index:n}=e.dataset,{title:o,url:s,size:a}=i[n],r=t.createWriteStream(o,{size:a}),d=await fetch(s);await d.body.pipeTo(r)}))}))}},[q]=(0,l.registerAndGetData)(\"downloadVideo.inputs\",[S,A,V,C]),[N]=(0,l.registerAndGetData)(\"downloadVideo.apis\",[$,D.JV,D.SS,D.Ld,D.o1]),[Q]=(0,l.registerAndGetData)(\"downloadVideo.assets\",[]),[B]=(0,l.registerAndGetData)(\"downloadVideo.outputs\",[P]),{basicConfig:M}=(0,o.getComponentSettings)(\"downloadVideo\").options,F=e=>e.filter((e=>e.match?.some((e=>(0,s.matchUrlPattern)(e)))??!0)),H=Vue.extend({components:{VPopup:d.VPopup,VButton:d.VButton,VDropdown:d.VDropdown,VIcon:d.VIcon,SwitchBox:d.SwitchBox},props:{triggerElement:{required:!0}},data(){const e=M.output,t=M.useBackupUrls;return{open:!1,busy:!1,testData:{videoInfo:null,multiple:!1},assets:Q,qualities:[],selectedQuality:void 0,inputs:[],selectedInput:void 0,apis:[],selectedApi:void 0,outputs:B,selectedOutput:B.find((t=>t.name===e))||B[0],useBackupUrls:t||!1}},computed:{assetsWithOptions(){return this.assets.filter((e=>e.component))},filteredQualities(){return 0===this.qualities.length?c.allQualities:this.qualities},canStartDownload(){if(this.busy||!this.open)return!1;return!Object.entries(this).filter((e=>{let[t]=e;return t.startsWith(\"selected\")})).some((e=>{let[,t]=e;return!t}))}},watch:{selectedInput(e){void 0!==e&&this.updateTestVideoInfo()},selectedApi(e){void 0!==e&&(this.updateTestVideoInfo(),M.api=e.name)},selectedOutput(e){void 0!==e&&(M.output=e.name)},useBackupUrls(e){void 0!==e&&(M.useBackupUrls=e)}},mounted(){coreApis.observer.videoChange((()=>{this.selectedInput=void 0,this.selectedApi=void 0;const e=F(q);this.inputs=e,this.selectedInput=e[0];const t=F(N);this.apis=t;const i=t.find((e=>e.name===M.api));this.selectedApi=i||t[0]}))},methods:{formatFileSize:r.formatFileSize,saveSelectedQuality(){const e=this.selectedQuality;void 0!==e&&(M.quality=e.value,this.updateTestVideoInfo())},async getVideoItems(){const e=this.selectedInput;return await e.getInputs(this.$refs.inputOptions)},async updateTestVideoInfo(){if(!this.selectedInput||!this.selectedApi)return;this.testData.videoInfo=null;const e=this.selectedInput,t=e.getTestInput?.()??{aid:unsafeWindow.aid,cid:unsafeWindow.cid,title:(0,p.getFriendlyTitle)(!0)};console.log(\"[updateTestVideoInfo]\",t),this.testData.multiple=e.batch;const i=this.selectedApi;try{const e=await i.downloadVideoInfo(t);this.qualities=e.qualities;if((!this.selectedQuality||!e.qualities.some((e=>e.value===this.selectedQuality.value)))&&(this.selectedQuality=e.qualities[0],M.quality)){const[t]=e.qualities.filter((e=>e.value<=M.quality));t&&(this.selectedQuality=t)}t.quality=this.selectedQuality;const n=await i.downloadVideoInfo(t);this.testData.videoInfo=n}catch(e){console.error(\"[updateTestVideoInfo] failed\",e),this.testData.videoInfo=void 0}},async startDownload(e,t){try{this.busy=!0;const i=this.selectedInput,n=this.selectedApi,o=await i.getInputs(this.$refs.inputOptions);if(0===o.length)return void u.Toast.info(\"未接收到视频, 如果输入源支持批量, 请至少选择一个视频.\",\"下载视频\",3e3);o.forEach((e=>{e.quality=this.selectedQuality}));const s=await Promise.all(o.map((e=>n.downloadVideoInfo(e))));if(0===s.length||0===lodash.sumBy(s,(e=>e.fragments.length)))return void u.Toast.info(\"未接收到可下载数据, 请检查输入源和格式是否适用于当前视频.\",\"下载视频\",3e3);this.useBackupUrls&&s.forEach((e=>{e.fragments.forEach((e=>{e.url=e.backupUrls&&0!==e.backupUrls.length?e.backupUrls.at(0):e.url}))}));const a=new O.u(s);Q.forEach((e=>{(e?.getUrls?a.extraOnlineAssets:a.extraAssets).push({asset:e,instance:this.$refs.assetsOptions.find((t=>t.$attrs.name===e.name))})})),await t.runAction(a,e),await a.downloadExtraAssets()}catch(e){(0,a.logError)(e)}finally{this.busy=!1}}}}),z=H;\n/* spell-checker: disable */var W=i(536),L=i.n(W),R={insert:\"head\",singleton:!1};b()(L(),R);L().locals;const J=(0,_.Z)(z,n,[],!1,null,null,null).exports},134:(e,t,i)=>{\"use strict\";i.r(t),i.d(t,{default:()=>a});var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"div\",{staticClass:\"multiple-widgets\"},[t(\"DefaultWidget\",{ref:\"button\",attrs:{name:\"下载视频\",icon:\"mdi-download\"},on:{mouseover:function(t){return e.createDownloadPanel()},click:function(t){return e.toggleDownloadPanel()}}})],1)};let o;n._withStripped=!0;const s=Vue.extend({components:{DefaultWidget:coreApis.ui.DefaultWidget},methods:{async createDownloadPanel(){if(!o){const e=document.createElement(\"div\");document.body.appendChild(e);const t=await Promise.resolve().then(i.bind(i,494)).then((e=>e.default));o=new t({propsData:{triggerElement:this.$refs.button}}).$mount(e)}},async toggleDownloadPanel(){o&&(o.open=!o.open)}}});const a=(0,i(893).Z)(s,n,[],!1,null,null,null).exports},413:(e,t,i)=>{\"use strict\";i.r(t),i.d(t,{default:()=>p});var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"div\",{staticClass:\"single-video-info download-video-config-section\"},[e.imageUrl?t(\"img\",{staticClass:\"shadow\",attrs:{src:e.imageUrl}}):e._e(),e._v(\" \"),e.imageUrl?t(\"img\",{attrs:{src:e.imageUrl}}):e._e()])};n._withStripped=!0;const o=coreApis.componentApis.video.videoCover,s=coreApis.observer,a=Vue.extend({data:()=>({imageUrl:\"\"}),created(){(0,s.videoChange)((async()=>{const{aid:e}=unsafeWindow;this.imageUrl=await(0,o.getVideoCoverUrlByAid)(e)}))}});var r=i(332),d=i.n(r),l=i(965),c=i.n(l),u={insert:\"head\",singleton:!1};d()(c(),u);c().locals;const p=(0,i(893).Z)(a,n,[],!1,null,null,null).exports},893:(e,t,i)=>{\"use strict\";function n(e,t,i,n,o,s,a,r){var d,l=\"function\"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),s&&(l._scopeId=\"data-v-\"+s),a?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=d):o&&(d=r?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),d)if(l.functional){l._injectStyles=d;var c=l.render;l.render=function(e,t){return d.call(t),c(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return{exports:e,options:l}}i.d(t,{Z:()=>n})},8:e=>{function t(e){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}t.keys=()=>[],t.resolve=t,t.id=8,e.exports=t},198:e=>{\"use strict\";e.exports=\"在功能面板中添加下载视频支持. 请注意:\\n- 不能下载超出账号权限的视频, 例如非大会员下载大会员清晰度视频, 或者大陆地区网络下载港澳台地区番剧, 都是不可以的.\\n- 请勿短时间进行大量下载, 以免遭到 b 站 IP 封禁.\\n\\n在使用视频 (非番剧) 批量下载时, 文件的批量命名格式中可以使用以下额外变量:\\n- `user`: UP 主用户名\\n- `userID`: UP 主用户 ID\\n- 视频发布时间:\\n  - `publishYear`\\n  - `publishMonth`\\n  - `publishDay`\\n  - `publishHour`\\n  - `publishMinute`\\n  - `publishSecond`\\n  - `publishMillisecond`\\n\"},375:e=>{\"use strict\";e.exports=coreApis.ajax},391:e=>{\"use strict\";e.exports=coreApis.componentApis.video.videoQuality},986:e=>{\"use strict\";e.exports=coreApis.settings},289:e=>{\"use strict\";e.exports=coreApis.utils.formatters},674:e=>{\"use strict\";e.exports=coreApis.utils.title},457:e=>{\"use strict\";e.exports=coreApis.utils.urls},605:e=>{\"use strict\";e.exports=coreApis.utils}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={id:e,exports:{}};return i[e](s,s.exports,o),s.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(i,n){if(1&n&&(i=this(i)),8&n)return i;if(\"object\"==typeof i&&i){if(4&n&&i.__esModule)return i;if(16&n&&\"function\"==typeof i.then)return i}var s=Object.create(null);o.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var r=2&n&&i;\"object\"==typeof r&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach((e=>a[e]=()=>i[e]));return a.default=()=>i,o.d(s,a),s},o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var s={};return(()=>{\"use strict\";o.d(s,{component:()=>a});const e=coreApis.componentApis.define,t=coreApis.spinQuery;var i=o(51);const n=(0,e.defineOptionsMetadata)({basicConfig:{defaultValue:{},displayName:\"基础配置\",hidden:!0},dashVideoExtension:{defaultValue:i._i.video,displayName:\"DASH 视频扩展名\"},dashAudioExtension:{defaultValue:i._i.audio,displayName:\"DASH 普通音频扩展名\"},dashFlacAudioExtension:{defaultValue:i._i.flacAudio,displayName:\"DASH FLAC 音频扩展名\"}}),a=(0,e.defineComponentMetadata)({name:\"downloadVideo\",displayName:\"下载视频\",entry:none,reload:none,unload:none,widget:{component:()=>Promise.resolve().then(o.bind(o,134)).then((e=>e.default)),condition:()=>(0,t.hasVideo)()},tags:[componentsTags.video],options:n,commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\",description:(()=>{const e=o(8);return{...Object.fromEntries(e.keys().map((t=>[t.match(/index\\.(.+)\\.md$/)[1],e(t)]))),\"zh-CN\":()=>Promise.resolve().then(o.t.bind(o,198,17)).then((e=>e.default))}})()})})(),s=s.component})()));",
      "metadata": {
        "name": "downloadVideo",
        "displayName": "下载视频",
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "options": {
          "basicConfig": {
            "defaultValue": {},
            "displayName": "基础配置",
            "hidden": true
          },
          "dashVideoExtension": {
            "defaultValue": ".mp4",
            "displayName": "DASH 视频扩展名"
          },
          "dashAudioExtension": {
            "defaultValue": ".m4a",
            "displayName": "DASH 普通音频扩展名"
          },
          "dashFlacAudioExtension": {
            "defaultValue": ".flac",
            "displayName": "DASH FLAC 音频扩展名"
          }
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5",
        "description": {}
      },
      "settings": {
        "enabled": true,
        "options": {
          "basicConfig": {
            "quality": 64,
            "api": "video.dash.hevc",
            "output": "aria2Rpc"
          },
          "danmakuType": "无",
          "subtitleType": "无",
          "rpcProfiles": [
            {
              "name": "motrix",
              "secretKey": "",
              "dir": "",
              "host": "127.0.0.1",
              "port": "16800",
              "method": "get",
              "other": ""
            }
          ],
          "selectedRpcProfileName": "motrix",
          "dashVideoExtension": ".mp4",
          "dashAudioExtension": ".m4a",
          "dashFlacAudioExtension": ".flac"
        }
      }
    },
    "downloadSubtitle": {
      "code": "!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports[\"video/subtitle/download\"]=e():t[\"video/subtitle/download\"]=e()}(globalThis,(()=>(()=>{var t,e,n={219:(t,e,n)=>{\"use strict\";n.d(e,{mE:()=>l});const o=coreApis.ajax;var i=n(391),r=n(674);const a=async()=>{const{SubtitleConverter:t,SubtitleSize:e,SubtitleLocation:o}=await Promise.resolve().then(n.bind(n,415)),{playerAgent:i}=await Promise.resolve().then(n.t.bind(n,833,23)),a=i.getPlayerConfig(\"subtitle\",null);if(!a)return[t.defaultConfig,\"\"];const s=a.lan,l=(0,r.getFriendlyTitle)(!0),c={.6:e.VerySmall,.8:e.Small,1:e.Medium,1.3:e.Large,1.6:e.VeryLarge}[a.fontsize],d=parseInt(a.color).toString(16),{opacity:u}=a,f={bc:o.BottomCenter,bl:o.BottomLeft,br:o.BottomRight,tc:o.TopCenter,tl:o.TopLeft,tr:o.TopRight,\"bottom-center\":o.BottomCenter,\"bottom-left\":o.BottomLeft,\"bottom-right\":o.BottomRight,\"top-center\":o.TopCenter,\"top-left\":o.TopLeft,\"top-right\":o.TopRight}[a.position],p=i.query.video.element.sync();return[{title:l,height:p.videoHeight,width:p.videoWidth,color:d,location:f,opacity:u,size:c,boxPadding:1,boxMargin:32},s]},s=async(t,e)=>{const n=await(0,o.bilibiliApi)((0,o.getJsonWithCredentials)(`https://api.bilibili.com/x/player/wbi/v2?aid=${t}&cid=${e}`));return lodash.get(n,\"subtitle.subtitles\",[])},l=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{...lodash.pick(unsafeWindow,\"aid\",\"cid\"),title:(0,r.getFriendlyTitle)(!0)};const{aid:l,cid:c}=e;if(!l||!c)throw new Error(\"未找到视频AID和CID\");const d=await s(l,c);if(0===d.length)return i.Toast.info(\"当前视频没有字幕.\",\"下载字幕\",3e3),null;const[u,f]=await a(),p=d.find((t=>t.lan===f))||d[0],m=await(0,o.getJson)(p.subtitle_url),g=m.body;if(\"ass\"===t){const{SubtitleConverter:t}=await Promise.resolve().then(n.bind(n,415)),o=new t({...u,title:e.title}),i=await o.convertToAss(g);return new Blob([i],{type:\"text/ass\"})}return new Blob([JSON.stringify(g,void 0,2)],{type:\"text/json\"})}},415:(t,e,n)=>{\"use strict\";function o(t,e,n){return(e=function(t){var e=function(t,e){if(\"object\"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||\"default\");if(\"object\"!=typeof o)return o;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(t)}(t,\"string\");return\"symbol\"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.r(e),n.d(e,{SubtitleConverter:()=>a,SubtitleLocation:()=>i,SubtitleSize:()=>r});const i={TopLeft:7,TopCenter:8,TopRight:9,BottomLeft:1,BottomCenter:2,BottomRight:3};let r=function(t){return t[t.VerySmall=1]=\"VerySmall\",t[t.Small=2]=\"Small\",t[t.Medium=3]=\"Medium\",t[t.Large=4]=\"Large\",t[t.VeryLarge=5]=\"VeryLarge\",t}({});class a{constructor(t){o(this,\"config\",void 0),this.config=Object.assign(a.defaultConfig,t)}async getAssMeta(){const{convertHexColorForStyle:t}=await Promise.resolve().then(n.t.bind(n,726,23)),e=t(this.config.color),o=t(\"#000000\",this.config.opacity),r=[],a=(10*(this.config.size-3)+48)*this.config.height/720;console.log(a);for(const[t,n]of Object.entries(i))r.push(`Style: ${t},微软雅黑,${a},${e},${e},${o},${o},0,0,0,0,100,100,0,0,3,${this.config.boxPadding},0,${n},${this.config.boxMargin},${this.config.boxMargin},${this.config.boxMargin},0`);return`\\n[Script Info]\\n; Script generated by Bilibili Evolved Danmaku Converter\\n; https://github.com/the1812/Bilibili-Evolved/\\nTitle: ${this.config.title}\\nScriptType: v4.00+\\nPlayResX: ${this.config.width}\\nPlayResY: ${this.config.height}\\nTimer: 10.0000\\nWrapStyle: 0\\nScaledBorderAndShadow: no\\n\\n[V4+ Styles]\\nFormat: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding\\n${r.join(\"\\n\")}\\n\\n[Events]\\nFormat: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text`.trim()}async convertToAss(t){const{convertTimeByEndTime:e,normalizeContent:o}=await Promise.resolve().then(n.t.bind(n,726,23));return`${await this.getAssMeta()}\\n${t.map((t=>{const[n,r]=e(t.from,t.to);var a;return`Dialogue: 0,${n},${r},${a=this.config.location,Object.entries(i).filter((t=>{let[,e]=t;return e===a})).map((t=>{let[e]=t;return e})).shift()},,0,0,0,,${o(t.content)}`})).join(\"\\n\")}`}}o(a,\"defaultConfig\",void 0),a.defaultConfig={title:\"\",color:\"#ffffff\",width:1920,height:1080,size:r.Medium,opacity:.5,location:i.BottomCenter,boxPadding:1,boxMargin:32}},424:(t,e,n)=>{var o=n(218)((function(t){return t[1]}));o.push([t.id,\".download-subtitle-config.download-video-config-section .be-dropdown {\\n  text-transform: uppercase;\\n}\",\"\"]),t.exports=o},218:t=>{\"use strict\";\n// eslint-disable-next-line func-names\nt.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?\"@media \".concat(e[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\ne.i=function(t,n,o){\"string\"==typeof t&&(\n// eslint-disable-next-line no-param-reassign\nt=[[null,t,\"\"]]);var i={};if(o)for(var r=0;r<this.length;r++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[r][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);o&&i[l[0]]||(n&&(l[2]?l[2]=\"\".concat(n,\" and \").concat(l[2]):l[2]=n),e.push(l))}},e}},332:(t,e,n)=>{\"use strict\";var o,i=function(){return void 0===o&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\no=Boolean(window&&document&&document.all&&!window.atob)),o},r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),a=[];function s(t){for(var e=-1,n=0;n<a.length;n++)if(a[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},o=[],i=0;i<t.length;i++){var r=t[i],l=e.base?r[0]+e.base:r[0],c=n[l]||0,d=\"\".concat(l,\" \").concat(c);n[l]=c+1;var u=s(d),f={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(a[u].references++,a[u].updater(f)):a.push({identifier:d,updater:v(f,e),references:1}),o.push(d)}return o}function c(t){var e=document.createElement(\"style\"),o=t.attributes||{};if(void 0===o.nonce){var i=n.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(t){e.setAttribute(t,o[t])})),\"function\"==typeof t.insert)t.insert(e);else{var a=r(t.insert||\"head\");if(!a)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");a.appendChild(e)}return e}var d,u=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join(\"\\n\")});function f(t,e,n,o){var i=n?\"\":o.media?\"@media \".concat(o.media,\" {\").concat(o.css,\"}\"):o.css;if(t.styleSheet)t.styleSheet.cssText=u(e,i);else{var r=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function p(t,e,n){var o=n.css,i=n.media,r=n.sourceMap;if(i?t.setAttribute(\"media\",i):t.removeAttribute(\"media\"),r&&\"undefined\"!=typeof btoa&&(o+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r)))),\" */\")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var m=null,g=0;function v(t,e){var n,o,i;if(e.singleton){var r=g++;n=m||(m=c(e)),o=f.bind(null,n,r,!1),i=f.bind(null,n,r,!0)}else n=c(e),o=p.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||\"boolean\"==typeof e.singleton||(e.singleton=i());var n=l(t=t||[],e);return function(t){if(t=t||[],\"[object Array]\"===Object.prototype.toString.call(t)){for(var o=0;o<n.length;o++){var i=s(n[o]);a[i].references--}for(var r=l(t,e),c=0;c<n.length;c++){var d=s(n[c]);0===a[d].references&&(a[d].updater(),a.splice(d,1))}n=r}}}},75:(t,e,n)=>{\"use strict\";n.r(e),n.d(e,{default:()=>u});var o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(\"div\",{staticClass:\"multiple-widgets\"},[e(\"DefaultWidget\",{attrs:{disabled:t.disabled,name:\"下载字幕 (JSON)\",icon:\"subtitle\"},on:{click:function(e){return t.download(\"json\")}}}),t._v(\" \"),e(\"DefaultWidget\",{attrs:{disabled:t.disabled,name:\"下载字幕 (ASS)\",icon:\"subtitle\"},on:{click:function(e){return t.download(\"ass\")}}})],1)};o._withStripped=!0;const i=coreApis.pluginApis.data;var r=n(648);const a=coreApis.utils.log;var s=n(674);const l=coreApis.download;var c=n(219);(0,i.addData)(\"ui.icons\",(t=>{t.subtitle='<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22 22\"><path d=\"M4 4h14a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V6a2 2 0 012-2zm5 5.5a1 1 0 100-2H6a2 2 0 00-2 2v3a2 2 0 002 2h3a1 1 0 000-2H7a1 1 0 01-1-1v-1a1 1 0 011-1h2zm8 0a1 1 0 000-2h-3a2 2 0 00-2 2v3a2 2 0 002 2h3a1 1 0 000-2h-2a1 1 0 01-1-1v-1a1 1 0 011-1h2z\" fill-rule=\"evenodd\"/></svg>'}));const d=Vue.extend({components:{DefaultWidget:r.DefaultWidget},data:()=>({disabled:!1}),methods:{async download(t){try{this.disabled=!0;const e=await(0,c.mE)(t);l.DownloadPackage.single(`${(0,s.getFriendlyTitle)(!0)}.${t}`,e)}catch(t){(0,a.logError)(t)}finally{this.disabled=!1}}}});const u=(0,n(893).Z)(d,o,[],!1,null,null,null).exports},229:(t,e,n)=>{\"use strict\";n.r(e),n.d(e,{default:()=>p});var o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(\"div\",{staticClass:\"download-subtitle-config download-video-config-section\"},[e(\"div\",{staticClass:\"download-video-config-item\"},[e(\"div\",{staticClass:\"download-video-config-title\"},[t._v(\"字幕:\")]),t._v(\" \"),e(\"VDropdown\",{attrs:{items:t.items},scopedSlots:t._u([{key:\"item\",fn:function({item:e}){return[t._v(\"\\n        \"+t._s(e)+\"\\n      \")]}}]),model:{value:t.type,callback:function(e){t.type=e},expression:\"type\"}})],1)])};o._withStripped=!0;const i=coreApis.settings;var r=n(648);const a=(0,i.getComponentSettings)(\"downloadVideo\").options,s=Vue.extend({components:{VDropdown:r.VDropdown},data:()=>({type:a.subtitleType??\"无\",items:[\"无\",\"ass\",\"json\"]}),computed:{enabled(){return\"无\"!==this.type}},watch:{type(t){a.subtitleType=t}}});var l=n(332),c=n.n(l),d=n(424),u=n.n(d),f={insert:\"head\",singleton:!1};c()(u(),f);u().locals;const p=(0,n(893).Z)(s,o,[],!1,null,null,null).exports},893:(t,e,n)=>{\"use strict\";function o(t,e,n,o,i,r,a,s){var l,c=\"function\"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),o&&(c.functional=!0),r&&(c._scopeId=\"data-v-\"+r),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):i&&(l=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}n.d(e,{Z:()=>o})},673:t=>{function e(t){var e=new Error(\"Cannot find module '\"+t+\"'\");throw e.code=\"MODULE_NOT_FOUND\",e}e.keys=()=>[],e.resolve=e,e.id=673,t.exports=e},132:t=>{\"use strict\";t.exports=\"启用下载字幕支持, 在视频页面中可从功能面板里下载字幕. (AI 生成的不可下载)\\n\"},726:t=>{\"use strict\";t.exports=coreApis.componentApis.video.assUtils},833:t=>{\"use strict\";t.exports=coreApis.componentApis.video.playerAgent},391:t=>{\"use strict\";t.exports=coreApis.toast},648:t=>{\"use strict\";t.exports=coreApis.ui},674:t=>{\"use strict\";t.exports=coreApis.utils.title}},o={};function i(t){var e=o[t];if(void 0!==e)return e.exports;var r=o[t]={id:t,exports:{}};return n[t](r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,i.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if(\"object\"==typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&\"function\"==typeof n.then)return n}var r=Object.create(null);i.r(r);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&o&&n;\"object\"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>n[t]));return a.default=()=>n,i.d(r,a),r},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})};var r={};return(()=>{\"use strict\";i.d(r,{component:()=>s});const t=coreApis.componentApis.define,e=coreApis.spinQuery;var n=i(391);const o=coreApis.utils.urls;var a=i(219);const s=(0,t.defineComponentMetadata)({name:\"downloadSubtitle\",displayName:\"下载字幕\",tags:[componentsTags.video],entry:none,urlInclude:o.videoAndBangumiUrls,widget:{condition:e.hasVideo,component:()=>Promise.resolve().then(i.bind(i,75)).then((t=>t.default))},plugin:{displayName:\"下载视频 - 下载字幕支持\",setup:t=>{let{addData:e}=t;e(\"downloadVideo.assets\",(async t=>{t.push({name:\"downloadSubtitles\",displayName:\"下载字幕\",getAssets:async(t,e)=>{const{type:o,enabled:i}=e;if(!i)return[];const r=n.Toast.info(\"获取字幕中...\",\"下载字幕\");let s=0;const l=await Promise.allSettled(t.map((async e=>{const n=await(0,a.mE)(o,e.input);return s++,r.message=`获取字幕中... (${s}/${t.length})`,{name:`${e.input.title}.${o}`,data:n}}))),c=l.filter((t=>\"fulfilled\"===t.status)),d=l.filter((t=>\"rejected\"===t.status));return r.message=`获取完成. 成功 ${c.length} 个, 失败 ${d.length} 个.`,c.map((t=>t.value))},component:()=>Promise.resolve().then(i.bind(i,229)).then((t=>t.default))})}))}},commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\",description:(()=>{const t=i(673);return{...Object.fromEntries(t.keys().map((e=>[e.match(/index\\.(.+)\\.md$/)[1],t(e)]))),\"zh-CN\":()=>Promise.resolve().then(i.t.bind(i,132,17)).then((t=>t.default))}})()})})(),r=r.component})()));",
      "metadata": {
        "name": "downloadSubtitle",
        "displayName": "下载字幕",
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5",
        "description": {}
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "downloadAudio": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"utils/download-audio\"]=t():e[\"utils/download-audio\"]=t()}(globalThis,(()=>(()=>{\"use strict\";var e,t,o={524:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"DefaultWidget\",{attrs:{disabled:e.disabled||e.downloading,name:e.progress||\"下载音频\",icon:\"mdi-download\"},on:{click:function(t){return e.download()}}})};n._withStripped=!0;const r=coreApis.spinQuery,i=coreApis.observer,s=coreApis.download,a=coreApis.ui;function d(e,t,o){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||\"default\");if(\"object\"!=typeof n)return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class l{constructor(){d(this,\"progress\",null),d(this,\"sid\",void 0)}async getDownloadUrl(){const{getJsonWithCredentials:e}=await Promise.resolve().then(o.t.bind(o,375,23)),{Toast:t}=await Promise.resolve().then(o.t.bind(o,391,23)),n=`https://www.bilibili.com/audio/music-service-c/web/url?sid=${this.sid}&privilege=2&quality=2`,r=await e(n);return 0!==r.code?(t.error(\"获取下载链接失败, 请确保当前账号有下载权限.\",\"下载音频\",1e4),null):r.data.cdns.shift()}async download(){const e=await this.getDownloadUrl();return new Promise(((t,o)=>{const n=new XMLHttpRequest;n.open(\"GET\",e),n.responseType=\"blob\",n.addEventListener(\"load\",(()=>t(n.response))),n.addEventListener(\"error\",(()=>o(n.status))),n.addEventListener(\"progress\",(e=>this.progress?.(100*e.loaded/e.total))),n.send()}))}}var c=function(e,t,o,n,r,i,s,a){var d,l=\"function\"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=o,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId=\"data-v-\"+i),s?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=d):r&&(d=a?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),d)if(l.functional){l._injectStyles=d;var c=l.render;l.render=function(e,t){return d.call(t),c(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return{exports:e,options:l}}(Vue.extend({components:{DefaultWidget:a.DefaultWidget},data:()=>({progress:\"\",disabled:!0,downloader:new l,downloading:!1}),async mounted(){const e=await(0,r.select)(\"#app\"),t=this.downloader;t.progress=e=>{this.progress=`${Math.round(e)}%`},(0,i.childList)(e,(()=>{const e=document.URL.match(/bilibili\\.com\\/audio\\/au([\\d]+)/);e&&e[1]?(this.disabled=!1,[,t.sid]=e):this.disabled=!0}))},methods:{async download(){if(!this.downloading){this.downloading=!0;try{const e=this.downloader;if(null===e.sid)return;const t=await e.download(),o=`${(()=>{const e=document.querySelector(\".song-title\");return e?e.getAttribute(\"title\"):\"神秘音频\"})()}.mp3`;this.progress=\"\",await s.DownloadPackage.single(o,t)}finally{this.downloading=!1}}}}}),n,[],!1,null,null,null);const u=c.exports},375:e=>{e.exports=coreApis.ajax},391:e=>{e.exports=coreApis.toast}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return o[e](i,i.exports,r),i.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(o,n){if(1&n&&(o=this(o)),8&n)return o;if(\"object\"==typeof o&&o){if(4&n&&o.__esModule)return o;if(16&n&&\"function\"==typeof o.then)return o}var i=Object.create(null);r.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&n&&o;\"object\"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>o[e]));return s.default=()=>o,r.d(i,s),i},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return(()=>{r.d(i,{component:()=>e});const e=(0,coreApis.componentApis.define.defineComponentMetadata)({name:\"downloadAudio\",displayName:\"下载音频\",entry:none,tags:[componentsTags.utils],description:{\"zh-CN\":\"\\n开启音频下载支持, 音频页面中可以在功能面板中下载当前音频.\\n\\n> 需要进入音频的详细信息页面才能下载, 在其他页面中此按钮将不可点击.\\n    \".trim()},widget:{component:()=>Promise.resolve().then(r.bind(r,524)).then((e=>e.default))},urlInclude:[\"//www.bilibili.com/audio/\"],commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),i=i.component})()));",
      "metadata": {
        "name": "downloadAudio",
        "displayName": "下载音频",
        "tags": [
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          }
        ],
        "description": {
          "zh-CN": "开启音频下载支持, 音频页面中可以在功能面板中下载当前音频.\n\n> 需要进入音频的详细信息页面才能下载, 在其他页面中此按钮将不可点击."
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "foldComments": {
      "code": "!function(e,n){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define([],n):\"object\"==typeof exports?exports[\"feeds/fold-comments\"]=n():e[\"feeds/fold-comments\"]=n()}(globalThis,(()=>(()=>{var e,n,t={357:(e,n,t)=>{var o=t(218)((function(e){return e[1]}));o.push([e.id,\":host(bili-comments) #end .bottombar {\\n  padding-bottom: 8px !important;\\n}\",\"\"]),e.exports=o},151:(e,n,t)=>{var o=t(218)((function(e){return e[1]}));o.push([e.id,\".bb-comment .fold-comment,\\n.bili-comment-container .fold-comment {\\n  position: sticky;\\n  bottom: 0;\\n  height: 40px;\\n  width: 100%;\\n  font-size: 14px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background-color: white;\\n  color: #99a2aa;\\n  cursor: pointer;\\n  transition: all 0.2s ease-out;\\n  z-index: 110;\\n  border-radius: 4px;\\n}\\n.bb-comment .fold-comment:hover,\\n.bili-comment-container .fold-comment:hover {\\n  color: black;\\n}\\nbody.dark .bb-comment .fold-comment,\\nbody.dark .bili-comment-container .fold-comment {\\n  background-color: #444;\\n  color: #eee;\\n}\\nbody.dark .bb-comment .fold-comment:hover,\\nbody.dark .bili-comment-container .fold-comment:hover {\\n  color: var(--theme-color);\\n}\\n\\n.bili-comment-container {\\n  display: flex !important;\\n  flex-direction: column !important;\\n}\\n.bili-comment-container.bili-dyn-comment .reply-list {\\n  padding-bottom: 8px !important;\\n}\\n.bili-comment-container .fold-comment {\\n  order: 1;\\n  font-size: 13px;\\n}\\n.bili-comment-container .at-panel,\\n.bili-comment-container .emoji-panel,\\n.bili-comment-container .reply-box .box-expand,\\n.bili-comment-container .reply-operation .operation-list {\\n  z-index: 111 !important;\\n}\",\"\"]),e.exports=o},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t=e(n);return n[2]?\"@media \".concat(n[2],\" {\").concat(t,\"}\"):t})).join(\"\")},\n// eslint-disable-next-line func-names\nn.i=function(e,t,o){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var r={};if(o)for(var i=0;i<this.length;i++){\n// eslint-disable-next-line prefer-destructuring\nvar c=this[i][0];null!=c&&(r[c]=!0)}for(var a=0;a<e.length;a++){var s=[].concat(e[a]);o&&r[s[0]]||(t&&(s[2]?s[2]=\"\".concat(t,\" and \").concat(s[2]):s[2]=t),n.push(s))}},n}},487:(e,n,t)=>{var o=t(357);o&&o.__esModule&&(o=o.default),e.exports=\"string\"==typeof o?o:o.toString()},389:(e,n,t)=>{var o=t(151);o&&o.__esModule&&(o=o.default),e.exports=\"string\"==typeof o?o:o.toString()},799:e=>{\"use strict\";e.exports=coreApis.componentApis.feeds.api},391:e=>{\"use strict\";e.exports=coreApis.observer},137:e=>{\"use strict\";e.exports=coreApis.shadowRoot}},o={};function r(e){var n=o[e];if(void 0!==n)return n.exports;var i=o[e]={id:e,exports:{}};return t[e](i,i.exports,r),i.exports}n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(t,o){if(1&o&&(t=this(t)),8&o)return t;if(\"object\"==typeof t&&t){if(4&o&&t.__esModule)return t;if(16&o&&\"function\"==typeof t.then)return t}var i=Object.create(null);r.r(i);var c={};e=e||[null,n({}),n([]),n(n)];for(var a=2&o&&t;\"object\"==typeof a&&!~e.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((e=>c[e]=()=>t[e]));return c.default=()=>t,r.d(i,c),i},r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return(()=>{\"use strict\";r.d(i,{component:()=>s});const e=coreApis.componentApis.define,n=coreApis.componentApis.styledComponent,t=coreApis.utils.urls;var o=r(799);const c=coreApis.spinQuery;var a=r(391);const s=(0,e.defineComponentMetadata)({name:\"foldComments\",displayName:\"快速收起评论\",description:{\"zh-CN\":\"动态里查看评论区时, 在底部添加一个`收起评论`按钮, 这样就不用再回到上面收起了.\"},urlInclude:t.feedsUrlsWithoutDetail,tags:[componentsTags.feeds],entry:(0,n.styledComponentEntry)((()=>Promise.resolve().then(r.t.bind(r,389,23))),(async()=>{const{shadowRootStyles:e}=await Promise.resolve().then(r.t.bind(r,137,23)),{forEachFeedsCard:n}=await Promise.resolve().then(r.t.bind(r,799,23)),{childList:t}=await Promise.resolve().then(r.t.bind(r,391,23)),i=\".bb-comment, .bili-comment-container\";n({added:e=>(e=>{const n=async(n,t)=>{const o=await(0,c.select)((()=>dq(n,i)));if(null!==o.querySelector(\".fold-comment\"))return;if(null===o)return void console.error(\"未找到评论区\");const r=document.createElement(\"div\");r.classList.add(\"fold-comment\"),r.innerHTML=\"收起评论\",r.addEventListener(\"click\",(()=>{t(),e.scrollIntoView(),window.scrollBy({top:-75})})),o.insertAdjacentElement(\"beforeend\",r)};if(\"v2\"!==o.feedsCardsManager.managerType)if(\"v1\"!==o.feedsCardsManager.managerType)console.warn(\"unrecognized card type\",e);else{const o=e.querySelector(\".panel-area\");if(null===o)return void console.warn(\"panelArea not found\",e);const r=()=>{e.querySelector(\".button-bar\").children[1]?.click()};if(0===o.childElementCount){const[e]=t(o,(t=>{t.length>0&&(n(o,r),e.disconnect())}))}else n(o,r)}else{const t=()=>dq(e,i),o=()=>null!==t(),r=()=>{dq(e,\".bili-dyn-action.comment\")?.click()};o()?n(t(),r):(0,a.childListSubtree)(e,(()=>{o()&&n(e,r)}))}})(e.element)});const s=await Promise.resolve().then(r.t.bind(r,487,23)).then((e=>e.default));e.addStyle({id:\"foldComments\",style:s})})),commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),i=i.component})()));",
      "metadata": {
        "name": "foldComments",
        "displayName": "快速收起评论",
        "description": {
          "zh-CN": "动态里查看评论区时, 在底部添加一个`收起评论`按钮, 这样就不用再回到上面收起了."
        },
        "tags": [
          {
            "name": "feeds",
            "displayName": "动态",
            "color": "#00ACC1",
            "icon": "mdi-pinwheel-outline",
            "order": 3
          }
        ],
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "unfoldFeeds": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"feeds/unfold\"]=t():e[\"feeds/unfold\"]=t()}(globalThis,(()=>(()=>{\"use strict\";var e,t,o={799:e=>{e.exports=coreApis.componentApis.feeds.api}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return o[e](i,i.exports,r),i.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(o,n){if(1&n&&(o=this(o)),8&n)return o;if(\"object\"==typeof o&&o){if(4&n&&o.__esModule)return o;if(16&n&&\"function\"==typeof o.then)return o}var i=Object.create(null);r.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var c=2&n&&o;\"object\"==typeof c&&!~e.indexOf(c);c=t(c))Object.getOwnPropertyNames(c).forEach((e=>s[e]=()=>o[e]));return s.default=()=>o,r.d(i,s),i},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return(()=>{r.d(i,{component:()=>n});const e=coreApis.componentApis.define,t=coreApis.spinQuery,o=coreApis.utils.urls,n=(0,e.defineComponentMetadata)({name:\"unfoldFeeds\",displayName:\"动态反折叠\",tags:[componentsTags.feeds],description:{\"zh-CN\":\"\\n自动展开被折叠的动态.\\n\\n动态被折叠可能是因为:\\n- 短时间内大量更新作品\\n- 多人转发同一个作品\\n- 被审核折叠\\n\"},urlInclude:o.feedsUrlsWithoutDetail,entry:async()=>{const{forEachFeedsCard:e}=await Promise.resolve().then(r.t.bind(r,799,23));e({added:async e=>{(await(0,t.select)((()=>dq(e.element,\".fold-hoverable, .bili-dyn-item-fold\"))))?.click()}})},commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),i=i.component})()));",
      "metadata": {
        "name": "unfoldFeeds",
        "displayName": "动态反折叠",
        "tags": [
          {
            "name": "feeds",
            "displayName": "动态",
            "color": "#00ACC1",
            "icon": "mdi-pinwheel-outline",
            "order": 3
          }
        ],
        "description": {
          "zh-CN": "\n自动展开被折叠的动态.\n\n动态被折叠可能是因为:\n- 短时间内大量更新作品\n- 多人转发同一个作品\n- 被审核折叠\n"
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "liveAutoDraw": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"live/auto-draw\"]=t():e[\"live/auto-draw\"]=t()}(self,(function(){return function(){\"use strict\";var e,t,n={156:function(e){e.exports=coreApis.observer},569:function(e){e.exports=coreApis.spinQuery}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var c=o[e]={exports:{}};return n[e](c,c.exports,r),c.exports}t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if(\"object\"==typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&\"function\"==typeof n.then)return n}var c=Object.create(null);r.r(c);var i={};e=e||[null,t({}),t([]),t(t)];for(var u=2&o&&n;\"object\"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){i[e]=function(){return n[e]}}));return i.default=function(){return n},r.d(c,i),c},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var c={};return function(){r.d(c,{component:function(){return t}});var e=coreApis.utils.urls;const t={name:\"liveAutoDraw\",displayName:\"直播间自动抽奖\",description:{\"zh-CN\":\"在当前直播间有抽奖活动时, 自动点击抽奖按钮. 注意只适用于少量抽奖, 那种99+限量抽奖可能跟不上其他人的手速(\"},tags:[componentsTags.live],entry:async()=>{const{sq:e}=await Promise.resolve().then(r.t.bind(r,569,23)),{childListSubtree:t,attributes:n}=await Promise.resolve().then(r.t.bind(r,156,23)),o=await e((()=>dq(\".chat-popups-section\")),(e=>null!==e&&null===e.querySelector(\"chat-draw-area\")));o?t(o,(()=>{console.log(\"draw button = \",dq(\".chat-popups-section .draw>span:nth-child(3)\"));const e=dq(\".chat-popups-section .draw>span:nth-child(3)\");if(null===e){const e=dq(\".chat-popups-section .function-bar>span:nth-child(3)\");if(null!==e){const[t]=n(e,(()=>{\"none\"!==e.style.display&&(t.disconnect(),e.click())}))}}null!==e&&e.click()})):console.warn(\"[自动领奖] 未能找到弹窗容器\")},urlInclude:e.liveUrls,commitHash:\"9c9c5fd27250d3d9c2e74eb367ebb825cba14ab1\",coreVersion:\"2.1.9\"}}(),c=c.component}()}));",
      "metadata": {
        "name": "liveAutoDraw",
        "displayName": "直播间自动抽奖",
        "description": {
          "zh-CN": "在当前直播间有抽奖活动时, 自动点击抽奖按钮. 注意只适用于少量抽奖, 那种99+限量抽奖可能跟不上其他人的手速("
        },
        "tags": [
          {
            "name": "live",
            "displayName": "直播",
            "color": "#26A69A",
            "icon": "mdi-video-wireless-outline",
            "order": 4
          }
        ],
        "commitHash": "9c9c5fd27250d3d9c2e74eb367ebb825cba14ab1",
        "coreVersion": "2.1.9"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "disableFeedsDetails": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"feeds/disable-details\"]=t():e[\"feeds/disable-details\"]=t()}(globalThis,(()=>(()=>{var e,t,n={423:(e,t,n)=>{var o=n(218)((function(e){return e[1]}));o.push([e.id,\"[data-module=desc][data-orig],\\n.card[data-did] .content {\\n  cursor: text;\\n}\\n[data-module=desc][data-orig] .details,\\n.card[data-did] .content .details {\\n  color: #222;\\n  font-size: 12px;\\n  opacity: 0.6;\\n  cursor: pointer;\\n  display: block;\\n  line-height: 22px;\\n}\\nbody.dark [data-module=desc][data-orig] .details,\\nbody.dark .card[data-did] .content .details {\\n  color: #eee;\\n}\\n\\n.bili-rich-text-module.at {\\n  cursor: pointer;\\n}\\n\\n.dyn-card-opus__summary {\\n  cursor: text;\\n}\",\"\"]),e.exports=o},370:(e,t,n)=>{var o=n(218)((function(e){return e[1]}));o.push([e.id,\".card[data-did] .content .details {\\n  display: none;\\n}\",\"\"]),e.exports=o},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,n,o){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var i={};if(o)for(var r=0;r<this.length;r++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[r][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var d=[].concat(e[s]);o&&i[d[0]]||(n&&(d[2]?d[2]=\"\".concat(n,\" and \").concat(d[2]):d[2]=n),t.push(d))}},t}},907:(e,t,n)=>{var o=n(423);o&&o.__esModule&&(o=o.default),e.exports=\"string\"==typeof o?o:o.toString()},329:(e,t,n)=>{var o=n(370);o&&o.__esModule&&(o=o.default),e.exports=\"string\"==typeof o?o:o.toString()},799:e=>{\"use strict\";e.exports=coreApis.componentApis.feeds.api},356:e=>{\"use strict\";e.exports=coreApis.style}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={id:e,exports:{}};return n[e](r,r.exports,i),r.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if(\"object\"==typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&\"function\"==typeof n.then)return n}var r=Object.create(null);i.r(r);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&n;\"object\"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>n[e]));return a.default=()=>n,i.d(r,a),r},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var r={};return(()=>{\"use strict\";i.d(r,{component:()=>d});const e=coreApis.componentApis.define;var t=i(799);const n=coreApis.utils.urls;let o=!0;const a=\"disable-feeds-details-style\",s=async()=>{const{addImportantStyle:e}=await Promise.resolve().then(i.t.bind(i,356,23)),{default:t}=await Promise.resolve().then(i.t.bind(i,907,23));e(t,a)},d=(0,e.defineComponentMetadata)({name:\"disableFeedsDetails\",displayName:\"禁止跳转动态详情\",tags:[componentsTags.feeds],urlInclude:n.feedsUrls,description:{\"zh-CN\":\"禁止动态点击后跳转详情页, 方便选择其中的文字.\"},entry:async()=>{const{addImportantStyle:e}=await Promise.resolve().then(i.t.bind(i,356,23)),{forEachFeedsCard:n}=await Promise.resolve().then(i.t.bind(i,799,23)),{default:r}=await Promise.resolve().then(i.t.bind(i,329,23));e(r,\"disable-feeds-details-init-style\"),s();n({added:e=>{const{element:n}=e;n.addEventListener(\"click\",(e=>{if(e.ctrlKey||!o)return;const t=dqa(n,'.content, .bili-dyn-content [data-module=\"desc\"] .bili-rich-text, .dyn-card-opus__summary'),i=e.target;if(i.hasAttribute(\"click-title\"))return;if(i.hasAttribute(\"data-pics\"))return;if([\"bili-rich-text__action\",\"bili-rich-text-topic\",\"bili-rich-text-module\",\"bili-rich-text-link\",\"bili-rich-text-viewpic\"].some((e=>i.classList.contains(e))))return;dqa(n,\".im-popup\").some((e=>e.contains(i)))||t.some((e=>e===i||e.contains(i)))&&e.stopImmediatePropagation()}),{capture:!0});const i=dq(n,\".post-content, .bili-dyn-content\");if(!i)return;if(![\".video-container\",\".bangumi-container\",\".media-list\",\".article-container\"].some((e=>dq(i,e)))&&!dq(i,\".details\")&&(i.classList.contains(\"repost\")||e.type===t.feedsCardTypes.repost)){const e=dq(i,\".content, .bili-dyn-content__orig__desc, .dyn-card-opus__summary\");if(!e)return;const t=document.createElement(\"div\");t.classList.add(\"details\"),t.setAttribute(\"click-title\",\"详情\"),t.innerHTML='\\n        详情<i class=\"mdi mdi-chevron-right\" click-title></i>\\n      ',e.insertAdjacentElement(\"beforeend\",t)}}})},unload:()=>{document.getElementById(a)?.remove(),o=!1},reload:()=>{s(),o=!0},commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),r=r.component})()));",
      "metadata": {
        "name": "disableFeedsDetails",
        "displayName": "禁止跳转动态详情",
        "tags": [
          {
            "name": "feeds",
            "displayName": "动态",
            "color": "#00ACC1",
            "icon": "mdi-pinwheel-outline",
            "order": 3
          }
        ],
        "description": {
          "zh-CN": "禁止动态点击后跳转详情页, 方便选择其中的文字."
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "badgeHelper": {
      "code": "!function(e,n){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define([],n):\"object\"==typeof exports?exports[\"live/badge-helper\"]=n():e[\"live/badge-helper\"]=n()}(globalThis,(()=>(()=>{var e,n,t={464:(e,n,t)=>{\"use strict\";t.d(n,{j9:()=>p,Dx:()=>s,KK:()=>c,eB:()=>u});const l=coreApis.ajax;var o=t(605);const a=coreApis.utils.log;function i(e,n,t){return(n=function(e){var n=function(e,n){if(\"object\"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var l=t.call(e,n||\"default\");if(\"object\"!=typeof l)return l;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===n?String:Number)(e)}(e,\"string\");return\"symbol\"==typeof n?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const r=(e,n)=>{if(0!==e.code){const t=`${n} 错误码:${e.code} ${e.message||\"\"}`;return(0,a.logError)(t),!1}return!0};class d{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isActive=e,this.id=n}}class p extends d{constructor(e){const{medal:{medal_id:n,level:t,medal_name:l,wearing_status:o,is_lighted:a},anchor_info:{nick_name:r},room_info:{room_id:d}}=e;super(1===o,n),i(this,\"level\",void 0),i(this,\"name\",void 0),i(this,\"upName\",void 0),i(this,\"roomID\",void 0),i(this,\"isLighted\",void 0),this.level=t,this.name=l,this.upName=r,this.roomID=d,this.isLighted=a}async activate(){const e=await(0,l.postTextWithCredentials)(\"https://api.live.bilibili.com/xlive/web-room/v1/fansMedal/wear\",new URLSearchParams({medal_id:this.id.toString(),csrf_token:(0,o.getCsrf)(),csrf:(0,o.getCsrf)()})),n=r(JSON.parse(e),\"佩戴勋章失败.\");return this.isActive=!0,n}async deactivate(){const e=await(0,l.postTextWithCredentials)(\"https://api.live.bilibili.com/xlive/web-room/v1/fansMedal/take_off\",new URLSearchParams({csrf_token:(0,o.getCsrf)(),csrf:(0,o.getCsrf)()})),n=r(JSON.parse(e),\"卸下勋章失败.\");return this.isActive=!1,n}}const c=async()=>(await(0,l.getPages)({api:e=>(0,l.getJsonWithCredentials)(`https://api.live.bilibili.com/xlive/app-ucenter/v1/fansMedal/panel?page=${e}&page_size=50`),getList:e=>(r(e,\"无法获取勋章列表.\"),[...lodash.get(e,\"data.list\",[]),...lodash.get(e,\"data.special_list\",[])]),getTotal:e=>lodash.get(e,\"data.total_number\",0)})).map((e=>new p(e)));class s extends d{constructor(e){const{identification:n,wear:t,tid:l,cid:o,name:a,source:r}=e;super(t,n),i(this,\"tid\",void 0),i(this,\"cid\",void 0),i(this,\"name\",void 0),i(this,\"source\",void 0),i(this,\"imageUrl\",void 0),this.tid=l,this.cid=o,this.name=a,this.source=r,s.getImageMap().then((e=>{this.imageUrl=e[this.id]}))}static async getImageMap(){if(void 0===s.imageMap){const e=JSON.parse(await(0,l.getTextWithCredentials)(\"https://api.live.bilibili.com/rc/v1/Title/webTitles\"));return r(e,\"获取头衔图片失败.\")?(s.imageMap={},e.data.forEach((e=>{s.imageMap[e.identification]=e.web_pic_url})),s.imageMap):{}}return s.imageMap}async activate(){const e=JSON.parse(await(0,l.postTextWithCredentials)(\"https://api.live.bilibili.com/i/ajaxWearTitle\",`id=${this.tid}&cid=${this.cid}&csrf=${(0,o.getCsrf)()}&csrf_token=${(0,o.getCsrf)()}`));return!!r(e,\"佩戴头衔失败.\")&&(this.isActive=!0,!0)}async deactivate(){const e=JSON.parse(await(0,l.postTextWithCredentials)(\"https://api.live.bilibili.com/i/ajaxCancelWearTitle\",`csrf=${(0,o.getCsrf)()}&csrf_token=${(0,o.getCsrf)()}`));return!!r(e,\"卸下头衔失败.\")&&(this.isActive=!1,!0)}}i(s,\"imageMap\",void 0);const u=async()=>{const e=JSON.parse(await(0,l.getTextWithCredentials)(\"https://api.live.bilibili.com/xlive/web-ucenter/v1/user_title/TitleList?normal=0&special=0&had=1&page=1&page_size=256\"));return r(e,\"无法获取头衔列表.\")?lodash.get(e,\"data.list\",[]).map((e=>new s(e))):[]}},525:(e,n,t)=>{var l=t(218)((function(e){return e[1]}));l.push([e.id,\".badge-popup {\\n  top: 50%;\\n  left: calc(100% + 8px);\\n  transform: scale(0.9) translateY(-50%);\\n  transform-origin: left;\\n  padding: 4px;\\n  max-height: calc(100vh - 150px);\\n  background-color: #fff;\\n  color: black;\\n  border-radius: 8px;\\n  border: 1px solid rgba(136, 136, 136, 0.1333333333);\\n  box-sizing: border-box;\\n  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.05);\\n  overflow: auto;\\n  scrollbar-width: none !important;\\n  overscroll-behavior: contain;\\n  border-radius: 4px;\\n}\\nbody.dark .badge-popup {\\n  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.2);\\n}\\nbody.dark .badge-popup {\\n  background-color: #282828;\\n  color: #eee;\\n}\\n.badge-popup::-webkit-scrollbar {\\n  height: 0 !important;\\n  width: 0 !important;\\n}\\n.badge-popup.open {\\n  transform: scale(1) translateY(-50%);\\n}\\nbody.settings-panel-dock-right .badge-popup {\\n  right: calc(100% + 8px);\\n  left: unset;\\n  transform-origin: right;\\n}\\n.badge-popup, .badge-popup * {\\n  transition: 0.2s ease-out;\\n}\\n.badge-popup ul {\\n  list-style: none;\\n  margin: 0;\\n  padding: 0;\\n  display: grid;\\n  grid-template-columns: repeat(2, 1fr);\\n}\\n.badge-popup ul li {\\n  border-radius: 4px;\\n  cursor: pointer;\\n  padding: 6px 8px;\\n  display: flex;\\n  justify-content: center;\\n}\\n.badge-popup ul li:hover {\\n  background-color: rgba(136, 136, 136, 0.1333333333);\\n}\\n.badge-popup ul li.active {\\n  box-shadow: 0 0 0px 1px var(--theme-color), 0 0 0px 3px var(--theme-color-20);\\n}\\n.badge-popup ul li.gray:not(:hover) {\\n  filter: grayscale(1);\\n}\\n.badge-popup ul li .title-image {\\n  display: inline-block;\\n  vertical-align: middle;\\n  height: 20px;\\n}\\n.badge-popup ul li .fans-medal-item {\\n  display: flex !important;\\n  height: 14px;\\n  line-height: 14px;\\n  color: #fff;\\n  border: 1px solid #f6be18;\\n  background-color: #f6be18;\\n  border-left: 0;\\n  white-space: nowrap;\\n  border-radius: 2px;\\n  flex-shrink: 0;\\n  font-size: 12px;\\n}\\n.badge-popup ul li .fans-medal-item .label {\\n  width: 40px;\\n  text-align: center;\\n  padding: 0 2px;\\n  color: #fff;\\n  border-radius: 1px 0 0 1px;\\n  background-color: #f6be18;\\n}\\n.badge-popup ul li .fans-medal-item .level {\\n  width: 16px;\\n  background-color: #fff;\\n  text-align: center;\\n  color: #f6be18;\\n  border-radius: 0 1px 1px 0;\\n}\\n.badge-popup ul li .fans-medal-item .label,\\n.badge-popup ul li .fans-medal-item .level {\\n  cursor: pointer;\\n  position: relative;\\n  display: block;\\n  float: left;\\n}\\n.badge-popup ul li .level-1 {\\n  border-color: #48b6a5;\\n  background-color: #48b6a5;\\n}\\n.badge-popup ul li .level-1 .label {\\n  background-color: #48b6a5;\\n}\\n.badge-popup ul li .level-1 .level {\\n  color: #48b6a5;\\n}\\n.badge-popup ul li .level-2 {\\n  border-color: #48b6a5;\\n  background-color: #48b6a5;\\n}\\n.badge-popup ul li .level-2 .label {\\n  background-color: #48b6a5;\\n}\\n.badge-popup ul li .level-2 .level {\\n  color: #48b6a5;\\n}\\n.badge-popup ul li .level-3 {\\n  border-color: #48b6a5;\\n  background-color: #48b6a5;\\n}\\n.badge-popup ul li .level-3 .label {\\n  background-color: #48b6a5;\\n}\\n.badge-popup ul li .level-3 .level {\\n  color: #48b6a5;\\n}\\n.badge-popup ul li .level-4 {\\n  border-color: #48b6a5;\\n  background-color: #48b6a5;\\n}\\n.badge-popup ul li .level-4 .label {\\n  background-color: #48b6a5;\\n}\\n.badge-popup ul li .level-4 .level {\\n  color: #48b6a5;\\n}\\n.badge-popup ul li .level-5 {\\n  border-color: #5896de;\\n  background-color: #5896de;\\n}\\n.badge-popup ul li .level-5 .label {\\n  background-color: #5896de;\\n}\\n.badge-popup ul li .level-5 .level {\\n  color: #5896de;\\n}\\n.badge-popup ul li .level-6 {\\n  border-color: #5896de;\\n  background-color: #5896de;\\n}\\n.badge-popup ul li .level-6 .label {\\n  background-color: #5896de;\\n}\\n.badge-popup ul li .level-6 .level {\\n  color: #5896de;\\n}\\n.badge-popup ul li .level-7 {\\n  border-color: #5896de;\\n  background-color: #5896de;\\n}\\n.badge-popup ul li .level-7 .label {\\n  background-color: #5896de;\\n}\\n.badge-popup ul li .level-7 .level {\\n  color: #5896de;\\n}\\n.badge-popup ul li .level-8 {\\n  border-color: #5896de;\\n  background-color: #5896de;\\n}\\n.badge-popup ul li .level-8 .label {\\n  background-color: #5896de;\\n}\\n.badge-popup ul li .level-8 .level {\\n  color: #5896de;\\n}\\n.badge-popup ul li .level-9 {\\n  border-color: #a068f1;\\n  background-color: #a068f1;\\n}\\n.badge-popup ul li .level-9 .label {\\n  background-color: #a068f1;\\n}\\n.badge-popup ul li .level-9 .level {\\n  color: #a068f1;\\n}\\n.badge-popup ul li .level-10 {\\n  border-color: #a068f1;\\n  background-color: #a068f1;\\n}\\n.badge-popup ul li .level-10 .label {\\n  background-color: #a068f1;\\n}\\n.badge-popup ul li .level-10 .level {\\n  color: #a068f1;\\n}\\n.badge-popup ul li .level-11 {\\n  border-color: #a068f1;\\n  background-color: #a068f1;\\n}\\n.badge-popup ul li .level-11 .label {\\n  background-color: #a068f1;\\n}\\n.badge-popup ul li .level-11 .level {\\n  color: #a068f1;\\n}\\n.badge-popup ul li .level-12 {\\n  border-color: #a068f1;\\n  background-color: #a068f1;\\n}\\n.badge-popup ul li .level-12 .label {\\n  background-color: #a068f1;\\n}\\n.badge-popup ul li .level-12 .level {\\n  color: #a068f1;\\n}\\n.badge-popup ul li .level-13 {\\n  border-color: #ff86b2;\\n  background-color: #ff86b2;\\n}\\n.badge-popup ul li .level-13 .label {\\n  background-color: #ff86b2;\\n}\\n.badge-popup ul li .level-13 .level {\\n  color: #ff86b2;\\n}\\n.badge-popup ul li .level-14 {\\n  border-color: #ff86b2;\\n  background-color: #ff86b2;\\n}\\n.badge-popup ul li .level-14 .label {\\n  background-color: #ff86b2;\\n}\\n.badge-popup ul li .level-14 .level {\\n  color: #ff86b2;\\n}\\n.badge-popup ul li .level-15 {\\n  border-color: #ff86b2;\\n  background-color: #ff86b2;\\n}\\n.badge-popup ul li .level-15 .label {\\n  background-color: #ff86b2;\\n}\\n.badge-popup ul li .level-15 .level {\\n  color: #ff86b2;\\n}\\n.badge-popup ul li .level-16 {\\n  border-color: #ff86b2;\\n  background-color: #ff86b2;\\n}\\n.badge-popup ul li .level-16 .label {\\n  background-color: #ff86b2;\\n}\\n.badge-popup ul li .level-16 .level {\\n  color: #ff86b2;\\n}\\n.badge-popup ul li .level-17 {\\n  border-color: #f6be18;\\n  background-color: #f6be18;\\n}\\n.badge-popup ul li .level-17 .label {\\n  background-color: #f6be18;\\n}\\n.badge-popup ul li .level-17 .level {\\n  color: #f6be18;\\n}\\n.badge-popup ul li .level-18 {\\n  border-color: #f6be18;\\n  background-color: #f6be18;\\n}\\n.badge-popup ul li .level-18 .label {\\n  background-color: #f6be18;\\n}\\n.badge-popup ul li .level-18 .level {\\n  color: #f6be18;\\n}\\n.badge-popup ul li .level-19 {\\n  border-color: #f6be18;\\n  background-color: #f6be18;\\n}\\n.badge-popup ul li .level-19 .label {\\n  background-color: #f6be18;\\n}\\n.badge-popup ul li .level-19 .level {\\n  color: #f6be18;\\n}\\n.badge-popup ul li .level-20 {\\n  border-color: #f6be18;\\n  background-color: #f6be18;\\n}\\n.badge-popup ul li .level-20 .label {\\n  background-color: #f6be18;\\n}\\n.badge-popup ul li .level-20 .level {\\n  color: #f6be18;\\n}\\n.badge-popup.medal ul {\\n  grid-template-columns: repeat(var(--medal-columns, 2), 1fr);\\n}\\n.badge-popup.title ul {\\n  grid-template-columns: repeat(var(--title-columns, 2), 1fr);\\n}\",\"\"]),e.exports=l},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t=e(n);return n[2]?\"@media \".concat(n[2],\" {\").concat(t,\"}\"):t})).join(\"\")},\n// eslint-disable-next-line func-names\nn.i=function(e,t,l){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var o={};if(l)for(var a=0;a<this.length;a++){\n// eslint-disable-next-line prefer-destructuring\nvar i=this[a][0];null!=i&&(o[i]=!0)}for(var r=0;r<e.length;r++){var d=[].concat(e[r]);l&&o[d[0]]||(t&&(d[2]?d[2]=\"\".concat(t,\" and \").concat(d[2]):d[2]=t),n.push(d))}},n}},332:(e,n,t)=>{\"use strict\";var l,o=function(){return void 0===l&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\nl=Boolean(window&&document&&document.all&&!window.atob)),l},a=function(){var e={};return function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}e[n]=t}return e[n]}}(),i=[];function r(e){for(var n=-1,t=0;t<i.length;t++)if(i[t].identifier===e){n=t;break}return n}function d(e,n){for(var t={},l=[],o=0;o<e.length;o++){var a=e[o],d=n.base?a[0]+n.base:a[0],p=t[d]||0,c=\"\".concat(d,\" \").concat(p);t[d]=p+1;var s=r(c),u={css:a[1],media:a[2],sourceMap:a[3]};-1!==s?(i[s].references++,i[s].updater(u)):i.push({identifier:c,updater:v(u,n),references:1}),l.push(c)}return l}function p(e){var n=document.createElement(\"style\"),l=e.attributes||{};if(void 0===l.nonce){var o=t.nc;o&&(l.nonce=o)}if(Object.keys(l).forEach((function(e){n.setAttribute(e,l[e])})),\"function\"==typeof e.insert)e.insert(n);else{var i=a(e.insert||\"head\");if(!i)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");i.appendChild(n)}return n}var c,s=(c=[],function(e,n){return c[e]=n,c.filter(Boolean).join(\"\\n\")});function u(e,n,t,l){var o=t?\"\":l.media?\"@media \".concat(l.media,\" {\").concat(l.css,\"}\"):l.css;if(e.styleSheet)e.styleSheet.cssText=s(n,o);else{var a=document.createTextNode(o),i=e.childNodes;i[n]&&e.removeChild(i[n]),i.length?e.insertBefore(a,i[n]):e.appendChild(a)}}function b(e,n,t){var l=t.css,o=t.media,a=t.sourceMap;if(o?e.setAttribute(\"media\",o):e.removeAttribute(\"media\"),a&&\"undefined\"!=typeof btoa&&(l+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a)))),\" */\")),e.styleSheet)e.styleSheet.cssText=l;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(l))}}var f=null,g=0;function v(e,n){var t,l,o;if(n.singleton){var a=g++;t=f||(f=p(n)),l=u.bind(null,t,a,!1),o=u.bind(null,t,a,!0)}else t=p(n),l=b.bind(null,t,n),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)};return l(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;l(e=n)}else o()}}e.exports=function(e,n){(n=n||{}).singleton||\"boolean\"==typeof n.singleton||(n.singleton=o());var t=d(e=e||[],n);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var l=0;l<t.length;l++){var o=r(t[l]);i[o].references--}for(var a=d(e,n),p=0;p<t.length;p++){var c=r(t[p]);0===i[c].references&&(i[c].updater(),i.splice(c,1))}t=a}}}},405:(e,n,t)=>{\"use strict\";t.r(n),t.d(n,{default:()=>m});var l=function(){var e=this,n=e._self._c,t=e._self._setupProxy;return n(\"div\",{ref:\"element\",staticClass:\"multiple-widgets\"},[n(t.VPopup,{ref:\"medalPopup\",staticClass:\"badge-popup widgets-popup medal\",attrs:{\"trigger-element\":e.$refs.medalButton},model:{value:t.medalOpen,callback:function(e){t.medalOpen=e},expression:\"medalOpen\"}},[n(\"ul\",e._l(t.medalList,(function(l){return n(\"li\",{key:l.id,class:{active:l.isActive,gray:t.grayEffect&&!l.isLighted},attrs:{\"data-id\":l.id,title:l.upName},on:{click:function(e){return t.toggleBadge(l,t.medalList)}}},[n(\"div\",{staticClass:\"fans-medal-item\",class:[\"level-\"+l.level]},[n(\"span\",{staticClass:\"label\"},[e._v(e._s(l.name))]),e._v(\" \"),n(\"span\",{staticClass:\"level\"},[e._v(e._s(l.level))])])])})),0)]),e._v(\" \"),n(t.DefaultWidget,{ref:\"medalButton\",attrs:{icon:\"mdi-medal\"},on:{click:function(e){t.medalOpen=!t.medalOpen}}},[n(\"span\",[e._v(\"更换勋章\")])]),e._v(\" \"),n(t.VPopup,{ref:\"titlePopup\",staticClass:\"badge-popup widgets-popup title\",attrs:{\"trigger-element\":e.$refs.titleButton},model:{value:t.titleOpen,callback:function(e){t.titleOpen=e},expression:\"titleOpen\"}},[n(\"ul\",e._l(t.titleList,(function(e){return n(\"li\",{key:e.id,class:{active:e.isActive},attrs:{\"data-id\":e.id},on:{click:function(n){return t.toggleBadge(e,t.titleList)}}},[n(\"img\",{staticClass:\"title-image\",attrs:{src:e.imageUrl}})])})),0)]),e._v(\" \"),n(t.DefaultWidget,{ref:\"titleButton\",attrs:{icon:\"mdi-script-outline\"},on:{click:function(e){t.titleOpen=!t.titleOpen}}},[n(\"span\",[e._v(\"更换头衔\")])])],1)};l._withStripped=!0;const o=globalThis.Vue;var a=t(986);const i=coreApis.utils.sort,r=coreApis.ui;var d=t(464);const p=(0,o.defineComponent)({__name:\"BadgeHelper\",setup(e){const{options:n}=(0,a.getComponentSettings)(\"badgeHelper\"),t=(0,o.ref)(),l=(0,o.ref)([]),p=(0,o.ref)([]),c=(0,o.ref)(!1),s=(0,o.ref)(!1),u=(0,o.ref)(!0),b=()=>{const e=Math.min(Math.ceil(l.value.length/18),15);t.value.style.setProperty(\"--medal-columns\",e.toString());const n=Math.min(Math.ceil(p.value.length/18),15);t.value.style.setProperty(\"--title-columns\",n.toString())},f=async()=>{l.value=(await(0,d.KK)()).sort((0,i.descendingSort)((e=>e.level))).slice(0,n.maxBadgeCount)},g=async()=>{p.value=(await(0,d.eB)()).slice(0,n.maxBadgeCount)};return(0,o.onMounted)((async()=>{(0,a.addComponentListener)(\"badgeHelper.grayEffect\",(e=>{u.value=e}),!0);await(async()=>{const e=f();await d.Dx.getImageMap();const n=g();return Promise.all([e,n])})(),b()})),{__sfc:!0,options:n,element:t,medalList:l,titleList:p,medalOpen:c,titleOpen:s,grayEffect:u,updateColumnsCount:b,loadMedalList:f,loadTitleList:g,toggleBadge:async(e,t)=>{if(console.log(e),e.isActive)e.isActive=!1,await e.deactivate();else{const l=t.find((e=>e.isActive));l&&(l.isActive=!1),e.isActive=!0,await e.activate(),e instanceof d.j9&&(n.defaultMedalID=e.id)}e instanceof d.j9?await f():e instanceof d.Dx&&await g()},DefaultWidget:r.DefaultWidget,VPopup:r.VPopup}}}),c=p;var s=t(332),u=t.n(s),b=t(525),f=t.n(b),g={insert:\"head\",singleton:!1};u()(f(),g);f().locals;var v=function(e,n,t,l,o,a,i,r){var d,p=\"function\"==typeof e?e.options:e;if(n&&(p.render=n,p.staticRenderFns=t,p._compiled=!0),l&&(p.functional=!0),a&&(p._scopeId=\"data-v-\"+a),i?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},p._ssrRegister=d):o&&(d=r?function(){o.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:o),d)if(p.functional){p._injectStyles=d;var c=p.render;p.render=function(e,n){return d.call(n),c(e,n)}}else{var s=p.beforeCreate;p.beforeCreate=s?[].concat(s,d):[d]}return{exports:e,options:p}}(c,l,[],!1,null,null,null);const m=v.exports},984:e=>{function n(e){var n=new Error(\"Cannot find module '\"+e+\"'\");throw n.code=\"MODULE_NOT_FOUND\",n}n.keys=()=>[],n.resolve=n,n.id=984,e.exports=n},235:e=>{\"use strict\";e.exports=\"在直播区中, 可从功能面板中直接切换勋章和头衔. 默认显示 256 个 (同时也是上限), 可在选项中修改.\\n\"},986:e=>{\"use strict\";e.exports=coreApis.settings},605:e=>{\"use strict\";e.exports=coreApis.utils}},l={};function o(e){var n=l[e];if(void 0!==n)return n.exports;var a=l[e]={id:e,exports:{}};return t[e](a,a.exports,o),a.exports}o.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return o.d(n,{a:n}),n},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(t,l){if(1&l&&(t=this(t)),8&l)return t;if(\"object\"==typeof t&&t){if(4&l&&t.__esModule)return t;if(16&l&&\"function\"==typeof t.then)return t}var a=Object.create(null);o.r(a);var i={};e=e||[null,n({}),n([]),n(n)];for(var r=2&l&&t;\"object\"==typeof r&&!~e.indexOf(r);r=n(r))Object.getOwnPropertyNames(r).forEach((e=>i[e]=()=>t[e]));return i.default=()=>t,o.d(a,i),a},o.d=(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),o.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var a={};return(()=>{\"use strict\";o.d(a,{component:()=>i});const e=coreApis.componentApis.define;var n=o(605),t=o(464);const l=(0,e.defineOptionsMetadata)({autoMatchMedal:{defaultValue:!0,displayName:\"自动佩戴当前直播间勋章\"},maxBadgeCount:{defaultValue:256,displayName:\"最大显示数量\",validator:(0,n.getNumberValidator)(1,256)},defaultMedalID:{displayName:\"默认勋章ID\",hidden:!0,defaultValue:0},grayEffect:{displayName:\"显示勋章的未点亮状态\",defaultValue:!0}}),i=(0,e.defineComponentMetadata)({name:\"badgeHelper\",displayName:\"直播勋章快速更换\",entry:()=>(async()=>{const{getUID:e}=await Promise.resolve().then(o.t.bind(o,605,23));if(!e())return;const{getComponentSettings:n}=await Promise.resolve().then(o.t.bind(o,986,23)),{options:l}=n(\"badgeHelper\");if(!l.autoMatchMedal)return;const a=document.URL.match(/^https:\\/\\/live\\.bilibili\\.com\\/(blanc\\/)?([\\d]+)/);if(!a)return;const i=parseInt(a[2]);if(Number.isNaN(i))return void console.warn(\"roomID not found\");const r=await(0,t.KK)();if(!l.defaultMedalID){const e=r.find((e=>e.isActive));e&&(l.defaultMedalID=e.id,console.log(`set defaultMedalID to activeMedal (${e.id})`))}const d=l.defaultMedalID?r.find((e=>e.id===l.defaultMedalID)):r.find((e=>e.isActive)),p=r.find((e=>e.roomID===i));p?(await p.activate(),console.log(`activated matchMedal (${p.id})`)):d&&(await d.activate(),console.log(`no matchMedal, fallback to defaultMedal (${d.id})`))})(),reload:n.none,unload:n.none,tags:[componentsTags.live],widget:{component:()=>Promise.resolve().then(o.bind(o,405)).then((e=>e.default)),condition:()=>Boolean((0,n.getUID)())},options:l,urlInclude:[\"//live.bilibili.com\"],commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\",description:(()=>{const e=o(984);return{...Object.fromEntries(e.keys().map((n=>[n.match(/index\\.(.+)\\.md$/)[1],e(n)]))),\"zh-CN\":()=>Promise.resolve().then(o.t.bind(o,235,17)).then((e=>e.default))}})()})})(),a=a.component})()));",
      "metadata": {
        "name": "badgeHelper",
        "displayName": "直播勋章快速更换",
        "tags": [
          {
            "name": "live",
            "displayName": "直播",
            "color": "#26A69A",
            "icon": "mdi-video-wireless-outline",
            "order": 4
          }
        ],
        "options": {
          "autoMatchMedal": {
            "defaultValue": true,
            "displayName": "自动佩戴当前直播间勋章"
          },
          "maxBadgeCount": {
            "defaultValue": 256,
            "displayName": "最大显示数量"
          },
          "defaultMedalID": {
            "displayName": "默认勋章ID",
            "hidden": true,
            "defaultValue": 0
          },
          "grayEffect": {
            "displayName": "显示勋章的未点亮状态",
            "defaultValue": true
          }
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5",
        "description": {}
      },
      "settings": {
        "enabled": true,
        "options": {
          "autoMatchMedal": false,
          "maxBadgeCount": 256,
          "defaultMedalID": 0,
          "grayEffect": true
        }
      }
    },
    "liveHomeMute": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"live/home-mute\"]=t():e[\"live/home-mute\"]=t()}(globalThis,(()=>(()=>{\"use strict\";var e,t,o={200:e=>{e.exports=coreApis.spinQuery},605:e=>{e.exports=coreApis.utils}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return o[e](i,i.exports,n),i.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if(\"object\"==typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&\"function\"==typeof o.then)return o}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&o;\"object\"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>o[e]));return a.default=()=>o,n.d(i,a),i},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return(()=>{n.d(i,{component:()=>a});const e=coreApis.componentApis.define,t=coreApis.settings,o=coreApis.style,r=/^https:\\/\\/live\\.bilibili\\.com\\/(index\\.html)?$/,a=(0,e.defineComponentMetadata)({name:\"liveHomeMute\",displayName:\"直播首页静音\",tags:[componentsTags.live],description:{\"zh-CN\":\"禁止直播首页的推荐直播间自动开始播放.\"},entry:async e=>{let{metadata:r}=e;const n=\"hide-home-live\";(0,t.addComponentListener)(`${r.name}.hide`,(e=>{e?(0,o.addStyle)(\".player-area-ctnr,#player-header { display: none !important }\",n):(0,o.removeStyle)(n)}),!0)},options:{hide:{displayName:\"隐藏首页直播板块\",defaultValue:!1}},urlInclude:[r],plugin:{displayName:\"直播首页静音 - 提前执行\",description:{\"zh-CN\":\"提前执行代码以尽快静音.\"},async setup(){const{matchUrlPattern:e}=await Promise.resolve().then(n.t.bind(n,605,23));if(!e(r))return;const{select:t}=await Promise.resolve().then(n.t.bind(n,200,23));t(\"video\").then((e=>{e.muted=!0}))}},commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),i=i.component})()));",
      "metadata": {
        "name": "liveHomeMute",
        "displayName": "直播首页静音",
        "tags": [
          {
            "name": "live",
            "displayName": "直播",
            "color": "#26A69A",
            "icon": "mdi-video-wireless-outline",
            "order": 4
          }
        ],
        "description": {
          "zh-CN": "禁止直播首页的推荐直播间自动开始播放."
        },
        "options": {
          "hide": {
            "displayName": "隐藏首页直播板块",
            "defaultValue": false
          }
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {
          "hide": false
        }
      }
    },
    "removeLiveWatermark": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"live/remove-watermark\"]=t():e[\"live/remove-watermark\"]=t()}(globalThis,(()=>(()=>{var e,t,o={763:(e,t,o)=>{var r=o(218)((function(e){return e[1]}));r.push([e.id,\".live-player-ctnr .web-player-icon-roomStatus,\\n.bilibili-live-player-video-logo {\\n  display: none !important;\\n}\",\"\"]),e.exports=r},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(o,\"}\"):o})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,o,r){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var n={};if(r)for(var i=0;i<this.length;i++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[i][0];null!=a&&(n[a]=!0)}for(var c=0;c<e.length;c++){var p=[].concat(e[c]);r&&n[p[0]]||(o&&(p[2]?p[2]=\"\".concat(o,\" and \").concat(p[2]):p[2]=o),t.push(p))}},t}},63:(e,t,o)=>{var r=o(763);r&&r.__esModule&&(r=r.default),e.exports=\"string\"==typeof r?r:r.toString()}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={id:e,exports:{}};return o[e](i,i.exports,n),i.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if(\"object\"==typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&\"function\"==typeof o.then)return o}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var c=2&r&&o;\"object\"==typeof c&&!~e.indexOf(c);c=t(c))Object.getOwnPropertyNames(c).forEach((e=>a[e]=()=>o[e]));return a.default=()=>o,n.d(i,a),i},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return(()=>{\"use strict\";n.d(i,{component:()=>r});const e=coreApis.componentApis.define,t=coreApis.componentApis.styledComponent,o=coreApis.utils.urls,r=(0,e.defineComponentMetadata)({...(0,t.toggleStyle)(\"removeLiveWatermark\",(()=>Promise.resolve().then(n.t.bind(n,63,23)))),displayName:\"删除直播水印\",tags:[componentsTags.live,componentsTags.style],description:{\"zh-CN\":\"删除观看直播时角落的水印.\"},urlInclude:o.liveUrls,commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),i=i.component})()));",
      "metadata": {
        "name": "removeLiveWatermark",
        "displayName": "删除直播水印",
        "tags": [
          {
            "name": "live",
            "displayName": "直播",
            "color": "#26A69A",
            "icon": "mdi-video-wireless-outline",
            "order": 4
          },
          {
            "name": "style",
            "displayName": "样式",
            "color": "#8BC34A",
            "icon": "mdi-palette-outline",
            "order": 2
          }
        ],
        "description": {
          "zh-CN": "删除观看直播时角落的水印."
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "sidebarOffset": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"style/sidebar-offset\"]=t():e[\"style/sidebar-offset\"]=t()}(globalThis,(()=>(()=>{var e,t,o={470:(e,t,o)=>{var r=o(218)((function(e){return e[1]}));r.push([e.id,\".be-settings > .sidebar {\\n  top: calc(50% + var(--be-sidebar-offset, 0)) !important;\\n}\",\"\"]),e.exports=r},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(o,\"}\"):o})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,o,r){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var n={};if(r)for(var a=0;a<this.length;a++){\n// eslint-disable-next-line prefer-destructuring\nvar i=this[a][0];null!=i&&(n[i]=!0)}for(var s=0;s<e.length;s++){var f=[].concat(e[s]);r&&n[f[0]]||(o&&(f[2]?f[2]=\"\".concat(o,\" and \").concat(f[2]):f[2]=o),t.push(f))}},t}},153:(e,t,o)=>{var r=o(470);r&&r.__esModule&&(r=r.default),e.exports=\"string\"==typeof r?r:r.toString()}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={id:e,exports:{}};return o[e](a,a.exports,n),a.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if(\"object\"==typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&\"function\"==typeof o.then)return o}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&o;\"object\"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>o[e]));return i.default=()=>o,n.d(a,i),a},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var a={};return(()=>{\"use strict\";n.d(a,{component:()=>r});const e=coreApis.componentApis.define,t=coreApis.settings,o=coreApis.utils,r=(0,e.defineComponentMetadata)({name:\"sidebarOffset\",displayName:\"侧栏垂直偏移\",tags:[componentsTags.style],instantStyles:[{name:\"sidebarOffset\",style:()=>Promise.resolve().then(n.t.bind(n,153,23))}],description:{\"zh-CN\":\"给脚本的侧栏设置垂直偏移量, 范围为 -35% ~ 40%\"},entry:e=>{let{metadata:o}=e;(0,t.addComponentListener)(`${o.name}.offset`,(e=>{document.documentElement.style.setProperty(\"--be-sidebar-offset\",`${e}%`)}),!0)},options:{offset:{displayName:\"偏移量 (%)\",defaultValue:0,validator:(0,o.getNumberValidator)(-35,40)}},commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),a=a.component})()));",
      "metadata": {
        "name": "sidebarOffset",
        "displayName": "侧栏垂直偏移",
        "tags": [
          {
            "name": "style",
            "displayName": "样式",
            "color": "#8BC34A",
            "icon": "mdi-palette-outline",
            "order": 2
          }
        ],
        "description": {
          "zh-CN": "给脚本的侧栏设置垂直偏移量, 范围为 -35% ~ 40%"
        },
        "options": {
          "offset": {
            "displayName": "偏移量 (%)",
            "defaultValue": 0
          }
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {
          "offset": 10
        }
      }
    },
    "checkInCenter": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"utils/check-in-center\"]=t():e[\"utils/check-in-center\"]=t()}(globalThis,(()=>(()=>{\"use strict\";var e={830:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"div\",{staticClass:\"multiple-widgets\"},e._l(e.items,(function(n){return t(\"DefaultWidget\",{key:n.name,attrs:{disabled:n.disabled,\"data-name\":n.name,name:n.displayName,icon:n.icon},on:{click:function(t){return e.runItemAction(n,t)}}})})),1)};o._withStripped=!0;const i=coreApis.ui,s=coreApis.ajax,a=coreApis.toast;var r=n(605);const c=coreApis.pluginApis.data,l=[{name:\"seeds-to-coins\",displayName:\"瓜子换硬币\",icon:\"mdi-seed-outline\",action:async()=>{const e=await(0,s.postTextWithCredentials)(\"https://api.live.bilibili.com/xlive/revenue/v1/wallet/silver2coin\",(0,r.formData)({csrf:(0,r.getCsrf)(),csrf_token:(0,r.getCsrf)()})),t=JSON.parse(e);0!==t.code?a.Toast.info(t.message,\"瓜子换硬币\",3e3):a.Toast.success(`${t.message}\\n剩余银瓜子:${t.data.silver}`,\"瓜子换硬币\",3e3)}},{name:\"live-check-in\",displayName:\"直播间签到\",icon:\"mdi-calendar-check\",action:async()=>{const e=await(0,s.getJsonWithCredentials)(\"https://api.live.bilibili.com/xlive/web-ucenter/v1/sign/DoSign\");if(0!==e.code)a.Toast.info(e.message,\"直播间签到\",3e3);else{const{text:t,specialText:n,allDays:o,hadSignDays:i}=e.data,s=`签到成功, 获得了${t} ${n}\\n本月进度: ${i} / ${o}`;a.Toast.success(s,\"直播间签到\",3e3)}}}],[d]=(0,c.registerAndGetData)(\"checkInCenter.items\",l);var p=function(e,t,n,o,i,s,a,r){var c,l=\"function\"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),o&&(l.functional=!0),s&&(l._scopeId=\"data-v-\"+s),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):i&&(c=r?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:e,options:l}}(Vue.extend({components:{DefaultWidget:i.DefaultWidget},data:()=>({items:d}),methods:{async runItemAction(e,t){try{this.$set(e,\"disabled\",!0);const n=this.$el.querySelector(`[data-name='${e.name}']`);await e.action(n,t)}finally{e.disabled=!1}}}}),o,[],!1,null,null,null);const u=p.exports},605:e=>{e.exports=coreApis.utils}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var o={};return(()=>{n.d(o,{component:()=>i});const e=coreApis.componentApis.define;var t=n(605);const i=(0,e.defineComponentMetadata)({name:\"checkInCenter\",displayName:\"签到助手\",description:{\"zh-CN\":\"在功能面板中提供一些可以每日进行的操作.\"},tags:[componentsTags.utils],entry:none,widget:{component:()=>Promise.resolve().then(n.bind(n,830)).then((e=>e.default)),condition:()=>Boolean((0,t.getUID)())},commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),o=o.component})()));",
      "metadata": {
        "name": "checkInCenter",
        "displayName": "签到助手",
        "description": {
          "zh-CN": "在功能面板中提供一些可以每日进行的操作."
        },
        "tags": [
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          }
        ],
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "copyCommentsLink": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"utils/comments/copy-link\"]=t():e[\"utils/comments/copy-link\"]=t()}(globalThis,(()=>(()=>{\"use strict\";var e,t,o={206:e=>{e.exports=coreApis.componentApis.utils.commentApis}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return o[e](i,i.exports,n),i.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if(\"object\"==typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&\"function\"==typeof o.then)return o}var i=Object.create(null);n.r(i);var c={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&o;\"object\"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>c[e]=()=>o[e]));return c.default=()=>o,n.d(i,c),i},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return(()=>{n.d(i,{component:()=>r});const e=coreApis.componentApis.define,t=coreApis.utils,o=coreApis.utils.urls,r=(0,e.defineComponentMetadata)({name:\"copyCommentsLink\",displayName:\"复制评论链接\",description:{\"zh-CN\":\"开启后, 可在每条评论的菜单中选择复制链接.\"},entry:async()=>{const{forEachCommentItem:e,addMenuItem:r}=await Promise.resolve().then(n.t.bind(n,206,23));e({added:e=>{const n=e=>{e.forEach((e=>{r(e,{className:\"copy-link\",text:\"复制链接\",action:async()=>{const r=(e=>{if(document.URL.match(/\\/\\/t\\.bilibili\\.com\\/(\\d+)/))return\"\";if(o.feedsUrls.every((e=>!(0,t.matchUrlPattern)(e))))return\"\";let r=e;for(;null!==r&&r!==document.body;){if(r.hasAttribute(\"data-did\"))return`https://t.bilibili.com/${r.getAttribute(\"data-did\")}`;r=r.parentElement}return\"\"})(e.element)||document.URL.replace(location.hash,\"\");await navigator.clipboard.writeText(`${r}#reply${e.id}`)}})}))};n([e,...e.replies]),e.addEventListener(\"repliesUpdate\",(e=>n(e.detail)))}})},tags:[componentsTags.utils],commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),i=i.component})()));",
      "metadata": {
        "name": "copyCommentsLink",
        "displayName": "复制评论链接",
        "description": {
          "zh-CN": "开启后, 可在每条评论的菜单中选择复制链接."
        },
        "tags": [
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          }
        ],
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "fullFeedsTitle": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"feeds/full-title\"]=t():e[\"feeds/full-title\"]=t()}(globalThis,(()=>(()=>{var e,t,o={453:(e,t,o)=>{var n=o(218)((function(e){return e[1]}));n.push([e.id,\".custom-navbar .video-card .title {\\n  max-height: unset !important;\\n  display: block !important;\\n}\",\"\"]),e.exports=n},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(o,\"}\"):o})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,o,n){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var r={};if(n)for(var i=0;i<this.length;i++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[i][0];null!=a&&(r[a]=!0)}for(var c=0;c<e.length;c++){var s=[].concat(e[c]);n&&r[s[0]]||(o&&(s[2]?s[2]=\"\".concat(o,\" and \").concat(s[2]):s[2]=o),t.push(s))}},t}},699:(e,t,o)=>{var n=o(453);n&&n.__esModule&&(n=n.default),e.exports=\"string\"==typeof n?n:n.toString()}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={id:e,exports:{}};return o[e](i,i.exports,r),i.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(o,n){if(1&n&&(o=this(o)),8&n)return o;if(\"object\"==typeof o&&o){if(4&n&&o.__esModule)return o;if(16&n&&\"function\"==typeof o.then)return o}var i=Object.create(null);r.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var c=2&n&&o;\"object\"==typeof c&&!~e.indexOf(c);c=t(c))Object.getOwnPropertyNames(c).forEach((e=>a[e]=()=>o[e]));return a.default=()=>o,r.d(i,a),i},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return(()=>{\"use strict\";r.d(i,{component:()=>o});const e=coreApis.componentApis.define,t=coreApis.componentApis.styledComponent,o=(0,e.defineComponentMetadata)({...(0,t.toggleStyle)(\"fullFeedsTitle\",(()=>Promise.resolve().then(r.t.bind(r,699,23)))),displayName:\"展开动态标题\",description:{\"zh-CN\":\"在顶栏的视频动态中, 无论标题多长总是完全展开.\"},tags:[componentsTags.feeds,componentsTags.style],commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),i=i.component})()));",
      "metadata": {
        "name": "fullFeedsTitle",
        "displayName": "展开动态标题",
        "description": {
          "zh-CN": "在顶栏的视频动态中, 无论标题多长总是完全展开."
        },
        "tags": [
          {
            "name": "feeds",
            "displayName": "动态",
            "color": "#00ACC1",
            "icon": "mdi-pinwheel-outline",
            "order": 3
          },
          {
            "name": "style",
            "displayName": "样式",
            "color": "#8BC34A",
            "icon": "mdi-palette-outline",
            "order": 2
          }
        ],
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "dpiLiveShowgirl": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"live/showgirl\"]=t():e[\"live/showgirl\"]=t()}(globalThis,(()=>(()=>{\"use strict\";var e,t,o={356:e=>{e.exports=coreApis.style}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return o[e](i,i.exports,r),i.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(o,n){if(1&n&&(o=this(o)),8&n)return o;if(\"object\"==typeof o&&o){if(4&n&&o.__esModule)return o;if(16&n&&\"function\"==typeof o.then)return o}var i=Object.create(null);r.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var l=2&n&&o;\"object\"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>a[e]=()=>o[e]));return a.default=()=>o,r.d(i,a),i},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return(()=>{r.d(i,{component:()=>a});const e=coreApis.componentApis.define,t=coreApis.utils.urls,o=\"dpi-live-showgirl\",n=async()=>{const{addStyle:e}=await Promise.resolve().then(r.t.bind(r,356,23));null===document.getElementById(o)&&e(`\\n      .haruna-ctnr,\\n      .avatar-btn\\n      {\\n        transform: scale(${1/window.devicePixelRatio}) !important;\\n      }\\n    `,o)},a=(0,e.defineComponentMetadata)({name:\"dpiLiveShowgirl\",displayName:\"直播看板娘高 DPI 适配\",enabledByDefault:window.devicePixelRatio>1,description:{\"zh-CN\":\"根据屏幕 DPI 缩放直播看板娘的大小, 避免像素锯齿.\"},tags:[componentsTags.live,componentsTags.style],entry:n,reload:n,unload:()=>{document.getElementById(o)?.remove()},urlInclude:t.liveUrls,commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),i=i.component})()));",
      "metadata": {
        "name": "dpiLiveShowgirl",
        "displayName": "直播看板娘高 DPI 适配",
        "enabledByDefault": true,
        "description": {
          "zh-CN": "根据屏幕 DPI 缩放直播看板娘的大小, 避免像素锯齿."
        },
        "tags": [
          {
            "name": "live",
            "displayName": "直播",
            "color": "#26A69A",
            "icon": "mdi-video-wireless-outline",
            "order": 4
          },
          {
            "name": "style",
            "displayName": "样式",
            "color": "#8BC34A",
            "icon": "mdi-palette-outline",
            "order": 2
          }
        ],
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "danmakuAirborne": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/danmaku/airborne\"]=t():e[\"video/danmaku/airborne\"]=t()}(globalThis,(()=>(()=>{var e,t,n={985:(e,t,n)=>{var o=n(218)((function(e){return e[1]}));o.push([e.id,\".bili-dm.airborne,\\n.b-danmaku.airborne,\\n.bili-danmaku-x-dm.airborne {\\n  text-decoration: underline;\\n  cursor: pointer;\\n  pointer-events: initial;\\n}\",\"\"]),e.exports=o},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,n,o){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var r={};if(o)for(var i=0;i<this.length;i++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[i][0];null!=a&&(r[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);o&&r[c[0]]||(n&&(c[2]?c[2]=\"\".concat(n,\" and \").concat(c[2]):c[2]=n),t.push(c))}},t}},882:(e,t,n)=>{var o=n(985);o&&o.__esModule&&(o=o.default),e.exports=\"string\"==typeof o?o:o.toString()}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={id:e,exports:{}};return n[e](i,i.exports,r),i.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if(\"object\"==typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&\"function\"==typeof n.then)return n}var i=Object.create(null);r.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&n;\"object\"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>n[e]));return a.default=()=>n,r.d(i,a),i},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return(()=>{\"use strict\";r.d(i,{component:()=>c});const e=coreApis.componentApis.styledComponent,t=coreApis.componentApis.define,n=coreApis.componentApis.video.playerAgent,o=coreApis.componentApis.video.videoDanmaku,a=coreApis.observer,s=coreApis.utils.urls,c=(0,t.defineComponentMetadata)({displayName:\"启用弹幕空降\",author:{name:\"kdxcxs\",link:\"https://github.com/kdxcxs\"},description:{\"zh-CN\":\"为可能含有时间点的弹幕添加下划线, 点击可以跳到视频对应时间.\"},tags:[componentsTags.video],urlInclude:s.playerUrls,...(0,e.toggleStyle)(\"danmakuAirborne\",(()=>Promise.resolve().then(r.t.bind(r,882,23))),(async e=>{let{settings:t}=e;const{enabled:r}=t,i=e=>{if(!e)return NaN;const t=e.match(/(\\d+)[ ]*[:：时分][ ]*(\\d+)([ ]*[:：分][ ]*(\\d+))?/);if(!t)return NaN;if(t[3]){const[,n,o,,r]=t.map((e=>parseInt(e)));return[n,o,r].some((e=>Number.isNaN(e)))||e.includes(\"分\")&&!e.includes(\"时\")?NaN:3600*n+60*o+r}const[,n,o]=t.map((e=>parseInt(e)));return[n,o].some((e=>Number.isNaN(e)))?NaN:60*n+o},s=e=>{if(!r)return;const t=e.target;if(![\"b-danmaku\",\"bili-dm\",\"bili-danmaku-x-dm\"].some((e=>t.classList.contains(e))))return;const n=i(t.textContent);Number.isNaN(n)||unsafeWindow.player.seek(n,!1)};(0,o.forEachVideoDanmaku)({added:e=>{const t=!Number.isNaN(i(e.text));e.element.classList.toggle(\"airborne\",t)}}),(0,a.videoChange)((async()=>{const e=await n.playerAgent.query.video.wrap();e.classList.contains(\"airborne-enabled\")||(e.classList.add(\"airborne-enabled\"),e.addEventListener(\"click\",s))}))})),commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),i=i.component})()));",
      "metadata": {
        "displayName": "启用弹幕空降",
        "author": {
          "name": "kdxcxs",
          "link": "https://github.com/kdxcxs"
        },
        "description": {
          "zh-CN": "为可能含有时间点的弹幕添加下划线, 点击可以跳到视频对应时间."
        },
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "name": "danmakuAirborne",
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "seekByFrames": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/player/seek-by-frames\"]=t():e[\"video/player/seek-by-frames\"]=t()}(globalThis,(()=>(()=>{\"use strict\";var e,t,r={833:e=>{e.exports=coreApis.componentApis.video.playerAgent}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={exports:{}};return r[e](a,a.exports,n),a.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if(\"object\"==typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&\"function\"==typeof r.then)return r}var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var i=2&o&&r;\"object\"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(a,s),a},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var a={};return(()=>{n.d(a,{component:()=>l});const e=coreApis.componentApis.video.videoControlBar,t=coreApis.observer,r=coreApis.utils,o=coreApis.utils.urls,s=coreApis.pluginApis.data,i=coreApis.componentApis.define,c=\"seek-by-frame-disable\",l=(0,i.defineComponentMetadata)({name:\"seekByFrames\",displayName:\"启用逐帧调整\",tags:[componentsTags.video],description:{\"zh-CN\":\"在播放器的时间右边增加两个按钮, 用于**较精细**调整视频时间. 装有 `快捷键扩展` 时支持键盘快捷键<kbd>Shift</kbd>+<kbd>←</kbd>/<kbd>→</kbd>.\\n\\n> 注: `视频的实际播放帧率`跟`视频本身的帧率`和`显示器的刷新率`有关, 很难计算一个精准的数值, 部分视频仍然会有暂停不到那种一闪而过的图的情况.\"},entry:async()=>{await(0,r.playerReady)();const{playerAgent:o}=await Promise.resolve().then(n.t.bind(n,833,23));(0,s.addData)(\"ui.icons\",(e=>{e[\"seek-left\"]='<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n\\x3c!-- Generator: Adobe Illustrator 24.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\\x3e\\n<svg version=\"1.1\" id=\"图层_2_1_\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\"\\n\\t y=\"0px\" viewBox=\"0 0 24 24\" style=\"enable-background:new 0 0 24 24;\" xml:space=\"preserve\">\\n<g>\\n\\t<path d=\"M15.5,20.3c-0.4,0-0.7-0.1-1-0.4l-8.3-7.5c-0.3-0.3-0.5-0.7-0.5-1.1c0-0.4,0.2-0.8,0.5-1.1l8.3-7.5\\n\\t\\tc0.6-0.6,1.6-0.5,2.1,0.1c0.6,0.6,0.5,1.6-0.1,2.1l-7.1,6.3l7.1,6.4c0.6,0.6,0.7,1.5,0.1,2.1C16.3,20.2,15.9,20.3,15.5,20.3z\"/>\\n</g>\\n<circle cx=\"16.8\" cy=\"11.3\" r=\"2.4\"/>\\n</svg>\\n',e[\"seek-right\"]='<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n\\x3c!-- Generator: Adobe Illustrator 24.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\\x3e\\n<svg version=\"1.1\" id=\"图层_2\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\\n\\t viewBox=\"0 0 24 24\" style=\"enable-background:new 0 0 24 24;\" xml:space=\"preserve\">\\n<g>\\n\\t<path d=\"M8.2,20.3c0.4,0,0.7-0.1,1-0.4l8.3-7.5c0.3-0.3,0.5-0.7,0.5-1.1c0-0.4-0.2-0.8-0.5-1.1L9.2,2.7C8.6,2.2,7.7,2.2,7.1,2.9\\n\\t\\tC6.6,3.5,6.6,4.4,7.3,5l7.1,6.3l-7.1,6.4c-0.6,0.6-0.7,1.5-0.1,2.1C7.4,20.2,7.8,20.3,8.2,20.3z\"/>\\n</g>\\n<circle cx=\"7\" cy=\"11.3\" r=\"2.4\"/>\\n</svg>\\n'}));let a=0;(0,t.attributesSubtree)(`${o.query.control.buttons.quality.selector} ul`,(()=>{const e=dq(`${o.query.control.buttons.quality.selector} .bui-select-item-active, ${o.query.control.buttons.quality.selector} .active`),t=e?parseInt(e.getAttribute(\"data-value\")):0,r=(()=>{switch(t){case 116:case 74:return 6e4/1001;default:return 3e4/1001}})();a=1/r}));const i=e=>{o.changeTime(e*a)};(0,e.addControlBarButton)({name:\"seekPrevFrame\",displayName:\"上一帧\",icon:\"seek-left\",order:1,action:()=>{i(-1)}}),(0,e.addControlBarButton)({name:\"seekNextFrame\",displayName:\"下一帧\",icon:\"seek-right\",order:2,action:()=>{i(1)}})},reload:()=>document.body.classList.remove(c),unload:()=>document.body.classList.add(c),urlInclude:o.playerUrls,plugin:{displayName:\"逐帧调整 - 快捷键支持\",setup:()=>{(0,s.addData)(\"keymap.actions\",(e=>{e.previousFrame={displayName:\"上一帧\",run:e=>{const{clickElement:t}=e;return t('.be-video-control-bar-extend [data-name=\"seekPrevFrame\"]',e)}},e.nextFrame={displayName:\"下一帧\",run:e=>{const{clickElement:t}=e;return t('.be-video-control-bar-extend [data-name=\"seekNextFrame\"]',e)}}})),(0,s.addData)(\"keymap.presets\",(e=>{e.previousFrame=\"shift arrowLeft\",e.nextFrame=\"shift arrowRight\"}))}},commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),a=a.component})()));",
      "metadata": {
        "name": "seekByFrames",
        "displayName": "启用逐帧调整",
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "description": {
          "zh-CN": "在播放器的时间右边增加两个按钮, 用于**较精细**调整视频时间. 装有 `快捷键扩展` 时支持键盘快捷键<kbd>Shift</kbd>+<kbd>←</kbd>/<kbd>→</kbd>.\n\n> 注: `视频的实际播放帧率`跟`视频本身的帧率`和`显示器的刷新率`有关, 很难计算一个精准的数值, 部分视频仍然会有暂停不到那种一闪而过的图的情况."
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "preserveDanmakuInput": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/player/preserve-danmaku-input\"]=t():e[\"video/player/preserve-danmaku-input\"]=t()}(globalThis,(()=>(()=>{var e,t,r={543:(e,t,r)=>{var o=r(218)((function(e){return e[1]}));o.push([e.id,\"@media screen and (max-width: 1200px) {\\n  body.player-mode-full .bpx-player-video-inputbar, body.player-fullscreen-fix .bpx-player-video-inputbar, body.player-mode-web .bpx-player-video-inputbar, body.player-full-win .bpx-player-video-inputbar,\\nbody.player-mode-full .bilibili-player-video-inputbar,\\nbody.player-fullscreen-fix .bilibili-player-video-inputbar,\\nbody.player-mode-web .bilibili-player-video-inputbar,\\nbody.player-full-win .bilibili-player-video-inputbar {\\n    display: flex !important;\\n  }\\n}\",\"\"]),e.exports=o},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(r,\"}\"):r})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,r,o){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var n={};if(o)for(var i=0;i<this.length;i++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[i][0];null!=a&&(n[a]=!0)}for(var p=0;p<e.length;p++){var l=[].concat(e[p]);o&&n[l[0]]||(r&&(l[2]?l[2]=\"\".concat(r,\" and \").concat(l[2]):l[2]=r),t.push(l))}},t}},752:(e,t,r)=>{var o=r(543);o&&o.__esModule&&(o=o.default),e.exports=\"string\"==typeof o?o:o.toString()}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={id:e,exports:{}};return r[e](i,i.exports,n),i.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if(\"object\"==typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&\"function\"==typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var p=2&o&&r;\"object\"==typeof p&&!~e.indexOf(p);p=t(p))Object.getOwnPropertyNames(p).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(i,a),i},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return(()=>{\"use strict\";n.d(i,{component:()=>o});const e=coreApis.componentApis.define,t=coreApis.utils.urls,r=\"preserveDanmakuInput\",o=(0,e.defineComponentMetadata)({name:r,displayName:\"强制保留弹幕发送栏\",entry:none,instantStyles:[{name:r,style:()=>Promise.resolve().then(n.t.bind(n,752,23))}],tags:[componentsTags.style,componentsTags.video],description:{\"zh-CN\":\"在视频播放器网页全屏时, 即使宽度过小也强制保留弹幕发送栏, 注意这可能导致右侧的功能按钮挤出边界.\"},urlInclude:t.playerUrls,commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),i=i.component})()));",
      "metadata": {
        "name": "preserveDanmakuInput",
        "displayName": "强制保留弹幕发送栏",
        "tags": [
          {
            "name": "style",
            "displayName": "样式",
            "color": "#8BC34A",
            "icon": "mdi-palette-outline",
            "order": 2
          },
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "description": {
          "zh-CN": "在视频播放器网页全屏时, 即使宽度过小也强制保留弹幕发送栏, 注意这可能导致右侧的功能按钮挤出边界."
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "outerWatchlater": {
      "code": "!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports[\"video/outer-watchlater\"]=e():t[\"video/outer-watchlater\"]=e()}(globalThis,(()=>(()=>{var t,e,o={358:(t,e,o)=>{\"use strict\";o.d(e,{Y:()=>r,d:()=>a});var n=o(952);let a=function(t){return t.Auto=\"自动\",t.Icon=\"图标\",t.IconAndText=\"图标 + 文字\",t}({});const r=(0,n.defineOptionsMetadata)({showInWatchlaterPages:{defaultValue:!1,displayName:\"在稍后再看页面中仍然显示\"},displayMode:{defaultValue:a.Auto,displayName:\"显示方式\",dropdownEnum:a}})},940:(t,e,o)=>{var n=o(218)((function(t){return t[1]}));n.push([t.id,\".video-toolbar-left .watchlater,\\n.video-toolbar .ops .watchlater,\\n.video-toolbar-v1 .toolbar-left .watchlater {\\n  font-size: 14px;\\n  margin-right: 28px !important;\\n  position: relative;\\n  width: auto !important;\\n}\\n.video-toolbar-left .watchlater.icon-only,\\n.video-toolbar .ops .watchlater.icon-only,\\n.video-toolbar-v1 .toolbar-left .watchlater.icon-only {\\n  margin-right: max(min(11vw, 11vh) - 117.2px, 6px) !important;\\n}\\n.video-toolbar-left .watchlater.icon-only .text,\\n.video-toolbar .ops .watchlater.icon-only .text,\\n.video-toolbar-v1 .toolbar-left .watchlater.icon-only .text {\\n  display: none;\\n}\\n@media screen and (max-width: 1340px), (max-height: 750px) {\\n.video-toolbar-left .watchlater:not(.icon-and-text),\\n.video-toolbar .ops .watchlater:not(.icon-and-text),\\n.video-toolbar-v1 .toolbar-left .watchlater:not(.icon-and-text) {\\n    margin-right: max(min(11vw, 11vh) - 117.2px, 6px) !important;\\n}\\n.video-toolbar-left .watchlater:not(.icon-and-text) .text,\\n.video-toolbar .ops .watchlater:not(.icon-and-text) .text,\\n.video-toolbar-v1 .toolbar-left .watchlater:not(.icon-and-text) .text {\\n    display: none;\\n}\\n}\\n.video-toolbar-left .watchlater .tip,\\n.video-toolbar .ops .watchlater .tip,\\n.video-toolbar-v1 .toolbar-left .watchlater .tip {\\n  position: absolute;\\n  top: calc(100% + 8px);\\n  left: 50%;\\n  transform: translateX(-50%);\\n  z-index: 1000;\\n  background: rgba(0, 0, 0, 0.8666666667);\\n  padding: 4px 8px;\\n  border-radius: 4px;\\n  color: #eee;\\n  transition: all 0.2s ease-out;\\n  opacity: 0;\\n  pointer-events: none;\\n}\\n.video-toolbar-left .watchlater .tip.show,\\n.video-toolbar .ops .watchlater .tip.show,\\n.video-toolbar-v1 .toolbar-left .watchlater .tip.show {\\n  opacity: 1;\\n  pointer-events: initial;\\n}\\n.video-toolbar-left .watchlater .be-icon,\\n.video-toolbar .ops .watchlater .be-icon,\\n.video-toolbar-v1 .toolbar-left .watchlater .be-icon {\\n  display: inline-flex;\\n}\\n@media (min-width: 1681px) {\\n.video-toolbar-left .watchlater .be-icon,\\n.video-toolbar .ops .watchlater .be-icon,\\n.video-toolbar-v1 .toolbar-left .watchlater .be-icon {\\n    --size: 36px !important;\\n}\\n}\\n.video-toolbar-left .watchlater .be-icon {\\n  transform: translateY(1px);\\n  margin-right: 8px;\\n}\\n.video-toolbar-v1 .watchlater .be-icon {\\n  transform: translateY(1px);\\n}\\n.more-ops-list > ul > li:nth-child(2),\\n.van-popover .more_dropdown > li:nth-child(2) {\\n  display: none !important;\\n}\\n.video-tool-more-dropdown .video-watchlater.dropdown-item {\\n  display: none !important;\\n}\",\"\"]),t.exports=n},218:t=>{\"use strict\";\n// eslint-disable-next-line func-names\nt.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var o=t(e);return e[2]?\"@media \".concat(e[2],\" {\").concat(o,\"}\"):o})).join(\"\")},\n// eslint-disable-next-line func-names\ne.i=function(t,o,n){\"string\"==typeof t&&(\n// eslint-disable-next-line no-param-reassign\nt=[[null,t,\"\"]]);var a={};if(n)for(var r=0;r<this.length;r++){\n// eslint-disable-next-line prefer-destructuring\nvar i=this[r][0];null!=i&&(a[i]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);n&&a[l[0]]||(o&&(l[2]?l[2]=\"\".concat(o,\" and \").concat(l[2]):l[2]=o),e.push(l))}},e}},332:(t,e,o)=>{\"use strict\";var n,a=function(){return void 0===n&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\nn=Boolean(window&&document&&document.all&&!window.atob)),n},r=function(){var t={};return function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}t[e]=o}return t[e]}}(),i=[];function s(t){for(var e=-1,o=0;o<i.length;o++)if(i[o].identifier===t){e=o;break}return e}function l(t,e){for(var o={},n=[],a=0;a<t.length;a++){var r=t[a],l=e.base?r[0]+e.base:r[0],c=o[l]||0,d=\"\".concat(l,\" \").concat(c);o[l]=c+1;var p=s(d),u={css:r[1],media:r[2],sourceMap:r[3]};-1!==p?(i[p].references++,i[p].updater(u)):i.push({identifier:d,updater:b(u,e),references:1}),n.push(d)}return n}function c(t){var e=document.createElement(\"style\"),n=t.attributes||{};if(void 0===n.nonce){var a=o.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),\"function\"==typeof t.insert)t.insert(e);else{var i=r(t.insert||\"head\");if(!i)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");i.appendChild(e)}return e}var d,p=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join(\"\\n\")});function u(t,e,o,n){var a=o?\"\":n.media?\"@media \".concat(n.media,\" {\").concat(n.css,\"}\"):n.css;if(t.styleSheet)t.styleSheet.cssText=p(e,a);else{var r=document.createTextNode(a),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(r,i[e]):t.appendChild(r)}}function h(t,e,o){var n=o.css,a=o.media,r=o.sourceMap;if(a?t.setAttribute(\"media\",a):t.removeAttribute(\"media\"),r&&\"undefined\"!=typeof btoa&&(n+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r)))),\" */\")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var f=null,v=0;function b(t,e){var o,n,a;if(e.singleton){var r=v++;o=f||(f=c(e)),n=u.bind(null,o,r,!1),a=u.bind(null,o,r,!0)}else o=c(e),n=h.bind(null,o,e),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(o)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else a()}}t.exports=function(t,e){(e=e||{}).singleton||\"boolean\"==typeof e.singleton||(e.singleton=a());var o=l(t=t||[],e);return function(t){if(t=t||[],\"[object Array]\"===Object.prototype.toString.call(t)){for(var n=0;n<o.length;n++){var a=s(o[n]);i[a].references--}for(var r=l(t,e),c=0;c<o.length;c++){var d=s(o[c]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}o=r}}}},195:(t,e,o)=>{\"use strict\";o.r(e),o.d(e,{default:()=>v});var n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(\"span\",{staticClass:\"watchlater be-outer-watchlater video-toolbar-left-item\",class:{on:t.on,...t.displayModeClass},attrs:{title:\"稍后再看\"},on:{click:function(e){return t.toggle()}}},[e(\"VIcon\",{staticClass:\"icon\",attrs:{size:28,icon:\"mdi-timetable\"}}),t._v(\" \"),e(\"span\",{staticClass:\"text\"},[t._v(\"稍后再看\")]),t._v(\" \"),e(\"div\",{staticClass:\"tip\",class:{show:t.tipShowing}},[t._v(t._s(t.tipText))])],1)};n._withStripped=!0;const a=coreApis.ui,r=coreApis.componentApis.video.watchlater;var i=o(358);const s=coreApis.settings,l=Vue.extend({components:{VIcon:a.VIcon},data(){const{displayMode:t}=(0,s.getComponentSettings)(\"outerWatchlater\").options;return{watchlaterList:r.watchlaterList,displayMode:t,aid:unsafeWindow.aid,tipText:\"\",tipShowing:!1,tipHandle:0}},computed:{on(){return console.log(this.watchlaterList,this.aid,this.watchlaterList.includes(parseInt(this.aid))),this.watchlaterList.includes(parseInt(this.aid))},displayModeClass(){return{\"icon-only\":this.displayMode===i.d.Icon,\"icon-and-text\":this.displayMode===i.d.IconAndText}}},created(){(0,s.addComponentListener)(\"outerWatchlater.displayMode\",(t=>{this.displayMode=t}))},methods:{showTip(t){this.tipText=t,this.tipShowing=!0,this.tipHandle&&clearTimeout(this.tipHandle),this.tipHandle=setTimeout((()=>{this.tipShowing=!1}),2e3)},async toggle(){await(0,r.toggleWatchlater)(this.aid),this.showTip(this.on?\"已添加至稍后再看\":\"已从稍后再看移除\")}}});var c=o(332),d=o.n(c),p=o(940),u=o.n(p),h={insert:\"head\",singleton:!1};d()(u(),h);u().locals;var f=function(t,e,o,n,a,r,i,s){var l,c=\"function\"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=o,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId=\"data-v-\"+r),i?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=l):a&&(l=s?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,l):[l]}return{exports:t,options:c}}(l,n,[],!1,null,null,null);const v=f.exports},952:t=>{\"use strict\";t.exports=coreApis.componentApis.define},391:t=>{\"use strict\";t.exports=coreApis.observer}},n={};function a(t){var e=n[t];if(void 0!==e)return e.exports;var r=n[t]={id:t,exports:{}};return o[t](r,r.exports,a),r.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,a.t=function(o,n){if(1&n&&(o=this(o)),8&n)return o;if(\"object\"==typeof o&&o){if(4&n&&o.__esModule)return o;if(16&n&&\"function\"==typeof o.then)return o}var r=Object.create(null);a.r(r);var i={};t=t||[null,e({}),e([]),e(e)];for(var s=2&n&&o;\"object\"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>o[t]));return i.default=()=>o,a.d(r,i),r},a.d=(t,e)=>{for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})};var r={};return(()=>{\"use strict\";a.d(r,{component:()=>s});var t=a(952);const e=coreApis.utils,o=coreApis.utils.urls,n=coreApis.componentApis.video.videoActions;var i=a(358);const s=(0,t.defineComponentMetadata)({name:\"outerWatchlater\",displayName:\"外置稍后再看\",entry:async t=>{let{settings:r}=t;if(o.watchlaterUrls.some(e.matchUrlPattern)&&!r.options.showInWatchlaterPages)return;if(!(0,e.getUID)())return;const i=await Promise.resolve().then(a.bind(a,195)),s=(0,e.mountVueComponent)(i);if(await(0,n.addVideoActionButton)((()=>s.$el))){const{videoChange:t}=await Promise.resolve().then(a.t.bind(a,391,23));t((t=>{let{aid:e}=t;console.log(\"videoChange\",unsafeWindow.aid,e),s.aid=unsafeWindow.aid}))}},tags:[componentsTags.video],description:{\"zh-CN\":\"将视频页面菜单里的 `稍后再看` 移到外面. 请注意如果在稍后再看页面中仍然显示, 是不会实时同步右侧的播放列表的.\"},urlInclude:o.videoUrls,options:i.Y,reload:()=>{dqa(\".be-outer-watchlater\").forEach((t=>{t.style.display=\"\"}))},unload:()=>{dqa(\".be-outer-watchlater\").forEach((t=>{t.style.display=\"none\"}))},plugin:{displayName:\"稍后再看 - 快捷键支持\",setup:t=>{let{addData:e}=t;e(\"keymap.actions\",(t=>{t.watchlater={displayName:\"稍后再看\",run:t=>{const{clickElement:e}=t;return e(\".be-outer-watchlater\",t)}}})),e(\"keymap.presets\",(t=>{t.watchlater=\"shift w\"}))}},commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),r=r.component})()));",
      "metadata": {
        "name": "outerWatchlater",
        "displayName": "外置稍后再看",
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "description": {
          "zh-CN": "将视频页面菜单里的 `稍后再看` 移到外面. 请注意如果在稍后再看页面中仍然显示, 是不会实时同步右侧的播放列表的."
        },
        "options": {
          "showInWatchlaterPages": {
            "defaultValue": false,
            "displayName": "在稍后再看页面中仍然显示"
          },
          "displayMode": {
            "defaultValue": "自动",
            "displayName": "显示方式",
            "dropdownEnum": {
              "Auto": "自动",
              "Icon": "图标",
              "IconAndText": "图标 + 文字"
            }
          }
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {
          "showInWatchlaterPages": false,
          "displayMode": "自动"
        }
      }
    },
    "videoScreenshot": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/player/screenshot\"]=t():e[\"video/player/screenshot\"]=t()}(globalThis,(()=>(()=>{var e,t,n={388:(e,t,n)=>{var i=n(218)((function(e){return e[1]}));i.push([e.id,'.video-screenshot-thumbnail {\\n  margin: var(--thumbnail-margin-vertical) var(--thumbnail-margin-horizontal);\\n  position: relative;\\n  transition: 0.35s cubic-bezier(0.18, 0.89, 0.32, 1.28);\\n  width: var(--screenshot-width);\\n  height: var(--screenshot-height);\\n  background-color: black;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n@keyframes spinner {\\nto {\\n    transform: translate(-50%, -50%) rotate(360deg);\\n}\\n}\\n.video-screenshot-thumbnail img {\\n  max-width: var(--screenshot-width);\\n  max-height: var(--screenshot-height);\\n  display: block;\\n  background-color: black;\\n}\\n.video-screenshot-thumbnail .loading::before {\\n  content: \"\";\\n  box-sizing: border-box;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%) rotate(0deg);\\n  width: 24px;\\n  height: 24px;\\n  border-radius: 50%;\\n  border: 3px solid rgba(136, 136, 136, 0.5333333333);\\n  border-top-color: var(--theme-color);\\n  animation: spinner 0.6s linear infinite;\\n}\\n.video-screenshot-thumbnail.video-screenshot-list-leave-active {\\n  position: absolute;\\n  transition: 0.35s cubic-bezier(0.6, -0.28, 0.74, 0.05);\\n}\\n.video-screenshot-thumbnail .mask {\\n  position: absolute;\\n  opacity: 0;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: rgba(0, 0, 0, 0.5333333333);\\n  display: flex;\\n  justify-content: space-around;\\n  align-items: center;\\n  transition: none;\\n  pointer-events: none;\\n}\\n.video-screenshot-thumbnail .mask .time {\\n  color: #fff;\\n  position: absolute;\\n  bottom: 4px;\\n  left: 8px;\\n  font-size: 10pt;\\n}\\n.video-screenshot-thumbnail .mask button {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: rgba(0, 0, 0, 0.6666666667);\\n  color: #fff;\\n  border: none;\\n  border-radius: 50%;\\n  font-size: 24pt;\\n  cursor: pointer;\\n  width: 48px;\\n  height: 48px;\\n  pointer-events: initial;\\n  outline: none !important;\\n}\\n.video-screenshot-thumbnail:hover .mask {\\n  opacity: 1;\\n}',\"\"]),e.exports=i},682:(e,t,n)=>{var i=n(218)((function(e){return e[1]}));i.push([e.id,\".video-screenshot-container {\\n  position: relative;\\n  --screenshot-width: 240px;\\n  --screenshot-width-negative: calc(0px - var(--screenshot-width));\\n  --screenshot-height: 135px;\\n  --thumbnail-margin-vertical: 12px;\\n  --thumbnail-margin-horizontal: 12px;\\n  --screenshot-list-width: calc(2 * var(--thumbnail-margin-horizontal) + var(--screenshot-width));\\n}\\n.video-screenshot-disable .video-screenshot-container {\\n  display: none;\\n}\\n.video-screenshot-container .video-screenshot-batch {\\n  position: fixed;\\n  bottom: var(--thumbnail-margin-vertical);\\n  right: var(--thumbnail-margin-horizontal);\\n  z-index: 20000;\\n  width: var(--screenshot-list-width);\\n  display: flex;\\n  align-items: center;\\n  gap: 16px;\\n  justify-content: space-between;\\n}\\n.video-screenshot-container .video-screenshot-batch button {\\n  background: rgba(0, 0, 0, 0.8);\\n  color: #fff;\\n  border: none;\\n  border-radius: 8px;\\n  font-size: 14px;\\n  cursor: pointer;\\n  outline: 0 !important;\\n  padding: 8px 12px;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  justify-content: center;\\n  flex-grow: 1;\\n}\\n.video-screenshot-container .video-screenshot-batch button .be-icon {\\n  margin-right: 4px;\\n}\\n.video-screenshot-container .video-screenshot-list {\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  z-index: 20000;\\n  margin: var(--thumbnail-margin-vertical) var(--thumbnail-margin-horizontal);\\n  max-height: calc(100% - 3 * var(--thumbnail-margin-vertical) - 37px);\\n  width: var(--screenshot-list-width);\\n  background-color: rgba(0, 0, 0, 0.8);\\n  border-radius: 8px;\\n  overflow: auto;\\n  scrollbar-width: none !important;\\n  overscroll-behavior: contain;\\n}\\n.video-screenshot-container .video-screenshot-list::-webkit-scrollbar {\\n  height: 0 !important;\\n  width: 0 !important;\\n}\\n.video-screenshot-container .video-screenshot-list > * {\\n  pointer-events: initial;\\n}\\n.video-screenshot-container .video-screenshot-list-enter {\\n  opacity: 0;\\n  transform: translateX(var(--screenshot-width-negative));\\n}\\n.video-screenshot-container .video-screenshot-list-leave-to {\\n  opacity: 0;\\n  transform: translateX(var(--screenshot-width));\\n}\",\"\"]),e.exports=i},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,n,i){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var o={};if(i)for(var r=0;r<this.length;r++){\n// eslint-disable-next-line prefer-destructuring\nvar s=this[r][0];null!=s&&(o[s]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);i&&o[c[0]]||(n&&(c[2]?c[2]=\"\".concat(n,\" and \").concat(c[2]):c[2]=n),t.push(c))}},t}},332:(e,t,n)=>{\"use strict\";var i,o=function(){return void 0===i&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\ni=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},i=[],o=0;o<e.length;o++){var r=e[o],c=t.base?r[0]+t.base:r[0],l=n[c]||0,d=\"\".concat(c,\" \").concat(l);n[c]=l+1;var h=a(d),u={css:r[1],media:r[2],sourceMap:r[3]};-1!==h?(s[h].references++,s[h].updater(u)):s.push({identifier:d,updater:f(u,t),references:1}),i.push(d)}return i}function l(e){var t=document.createElement(\"style\"),i=e.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),\"function\"==typeof e.insert)e.insert(t);else{var s=r(e.insert||\"head\");if(!s)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");s.appendChild(t)}return t}var d,h=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join(\"\\n\")});function u(e,t,n,i){var o=n?\"\":i.media?\"@media \".concat(i.media,\" {\").concat(i.css,\"}\"):i.css;if(e.styleSheet)e.styleSheet.cssText=h(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function p(e,t,n){var i=n.css,o=n.media,r=n.sourceMap;if(o?e.setAttribute(\"media\",o):e.removeAttribute(\"media\"),r&&\"undefined\"!=typeof btoa&&(i+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r)))),\" */\")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var v=null,m=0;function f(e,t){var n,i,o;if(t.singleton){var r=m++;n=v||(v=l(t)),i=u.bind(null,n,r,!1),o=u.bind(null,n,r,!0)}else n=l(t),i=p.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=o());var n=c(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var o=a(n[i]);s[o].references--}for(var r=c(e,t),l=0;l<n.length;l++){var d=a(n[l]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}n=r}}}},833:e=>{\"use strict\";e.exports=coreApis.componentApis.video.playerAgent},414:e=>{\"use strict\";e.exports=coreApis.utils.log}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={id:e,exports:{}};return n[e](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if(\"object\"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&\"function\"==typeof n.then)return n}var r=Object.create(null);o.r(r);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&n;\"object\"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,o.d(r,s),r},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var r={};return(()=>{\"use strict\";o.d(r,{component:()=>O});const e=coreApis.componentApis.video.videoControlBar,t=coreApis.utils,n=coreApis.utils.urls;var i=o(833);const s=coreApis.utils.title;function a(e,t,n){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||\"default\");if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=document.createElement(\"canvas\");class l{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.video=e,this.videoTime=t,this.withDanmaku=n,a(this,\"mimeType\",\"image/png\"),a(this,\"url\",\"\"),a(this,\"blob\",void 0),a(this,\"timeStamp\",(new Date).getTime()),this.createUrl()}async createUrl(){const{logError:e}=await Promise.resolve().then(o.t.bind(o,414,23));if(this.withDanmaku){const e=dq(i.playerAgent.query.video.wrap.selector).getBoundingClientRect(),t=e.width/e.height;t>=this.video.videoWidth/this.video.videoHeight?(c.height=this.video.videoHeight,c.width=this.video.videoHeight*t):(c.width=this.video.videoWidth,c.height=this.video.videoWidth/t)}else c.width=this.video.videoWidth,c.height=this.video.videoHeight;const t=c.getContext(\"2d\");if(null===t)return void e(\"视频截图失败: canvas 未创建或创建失败.\");const n=(c.width-this.video.videoWidth)/2,r=(c.height-this.video.videoHeight)/2;if(t.drawImage(this.video,n,r),this.withDanmaku){const e=dq(\"canvas.bilibili-player-video-danmaku, canvas.dm-canvas\");null!==e&&t.drawImage(e,0,0,c.width,c.height)}try{c.toBlob((t=>{null!==t?(this.blob=t,this.url=URL.createObjectURL(t)):e(\"视频截图失败: 创建 blob 失败.\")}),this.mimeType)}catch(t){e(\"视频截图失败: 操作被浏览器阻止. 这通常发生于电影的试看片段, 请在正片尝试使用截图功能.\")}}get filename(){return`${(0,s.getFriendlyTitle)()} @${this.time.replace(/:/g,\"-\")} ${this.timeStamp.toString()}.png`}get id(){return this.videoTime.toString()+this.timeStamp.toString()}get time(){const e=Math.trunc(this.videoTime/3600).toString(),t=Math.trunc(this.videoTime/60).toString(),n=(this.videoTime%60).toFixed(2);return\"0\"===e?`${t.padStart(2,\"0\")}:${n.padStart(5,\"0\")}`:`${e}:${t.padStart(2,\"0\")}:${n.padStart(5,\"0\")}`}revoke(){URL.revokeObjectURL(this.url)}}const d=coreApis.componentApis.define;var h=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"div\",{staticClass:\"video-screenshot-container\"},[t(\"transition-group\",{staticClass:\"video-screenshot-list\",attrs:{name:\"video-screenshot-list\",tag:\"div\"}},e._l(e.screenshots,(function(n){return t(\"VideoScreenshot\",{key:n.id,attrs:{screenshot:n},on:{discard:function(t){return e.discard(n)}}})})),1),e._v(\" \"),t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.showBatch,expression:\"showBatch\"}],staticClass:\"video-screenshot-batch\"},[t(\"button\",{on:{click:e.saveAll}},[t(\"VIcon\",{attrs:{size:18,icon:\"mdi-content-save\"}}),e._v(\"全部保存\")],1),e._v(\" \"),t(\"button\",{on:{click:e.discardAll}},[t(\"VIcon\",{attrs:{size:18,icon:\"mdi-delete-forever\"}}),e._v(\"全部丢弃\\n    \")],1)])],1)};h._withStripped=!0;const u=coreApis.download,p=coreApis.ui;var v=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"div\",{staticClass:\"video-screenshot-thumbnail\"},[e.objectUrl?t(\"img\",{attrs:{src:e.objectUrl}}):e._e(),e._v(\" \"),e.objectUrl?t(\"div\",{staticClass:\"mask\"},[t(\"a\",{ref:\"link\",staticClass:\"link\",staticStyle:{display:\"none\"},attrs:{target:\"_blank\",href:e.objectUrl,download:e.filename}}),e._v(\" \"),t(\"button\",{staticClass:\"save\",attrs:{title:\"保存\"},on:{click:e.save}},[t(\"VIcon\",{attrs:{size:28,icon:\"mdi-content-save-outline\"}})],1),e._v(\" \"),t(\"button\",{staticClass:\"copy\",attrs:{title:\"复制\"},on:{click:e.copy}},[t(\"VIcon\",{attrs:{size:24,icon:e.showCopyTip?\"mdi-check\":\"mdi-content-copy\"}})],1),e._v(\" \"),t(\"button\",{staticClass:\"discard\",attrs:{title:\"丢弃\"},on:{click:e.discard}},[t(\"VIcon\",{attrs:{size:28,icon:\"mdi-delete-forever-outline\"}})],1),e._v(\" \"),t(\"span\",{staticClass:\"time\"},[e._v(e._s(e.time))])]):t(\"div\",{staticClass:\"loading\",on:{click:e.discard}})])};v._withStripped=!0;const m=Vue.extend({components:{VIcon:p.VIcon},props:{screenshot:{type:l,required:!0}},data:()=>({showCopyTip:!1}),computed:{objectUrl(){return this.screenshot.url},filename(){return this.screenshot.filename},time(){return this.screenshot.time}},methods:{discard(){this.$emit(\"discard\")},async copy(){const e=this.screenshot;await navigator.clipboard.write([new ClipboardItem({[e.mimeType]:e.blob})]),this.showCopyTip=!0,setTimeout((()=>{this.showCopyTip=!1}),1e3)},save(){const e=this.$refs.link;e.addEventListener(\"click\",(e=>{e.stopPropagation()}),{capture:!0,once:!0}),e.click(),this.discard()}}});var f=o(332),b=o.n(f),g=o(388),y=o.n(g),w={insert:\"head\",singleton:!1};b()(y(),w);y().locals;function x(e,t,n,i,o,r,s,a){var c,l=\"function\"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId=\"data-v-\"+r),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,c):[c]}return{exports:e,options:l}}const k=x(m,v,[],!1,null,null,null).exports,_=Vue.extend({components:{VIcon:p.VIcon,VideoScreenshot:k},data:()=>({screenshots:[]}),computed:{showBatch(){return this.screenshots.length>=2}},methods:{discard(e){this.screenshots.splice(this.screenshots.indexOf(e),1),e.revoke()},async saveAll(){const e=new u.DownloadPackage;this.screenshots.forEach((t=>{e.add(t.filename,t.blob,{date:new Date(t.timeStamp)})})),await e.emit(`${(0,s.getFriendlyTitle)()}.zip`),this.discardAll()},discardAll(){this.screenshots.forEach((e=>e.revoke())),this.screenshots=[]}}});var C=o(682),S=o.n(C),j={insert:\"head\",singleton:!1};b()(S(),j);S().locals;const T=x(_,h,[],!1,null,null,null).exports,A=\"video-screenshot-disable\",O=(0,d.defineComponentMetadata)({name:\"videoScreenshot\",displayName:\"启用视频截图\",tags:[componentsTags.video],entry:async()=>{let n;(0,e.addControlBarButton)({name:\"takeScreenshot\",displayName:\"截图\",icon:\"mdi-camera\",order:0,action:async e=>{const{playerAgent:i}=await Promise.resolve().then(o.t.bind(o,833,23)),r=await i.query.video.element();if(r instanceof HTMLVideoElement){const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.currentTime;return new l(e,n,t)}(r,e.shiftKey);n||(n=(0,t.mountVueComponent)(T),document.body.insertAdjacentElement(\"beforeend\",n.$el)),n.screenshots.unshift(i)}else{const{logError:e}=await Promise.resolve().then(o.t.bind(o,414,23));e(\"视频截图失败: 无法定位视频元素, 请尝试右击视频两次后另存为图片, 或将播放策略改为 AV1 或 AVC.\")}}})},description:{\"zh-CN\":\"启用视频快速截图, 将在播放器的时间右边增加一个截图按钮. 装有 `快捷键扩展` 时支持键盘快捷键<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>C</kbd>.\"},urlInclude:n.playerUrls,reload:()=>document.body.classList.remove(A),unload:()=>document.body.classList.add(A),plugin:{displayName:\"视频截图 - 快捷键支持\",setup:e=>{let{addData:t}=e;t(\"keymap.actions\",(e=>{e.takeScreenshot={displayName:\"视频截图\",run:e=>{const{clickElement:t}=e;return t('.be-video-control-bar-extend [data-name=\"takeScreenshot\"]',e)}}})),t(\"keymap.presets\",(e=>{e.takeScreenshot=\"ctrl [shift] alt c\"}))}},commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),r=r.component})()));",
      "metadata": {
        "name": "videoScreenshot",
        "displayName": "启用视频截图",
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "description": {
          "zh-CN": "启用视频快速截图, 将在播放器的时间右边增加一个截图按钮. 装有 `快捷键扩展` 时支持键盘快捷键<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>C</kbd>."
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "rememberVideoSpeed": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/player/remember-speed\"]=t():e[\"video/player/remember-speed\"]=t()}(globalThis,(()=>(()=>{\"use strict\";var e={d:(t,i)=>{for(var o in i)e.o(i,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{component:()=>H});const i=coreApis.meta,o=coreApis.utils.urls,n=coreApis.settings,r=coreApis.utils.log,s=coreApis.pluginApis.hook,a=e=>\"function\"==typeof e?{next:e}:e,l=e=>function e(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=!1;const s=[],l=[];let d=!1;const c=()=>{for(;s.length;)s.pop()();l.length=0,d=!0},p=e=>{d||(l.forEach((t=>{t.error?.(e),(0,n.getGeneralSettings)().devMode&&console.error(e)})),c())},u=e=>{d||l.forEach((t=>{try{t.next(e)}catch(e){p(e)}}))},b=()=>{l.forEach((e=>{e.complete?.()})),c()},h=()=>{if(r)return;const e=t?.({next:u,error:p,complete:b});e&&s.push(e),r=!0},m=e=>null==e?null:(l.push(e),()=>{lodash.pull(l,e)}),f=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return 0===i.length?{subscribe:e=>{const t=m(a(e));return(o?.connect??h)(),t},pipe:f,next:u,error:p,complete:b,...o}:e(i[0],{subscribe:m},o||{connect:h,next:u}).pipe(...i.slice(1))};if(i){const e=t?.({subscribe:e=>i.subscribe({error:p,complete:b,...a(e)}),next:u,error:p,complete:b});e&&s.push(e)}return f()}(e),d=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l((e=>{let{next:i,complete:o}=e;t.forEach((e=>{i(e)})),o()}))},c=(e,t)=>l((i=>{let{next:o}=i;return e.addEventListener(t,o),()=>e.removeEventListener(t,o)})),p=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return l((t=>{let{next:o}=t;e(...i,o)}))},u=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l((e=>{let{next:i,complete:o}=e;const n=[...t],r=()=>{const e=n.shift();e||o(),e.subscribe({next:i,complete:()=>{r()}})};r()}))},b=e=>new Promise(((t,i)=>{const o=e.subscribe({next:e=>{t(e),o()},error:()=>{i(),o()},complete:()=>{i(),o()}})})),h=coreApis.componentApis.video.playerAgent,m=coreApis.lifeCycle,f=coreApis.observer,g=coreApis.utils,v=coreApis.utils.sort,y=e=>t=>{let{subscribe:i,next:o,complete:n,error:r}=t;i(lodash.mapValues({next:o,complete:n,error:r},(t=>e(t))))},S=e=>function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];Promise.resolve().then((()=>e(...i)))},x=e=>{const t=new Set;return e((e=>{lodash.castArray(e).forEach((e=>{t.add(e)}))})),()=>{t.forEach((e=>{e()}))}},w=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l((e=>{let{next:i,error:o,complete:n}=e;return x((e=>{const r=[];let s=0;e(t.map(((e,a)=>e.pipe(y(S)).subscribe({next:e=>{r[a]=e,r.reduce((e=>e+1),0)===t.length&&i(r.slice())},complete:()=>{s++,s===t.length&&n()},error:o})))),e((()=>{r.length=0,s=0}))}))}))},E=e=>t=>{let{subscribe:i,next:o,error:n}=t;i(lodash.debounce((e=>{try{o(e)}catch(e){n(e)}}),e))},R=e=>t=>{let{subscribe:i,next:o}=t;i((t=>{e(t)&&o(t)}))},A=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>{let{next:i,subscribe:o}=e,n=!1;o((e=>{n||t.forEach((e=>i(e))),i(e),n=!0}))}},V=coreApis.pluginApis.data,C=e=>e.split(\",\").map((e=>e.trim().replace(/^\\./,\"\"))).join(\",\"),$=(e,t)=>{const i=t=>{(0,V.registerAndGetData)(e,t)[0]=t},o=(0,V.getData)(e);if(o.length)return[o[0],i];if(t){const e=t();return i(e),[e,i]}return[void 0,i]},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&1===e?\"倍速\":Math.trunc(e)===e?`${e}.0x`:`${e}x`},k=e=>{if(\"倍速\"===e)return 1;const t=/([0-9]*[.]?[0-9]+)x/.exec(e);if(t)return parseFloat(t[1]);throw new Error(`unknown speed text: ${e}`)};function N(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||\"default\");if(\"object\"!=typeof o)return o;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const j=h.playerAgent.provideCustomQuery({video:{speedMenuList:\".bilibili-player-video-btn-speed-menu, .bpx-player-ctrl-playbackrate-menu\",speedMenuItem:\".bilibili-player-video-btn-speed-menu-list, .bpx-player-ctrl-playbackrate-menu-item\",speedNameBtn:\".bilibili-player-video-btn-speed-name, .bpx-player-ctrl-playbackrate-result\",speedContainer:\".bilibili-player-video-btn-speed, .bpx-player-ctrl-playbackrate\",active:\".bilibili-player-active, .bpx-state-active\",show:\".bilibili-player-speed-show, .bpx-state-show\"},bangumi:{speedMenuList:\".squirtle-speed-select-list, .bpx-player-ctrl-playbackrate-menu\",speedMenuItem:\".squirtle-select-item, .bpx-player-ctrl-playbackrate-menu-item\",speedNameBtn:\".squirtle-speed-select-result, .bpx-player-ctrl-playbackrate-result\",speedContainer:\".squirtle-speed-wrap, .bpx-player-ctrl-playbackrate\",active:\".active, .bpx-state-active\",show:\".bilibili-player-speed-show, .bpx-state-show\"}});let T=function(e){return e[e.MIN=0]=\"MIN\",e[e.CURRENT=1]=\"CURRENT\",e[e.MAX=2]=\"MAX\",e}({});const L=(e,t,i)=>{const o=new MutationObserver(i);return o.observe(e,t),o},M=e=>{let[t,i]=e;if(!t)throw new Error(\"speed container element not found!\");if(!i)throw new Error(\"video element not found!\");const o=t.querySelector(j.custom.speedNameBtn.selector),n=t.querySelector(j.custom.speedMenuList.selector);let r,s,a;const d=l(),c=l().pipe((e=>{let t,{subscribe:i,next:o}=e,n=!0;i((e=>{(n||t!==e)&&(n=!1,t=e,o(e))}))}));c.pipe(A(void 0),(e=>{let{subscribe:t,next:i}=e;const o=[];return t((e=>{2===o.length&&o.shift(),o.push(e),2===o.length&&i(o.slice())})),()=>{o.length=0}})).subscribe((e=>{let[t,i]=e;s=t,r=i}));const p=e=>{if(e)switch(e.nodeType){case Node.TEXT_NODE:c.next(k(e.data));break;case Node.ELEMENT_NODE:c.next(k(e.innerHTML));break;default:console.warn(\"The target parameter of updateActiveVideoSpeed must be a Node, and the node type must be one of TEXT_NODE and ELEMENT_NODE\")}},u=()=>{a=lodash([...n.children]).map((e=>lodash.attempt((()=>k(e.textContent))))).reject((e=>lodash.isError(e))).sort((0,v.ascendingSort)()).value()};p(o),u();const b=L(n,{childList:!0,attributes:!0},(e=>{const{attributes:t=[],childList:i=[]}=lodash.groupBy(e,\"type\");i.length&&u(),d.next({attributes:t,childList:i})})),h=L(o,{childList:!0,subtree:!0},(e=>{e.forEach((e=>{const[t]=e.addedNodes;p(t)}))}));return{containerElement:t,videoElement:i,nameBtnElement:o,menuListElement:n,query:e=>(0,g.des)(`./*[(${function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"or\";return e.split(\",\").map(C).flat().map((e=>`contains(@class, \"${e}\")`)).join(` ${t} `)}(j.custom.speedMenuItem.selector)}) and normalize-space()=\"${O(e)}\"]`,n),dispose:()=>{b.disconnect(),h.disconnect()},activeVideoSpeed$:c,menuListElementMutations$:d,getActiveVideoSpeed:()=>r,getOldActiveVideoSpeed:()=>s,getAvailableSpeedValues:()=>a}},P=e=>{const{videoElement:t,menuListElement:i}=e,o=c(i,\"click\").pipe((n=e=>{const{innerText:t,innerHTML:i}=e.target,o=t.trim()||i.trim();return lodash.attempt((()=>k(o)))},e=>{let{subscribe:t,next:i}=e;t((e=>{i(n(e))}))}),R((e=>!lodash.isError(e))));var n;const r=l((e=>{let{next:i}=e,o=t;do{o=Object.getPrototypeOf(o)}while(null===o||!Object.prototype.hasOwnProperty.call(o,\"playbackRate\"));const n=Object.getOwnPropertyDescriptor(o,\"playbackRate\");return Object.defineProperty(o,\"playbackRate\",{set(e){n.set.call(this,e),i(e)}}),()=>{Object.defineProperty(o,\"playbackRate\",n)}})),s=o.pipe((e=>{let t,{subscribe:i,next:o}=e,n=!0;i((e=>{(n||t!==e)&&(n=!1,t=e,o(e))}))})),a=r.pipe((e=>{let t,{subscribe:i,next:o}=e,n=!0;i((e=>{(n||t!==e)&&(n=!1,t=e,o(e))}))})),d=l((e=>{let{next:t}=e;const i=w(s,a);return i.subscribe((e=>{let[i,o]=e;i===o&&t(o)})),()=>i.complete()})).pipe((e=>{let t,{subscribe:i,next:o}=e,n=!0;i((e=>{(n||t!==e)&&(n=!1,t=e,o(e))}))}));let p;a.pipe(E(200),A(void 0),(e=>{let{subscribe:t,next:i}=e;const o=[];return t((e=>{2===o.length&&o.shift(),o.push(e),2===o.length&&i(o.slice())})),()=>{o.length=0}})).subscribe((e=>{let[t]=e;p=t}));const u={menuListElementClickSpeed$:o,menuListElementClickSpeedChange$:s,playbackRate$:r,playbackRateChange$:a,videoSpeedChange$:d};return{...e,...u,dispose:()=>{lodash.values(u).forEach((e=>{e.complete()})),e.dispose()},getOldPlaybackRate:()=>p}},[I]=$(\"speed.NoSuchSpeedMenuItemElementError\",(()=>class extends Error{constructor(e){const t=lodash.attempt((()=>O(e))),i=lodash.isError(t)?String(e):String(t);super(`There is no such speed menu item as ${i}`),this.speed=e,N(this,\"formattedSpeed\",void 0),this.formattedSpeed=i}})),q=e=>{const{query:t,videoElement:i,videoSpeedChange$:o,getOldActiveVideoSpeed:n,getAvailableSpeedValues:r,getActiveVideoSpeed:s}=e,a=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;const r=t(e);if(null==r)throw new I(e);r.click();const s=t=>{if((t??i.playbackRate)!==e)throw new Error(`failed to set ${O(e)} video speed.`)},a=[b(o.pipe(E(Math.max(0,n||0))))];n>0&&a.push(new Promise(((e,t)=>setTimeout((()=>setTimeout(t,n)))))),await Promise.all(a).then(s).catch(s)},l=async()=>{await a(1)},d=async(e,t)=>{if(lodash.isNil(e)&&(e=!1),\"boolean\"==typeof e)e||1===i.playbackRate?await a(n()):await l();else{const i=r();switch(t){case T.MIN:await a(i[e]);break;case T.MAX:await a(i[i.length-1+e]);break;case T.CURRENT:default:{const t=i.indexOf(s());if(-1===t)throw new Error(\"Unexpected Error: The available speed values do not include the active speed value, this should be a bug, please report the issue on github!\");await a(i[t+e])}}}},c=async e=>{try{await d(e,T.CURRENT)}catch(e){if(console.warn(e),!(e instanceof I))throw e}};return Object.assign(e,{set:a,force:async e=>{i.playbackRate=e},reset:l,toggle:d,step:c,increase:async()=>{await c(1)},decrease:async()=>{await c(-1)}})},G=()=>$(\"speed.speedContext\"),D=()=>$(\"speed.buildArguments$\",(()=>{return l().pipe((e=e=>e.settings.enabled,t=>{let{subscribe:i,next:o}=t;const n=new Set;return i((t=>{const i=n.size;e(t)?n.add(t):n.delete(t),n.size!==i&&o([...n])})),()=>{n.clear()}}));var e})),U=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lodash.identity;const[t,i]=G();if(t)return t;let o,n;const[r]=$(\"lifeCycleComponentLoaded$\",(()=>c(unsafeWindow,m.LifeCycleEventTypes.ComponentsLoaded))),[s]=D(),[a]=$(\"speed.videoChange$\",(()=>p(f.videoChange).pipe(R((e=>{let{aid:t,cid:i}=e;return t||i}))))),[h]=$(\"speed.speedContext$\",(()=>l((t=>{let{next:i}=t;return w(a,u(d([]),s),r).subscribe((t=>{let[r,s]=t;const[l]=G();l?.dispose(),n?.(\"context update\");const d=new Promise(((e,t)=>{o=e,n=t}));Promise.all([Promise.all([j.custom.speedContainer(),j.query.video.element()]).then(o),d]).then((e=>{let[,t]=e;return t})).then(M).then(P).then(q).then((e=>Object.assign(e,{videoIdObject:r,speedContext$:h,videoChange$:a}))).then(e(s)).then(i).catch((e=>console.error(e)))}))}))));return h.subscribe(i),b(h)};function B(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||\"default\");if(\"object\"!=typeof o)return o;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class W{constructor(e,t){this.entryContext=e,this.enabled$=t,B(this,\"speedContext\",void 0),B(this,\"settings\",void 0),B(this,\"coreApis\",void 0),B(this,\"metadata\",void 0),B(this,\"options\",void 0),B(this,\"getVideoIdObject\",void 0),B(this,\"getAvailableSpeedValues\",void 0),B(this,\"getOldActiveVideoSpeed\",void 0),B(this,\"forceVideoSpeed\",void 0),B(this,\"getVideoSpeed\",void 0),B(this,\"setVideoSpeed\",void 0),B(this,\"resetVideoSpeed\",void 0),B(this,\"toggleVideoSpeed\",void 0),B(this,\"increaseVideoSpeed\",void 0),B(this,\"decreaseVideoSpeed\",void 0),lodash.assign(this,e,{options:e.settings.options}),this.migrate?.(),lodash.assign(this,lodash.mapValues(W.contextMap,(e=>async function(){const t=await U(),i=lodash.get(t,e),o=lodash.isFunction(i)?await i(...arguments):i;return o})))}}B(W,\"create\",void 0),B(W,\"contextMap\",{getVideoIdObject:\"videoIdObject\",getAvailableSpeedValues:\"getAvailableSpeedValues\",getOldActiveVideoSpeed:\"getOldActiveVideoSpeed\",getVideoSpeed:\"videoElement.playbackRate\",setVideoSpeed:\"set\",forceVideoSpeed:\"force\",resetVideoSpeed:\"reset\",toggleVideoSpeed:\"toggle\",increaseVideoSpeed:\"increase\",decreaseVideoSpeed:\"decrease\"}),U((e=>t=>{const i=lodash.omit(t,\"dispose\"),o=e.map((e=>e.getSpeedContextMixin(i)));if(o.length>1){const e=lodash.intersection(...o.map(Object.keys));if(e.length)throw new Error(`In the registered speed component, there is an implementation of getSpeedContextMixin that causes the speed context to be mixed in ambiguous.\\nThe repeated key names are ${e.join(\", \")}`)}lodash.assign(i,...o);const r=[];return e.forEach((e=>{const t=lodash(e.settings.options).mapValues(((t,i)=>p(n.addComponentListener,`${e.metadata.name}.${i}`).pipe((e=>{let t,{subscribe:i,next:o}=e,n=!0;i((e=>{(n||t!==e)&&(n=!1,t=e,o(e))}))})))).mapKeys(((e,t)=>`${t}$`)).value();r.push(...lodash.values(t)),e.options=new Proxy(e.settings.options,{get:(e,i,o)=>lodash.isSymbol(i)?Reflect.get(e,i,o):!Reflect.has(e,i)&&i.endsWith(\"$\")?t[i]:Reflect.get(e,i,o)}),e.speedContext=i,e.onSpeedContext(i),e.settings.enabled&&lodash(t).entries().forEach((t=>{let[i,o]=t;o.next(e.settings.options[i.slice(0,-1)])}))})),{...i,dispose:()=>{r.forEach((e=>e.complete())),t.dispose()}}})),W.create=function(e){const t=l().pipe((e=>{let t,{subscribe:i,next:o}=e,n=!0;i((e=>{(n||t!==e)&&(n=!1,t=e,o(e))}))}));return{...e,entry:i=>{const o=lodash.attempt((()=>new this(i,t)));if(o instanceof Error)return(0,r.logError)(o),null;const[n]=D();return t.subscribe((()=>{n.next(o)})),t.next(!0),(0,s.getHook)(`speed.component.${e.name}`).after(o),o},reload:()=>t.next(!0),unload:()=>t.next(!1)}};const F=coreApis.toast;function X(e,t,i){return(t=function(e){var t=function(e,t){if(\"object\"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||\"default\");if(\"object\"!=typeof o)return o;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class z extends W{getSpeedContextMixin(e){var t=this;let{videoIdObject:i,set:o,reset:n,toggle:r,getActiveVideoSpeed:s,getOldActiveVideoSpeed:a}=e;const l=async()=>{const e=this.getRestoredVideoSpeed(i);await o(e??1)};return{reset:l,toggle:async function(){for(var e=arguments.length,i=new Array(e),d=0;d<e;d++)i[d]=arguments[d];const[c,...p]=i;if(null!=c&&\"boolean\"!=typeof c)return void r(c,...p);const{fixGlobalSpeed:u,individualRemember:b,globalSpeed:h}=t.options,m=u&&!b;c||s()===(m?h:1)?await o(a()):await(m?l():n())}}}migrate(){const{options:e}=this.settings;let t=!1;e.speed&&(e.globalSpeed=+e.speed||1,delete e.speed,t=!0),e.individualRememberList&&(e.individualRememberRecord=lodash.cloneDeep(e.individualRememberList),delete e.individualRememberList,t=!0),t&&(e.fixGlobalSpeed=!1,e.showRestoreTip=!0,delete e.remember,F.Toast.show(\"「扩展倍速」和倍速快捷键插件成为独立的组件或插件啦！详情请阅读组件描述.（此弹出提醒仅显示一次）\",\"【记忆倍速】迁移提醒\",8e3))}onSpeedContext(e){let{videoSpeedChange$:t,videoIdObject:i}=e;this.options.individualRemember$.subscribe((e=>{e&&(this.options.fixGlobalSpeed=!0)})),this.options.fixGlobalSpeed$.subscribe((e=>{e||(this.options.individualRemember=!1)}));const o=this.getRestoredVideoSpeed(i);o&&requestIdleCallback((async()=>{try{if(await this.setVideoSpeed(o,1e3),this.options.showRestoreTip){let e=`已还原到 ${O(o)} 倍速`;this.options.individualRemember&&null!=this.matchRememberSpeed()&&(e=`【独立倍速视频】${e}`),F.Toast.info(e,this.metadata.displayName,3e3)}}catch(e){const t=`${this.metadata.displayName} - 倍速还原操作失败`,i=e instanceof I?`没有 ${e.formattedSpeed} 这样的倍速项`:String(e);F.Toast.error(i,t,5e3),console.error(e)}})),t.subscribe((e=>{this.settings.enabled&&(this.options.individualRemember?e!==+this.options.globalSpeed&&this.rememberSpeed(e):this.options.fixGlobalSpeed||this.rememberSpeed(e,null))}))}getRestoredVideoSpeed(e){return this.options.individualRemember&&this.matchRememberSpeed(e.aid)||this.readGlobalVideoSpeed()}readGlobalVideoSpeed(){return parseFloat(String(this.options.globalSpeed))}matchRememberSpeed(e){for(const[t,i]of Object.entries(this.options.individualRememberRecord))if(i.some((t=>t.toString()===z.getAid(e).toString())))return parseFloat(t);return null}rememberSpeed(e,t){if(lodash.isNull(t))return void(this.options.globalSpeed=e);lodash.isUndefined(t)&&(t=z.getAid(t));const i=lodash.castArray(t);this.forgetSpeed(i),this.options.individualRememberRecord={...this.options.individualRememberRecord,[e]:lodash.unionWith(this.options.individualRememberRecord[e],i,z.aidComparator)}}forgetSpeed(e){lodash.isNil(e)&&(e=z.getAid(e));const t=lodash.castArray(e);this.options.individualRememberRecord=lodash(this.options.individualRememberRecord).mapValues((e=>lodash(e).pullAllWith(t,z.aidComparator).uniqWith(z.aidComparator).value())).pickBy((e=>e.length)).value()}}X(z,\"getAid\",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:unsafeWindow.aid;if(!e)throw new Error(\"aid is unknown\");return e})),X(z,\"aidComparator\",((e,t)=>e.toString()===t.toString()));const H=z.create({name:\"rememberVideoSpeed\",displayName:\"记忆倍速\",author:{name:\"JLoeve\",link:\"https://github.com/LonelySteve\"},description:{\"zh-CN\":`\\n\\n> 提高视频播放器的倍速记忆体验，可实现跨页共享倍速，也可以按视频分别记忆倍速.\\n\\n#### 🔧 **选项**\\n\\n- \\`全局记忆倍速值\\`：默认情况下，这是跨页共享的倍速值，如果启用「各视频分别记忆」，则作为从未独立记忆倍速视频的初始倍速值.\\n- \\`固定全局倍速值\\`：默认情况下，全局倍速值将随着用户改变视频倍速而改变，打开此选项后，全局记忆倍速值不再受倍速调整的影响.\\n- \\`各视频分别记忆\\`：打开此选项后，将按不同视频分别记忆倍速，对于从未被记忆过倍速的视频，将采用全局记忆倍速值，选项「固定全局倍速值」在此情况下强制生效.\\n- \\`弹出还原倍速提示\\`：打开此选项后，每次成功还原倍速后都会弹出提示.\\n\\n#### 🌈 **温馨提示**\\n\\n「扩展倍速」和倍速相关的快捷键插件已分离为单独的组件或插件.\\n\\n请根据自身需要：\\n\\n- 前往「组件」页面安装[「扩展倍速」](${i.meta.compilationInfo.altCdn.root}registry/dist/components/video/player/extend-speed.js)组件\\n- 前往「插件」页面安装[「快捷键扩展 - 视频倍速」](${i.meta.compilationInfo.altCdn.root}registry/dist/plugins/video/player/speed.js)插件.\\n\\n*如果想要清除当前视频的记忆状态，需要安装「快捷键扩展 - 视频倍速」插件.*\\n`},tags:[componentsTags.video],urlInclude:o.playerUrls,options:{globalSpeed:{displayName:\"全局记忆倍速值\",defaultValue:1,validator:e=>lodash.clamp(parseFloat(e),.0625,16)||1},fixGlobalSpeed:{displayName:\"固定全局倍速值\",defaultValue:!1},individualRemember:{displayName:\"各视频分别记忆\",defaultValue:!1},individualRememberRecord:{displayName:\"独立记忆倍速记录\",defaultValue:{},hidden:!0},showRestoreTip:{displayName:\"弹出还原倍速提示\",defaultValue:!0}},commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"});return t=t.component})()));",
      "metadata": {
        "name": "rememberVideoSpeed",
        "displayName": "记忆倍速",
        "author": {
          "name": "JLoeve",
          "link": "https://github.com/LonelySteve"
        },
        "description": {
          "zh-CN": "\n\n> 提高视频播放器的倍速记忆体验，可实现跨页共享倍速，也可以按视频分别记忆倍速.\n\n#### 🔧 **选项**\n\n- `全局记忆倍速值`：默认情况下，这是跨页共享的倍速值，如果启用「各视频分别记忆」，则作为从未独立记忆倍速视频的初始倍速值.\n- `固定全局倍速值`：默认情况下，全局倍速值将随着用户改变视频倍速而改变，打开此选项后，全局记忆倍速值不再受倍速调整的影响.\n- `各视频分别记忆`：打开此选项后，将按不同视频分别记忆倍速，对于从未被记忆过倍速的视频，将采用全局记忆倍速值，选项「固定全局倍速值」在此情况下强制生效.\n- `弹出还原倍速提示`：打开此选项后，每次成功还原倍速后都会弹出提示.\n\n#### 🌈 **温馨提示**\n\n「扩展倍速」和倍速相关的快捷键插件已分离为单独的组件或插件.\n\n请根据自身需要：\n\n- 前往「组件」页面安装[「扩展倍速」]((e,t)=>`https://${r}/gh/${t||i}/Bilibili-Evolved@${e}/`registry/dist/components/video/player/extend-speed.js)组件\n- 前往「插件」页面安装[「快捷键扩展 - 视频倍速」]((e,t)=>`https://${r}/gh/${t||i}/Bilibili-Evolved@${e}/`registry/dist/plugins/video/player/speed.js)插件.\n\n*如果想要清除当前视频的记忆状态，需要安装「快捷键扩展 - 视频倍速」插件.*\n"
        },
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "options": {
          "globalSpeed": {
            "displayName": "全局记忆倍速值",
            "defaultValue": 1
          },
          "fixGlobalSpeed": {
            "displayName": "固定全局倍速值",
            "defaultValue": false
          },
          "individualRemember": {
            "displayName": "各视频分别记忆",
            "defaultValue": false
          },
          "individualRememberRecord": {
            "displayName": "独立记忆倍速记录",
            "defaultValue": {},
            "hidden": true
          },
          "showRestoreTip": {
            "displayName": "弹出还原倍速提示",
            "defaultValue": true
          }
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {
          "extend": true,
          "extendList": [
            2.5,
            3
          ],
          "individualRemember": false,
          "globalSpeed": 1,
          "fixGlobalSpeed": false,
          "individualRememberRecord": {},
          "showRestoreTip": true
        }
      }
    },
    "fullFeedsContent": {
      "code": "!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports[\"feeds/full-content\"]=e():t[\"feeds/full-content\"]=e()}(globalThis,(()=>(()=>{var t,e,n={67:(t,e,n)=>{var o=n(218)((function(t){return t[1]}));o.push([t.id,\".bili-rich-text__content.folded {\\n  -webkit-line-clamp: unset !important;\\n  display: block !important;\\n  height: auto !important;\\n  max-height: unset !important;\\n}\\n.bili-rich-text__content.folded ~ .bili-rich-text__action {\\n  display: none !important;\\n}\\n\\n.card .main-content .expand-btn,\\n.card .main-content .content-ellipsis {\\n  display: none !important;\\n}\\n.card .main-content .content-full {\\n  -webkit-line-clamp: unset !important;\\n  display: block !important;\\n  height: auto !important;\\n  max-height: unset !important;\\n}\",\"\"]),t.exports=o},218:t=>{\"use strict\";\n// eslint-disable-next-line func-names\nt.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?\"@media \".concat(e[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\ne.i=function(t,n,o){\"string\"==typeof t&&(\n// eslint-disable-next-line no-param-reassign\nt=[[null,t,\"\"]]);var r={};if(o)for(var i=0;i<this.length;i++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[i][0];null!=a&&(r[a]=!0)}for(var c=0;c<t.length;c++){var s=[].concat(t[c]);o&&r[s[0]]||(n&&(s[2]?s[2]=\"\".concat(n,\" and \").concat(s[2]):s[2]=n),e.push(s))}},e}},56:(t,e,n)=>{var o=n(67);o&&o.__esModule&&(o=o.default),t.exports=\"string\"==typeof o?o:o.toString()},660:t=>{function e(t){var e=new Error(\"Cannot find module '\"+t+\"'\");throw e.code=\"MODULE_NOT_FOUND\",e}e.keys=()=>[],e.resolve=e,e.id=660,t.exports=e},230:t=>{\"use strict\";t.exports=\"不管内容多长, 总是完全展开动态的内容. (专栏不算)\\n\"}},o={};function r(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={id:t,exports:{}};return n[t](i,i.exports,r),i.exports}e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if(\"object\"==typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&\"function\"==typeof n.then)return n}var i=Object.create(null);r.r(i);var a={};t=t||[null,e({}),e([]),e(e)];for(var c=2&o&&n;\"object\"==typeof c&&!~t.indexOf(c);c=e(c))Object.getOwnPropertyNames(c).forEach((t=>a[t]=()=>n[t]));return a.default=()=>n,r.d(i,a),i},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})};var i={};return(()=>{\"use strict\";r.d(i,{component:()=>n});const t=coreApis.componentApis.define,e=coreApis.utils.urls,n=(0,t.defineComponentMetadata)({name:\"fullFeedsContent\",instantStyles:[{name:\"full-feeds-content\",style:()=>Promise.resolve().then(r.t.bind(r,56,23))}],displayName:\"展开动态内容\",tags:[componentsTags.style,componentsTags.feeds],urlInclude:e.feedsUrlsWithoutDetail,entry:none,commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\",description:(()=>{const t=r(660);return{...Object.fromEntries(t.keys().map((e=>[e.match(/index\\.(.+)\\.md$/)[1],t(e)]))),\"zh-CN\":()=>Promise.resolve().then(r.t.bind(r,230,17)).then((t=>t.default))}})()})})(),i=i.component})()));",
      "metadata": {
        "name": "fullFeedsContent",
        "displayName": "展开动态内容",
        "tags": [
          {
            "name": "style",
            "displayName": "样式",
            "color": "#8BC34A",
            "icon": "mdi-palette-outline",
            "order": 2
          },
          {
            "name": "feeds",
            "displayName": "动态",
            "color": "#00ACC1",
            "icon": "mdi-pinwheel-outline",
            "order": 3
          }
        ],
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5",
        "description": {}
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "columnUnlock": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"utils/column-unlock\"]=t():e[\"utils/column-unlock\"]=t()}(globalThis,(()=>(()=>{var e,t,o={280:e=>{function t(e){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}t.keys=()=>[],t.resolve=t,t.id=280,e.exports=t},780:e=>{\"use strict\";e.exports=\"(原名: 专栏文字选择, 现在专栏已经不限制选中文字了)\\n\\n避免专栏的文字复制后在最后带上出处信息, 更贴近原生的复制行为.\\n\"},356:e=>{\"use strict\";e.exports=coreApis.style}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var c=n[e]={exports:{}};return o[e](c,c.exports,r),c.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(o,n){if(1&n&&(o=this(o)),8&n)return o;if(\"object\"==typeof o&&o){if(4&n&&o.__esModule)return o;if(16&n&&\"function\"==typeof o.then)return o}var c=Object.create(null);r.r(c);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&o;\"object\"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>o[e]));return i.default=()=>o,r.d(c,i),c},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var c={};return(()=>{\"use strict\";r.d(c,{component:()=>s});const e=coreApis.componentApis.define;let t=!1,o=!0;const n=\"column-unlock\",i=async()=>{o=!0;const{addStyle:e}=await Promise.resolve().then(r.t.bind(r,356,23));e(\".article-holder { user-select: text !important }\",n),t||(t=!0,document.addEventListener(\"copy\",(e=>{o&&e.stopImmediatePropagation()}),{capture:!0}))},s=(0,e.defineComponentMetadata)({name:\"columnUnlock\",displayName:\"专栏复制优化\",entry:i,reload:i,unload:async()=>{document.getElementById(n)?.remove(),o=!1},tags:[componentsTags.utils],urlInclude:[\"//www.bilibili.com/read/\"],commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\",description:(()=>{const e=r(280);return{...Object.fromEntries(e.keys().map((t=>[t.match(/index\\.(.+)\\.md$/)[1],e(t)]))),\"zh-CN\":()=>Promise.resolve().then(r.t.bind(r,780,17)).then((e=>e.default))}})()})})(),c=c.component})()));",
      "metadata": {
        "name": "columnUnlock",
        "displayName": "专栏复制优化",
        "tags": [
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          }
        ],
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5",
        "description": {}
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "urlParamsClean": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"utils/url-params-clean\"]=t():e[\"utils/url-params-clean\"]=t()}(globalThis,(()=>(()=>{var e,t,r={912:e=>{function t(e){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}t.keys=()=>[],t.resolve=t,t.id=912,e.exports=t},799:e=>{\"use strict\";e.exports=\"自动删除网址中的多余跟踪参数。请注意这会导致浏览器历史记录出现重复的标题（分别是转换前后的网址），并可能导致后退要多退几次。\\n\"},110:e=>{\"use strict\";e.exports=coreApis.lifeCycle},391:e=>{\"use strict\";e.exports=coreApis.observer}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return r[e](i,i.exports,a),i.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if(\"object\"==typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&\"function\"==typeof r.then)return r}var i=Object.create(null);a.r(i);var n={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;\"object\"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>n[e]=()=>r[e]));return n.default=()=>r,a.d(i,n),i},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return(()=>{\"use strict\";a.d(i,{component:()=>s});const e=coreApis.pluginApis.data,t=coreApis.componentApis.define,r=coreApis.utils,o=\"网址参数清理\",n=(0,coreApis.utils.log.useScopedConsole)(o),s=(0,t.defineComponentMetadata)({name:\"urlParamsClean\",displayName:o,entry:async()=>{if((0,r.isNotHtml)()||(0,r.isIframe)())return;\n/* spell-checker: disable */const[t]=(0,e.registerAndGetData)(\"urlParamsClean.noClean\",[\"videocard_series\"]),[o]=(0,e.registerAndGetData)(\"urlParamsClean.params\",[\"spm_id_from\",\"from_source\",\"from_spmid\",\"from\",\"seid\",\"share_source\",\"share_medium\",\"share_plat\",\"share_tag\",\"share_session_id\",\"share_from\",\"bbid\",\"ts\",\"timestamp\",\"unique_k\",\"rt\",\"tdsourcetag\",\"accept_quality\",\"broadcast_type\",\"current_qn\",\"current_quality\",\"playurl_h264\",\"playurl_h265\",\"quality_description\",\"network\",\"network_status\",\"platform_network_status\",\"p2p_type\",\"referfrom\",\"visit_id\",\"bsource\",\"spm\",\"hotRank\",\"-Arouter\",\"vd_source\",\"is_story_h5\",\"buvid\",\"plat_id\",\"goFrom\",\"jumpLinkType\",\"hasBack\",\"noTitleBar\",\"msource\",\"live_from\",\"plat_id\",\"extra_jump_from\",\"subarea_rank\",\"popular_rank\",\"launch_id\",\"spmid\"]),[i]=(0,e.registerAndGetData)(\"urlParamsClean.siteSpecifiedParams\",[{match:/\\/\\/www\\.bilibili\\.com\\/audio\\/(au[\\d]+|mycollection)/,param:\"type\"},{match:/\\/\\/live\\.bilibili\\.com\\//,param:\"session_id\"},{match:/\\/\\/live\\.bilibili\\.com\\//,param:\"is_room_feed\"},{match:/\\/\\/www\\.bilibili\\.com\\/bangumi\\//,param:\"theme\"},{match:/\\/\\/www\\.bilibili\\.com\\/video\\//,param:\"mid\"},{match:/\\/\\/www\\.bilibili\\.com\\/video\\//,param:\"up_id\"},{match:/\\/\\/mall\\.bilibili\\.com\\//,param:\"noReffer\"}]),[s]=(0,e.registerAndGetData)(\"urlParamsClean.tailingSlash\",[]),l=e=>{const a=new URL(e,location.origin),n=[...new URLSearchParams(a.search).entries()].map((e=>{let[t,r]=e;return`${t}=${encodeURIComponent(r)}`}));if(n.some((e=>t.some((t=>e.includes(t))))))return e;const l=n.filter((e=>!o.some((t=>e.startsWith(`${t}=`)))&&!i.some((t=>{let{match:r,param:o}=t;return document.URL.match(r)&&e.startsWith(`${o}=`)})))).join(\"&\");s.forEach((e=>{let{match:t}=e;const o=a.pathname;(0,r.matchPattern)(o,t)&&o.endsWith(\"/\")&&(a.pathname=o.slice(0,o.length-1))}));const c=l?`?${l}`:\"\";return a.search=c,a.toString()},c=e=>function(t,r,o){for(var a=arguments.length,i=new Array(a>3?a-3:0),s=3;s<a;s++)i[s-3]=arguments[s];if(null==o)return e.call(this,t,r,o,...i);const c=(()=>{try{return new URL(o,location.origin+location.pathname).toString()}catch(e){return n.warn(\"History API URL\",`解析失败: ${o}`),o}})(),m=l(c);return m!==o?(n.log(\"History API 拦截\",c,m),e.call(this,t,r,m,...i)):e.call(this,t,r,o,...i)},m=unsafeWindow.history.pushState;unsafeWindow.history.pushState=c(m);const u=unsafeWindow.history.replaceState;unsafeWindow.history.replaceState=c(u);const{fullyLoaded:p}=await Promise.resolve().then(a.t.bind(a,110,23)),{urlChange:d}=await Promise.resolve().then(a.t.bind(a,391,23));p((()=>{d((()=>(()=>{const e=l(document.URL);e!==document.URL&&(n.log(\"直接清理\",document.URL,e),window.history.replaceState(history.state,\"\",e))})()))}))},tags:[componentsTags.utils],\n/* spell-checker: disable */\nurlExclude:[/game\\.bilibili\\.com\\/fgo/,/live\\.bilibili\\.com\\/p\\/html\\/live-app-hotrank\\//],commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\",description:(()=>{const e=a(912);return{...Object.fromEntries(e.keys().map((t=>[t.match(/index\\.(.+)\\.md$/)[1],e(t)]))),\"zh-CN\":()=>Promise.resolve().then(a.t.bind(a,799,17)).then((e=>e.default))}})()})})(),i=i.component})()));",
      "metadata": {
        "name": "urlParamsClean",
        "displayName": "网址参数清理",
        "tags": [
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          }
        ],
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5",
        "description": {}
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "collapseLiveSideBar": {
      "code": "!function(e,r){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=r():\"function\"==typeof define&&define.amd?define([],r):\"object\"==typeof exports?exports[\"live/side-bar\"]=r():e[\"live/side-bar\"]=r()}(globalThis,(()=>(()=>{var e,r,t={975:(e,r,t)=>{var n=t(218)((function(e){return e[1]}));n.push([e.id,'.side-bar-cntr {\\n  transition: 0.24s ease-out !important;\\n  overflow: visible !important;\\n  transform: translateZ(0) translateX(100%) !important;\\n}\\n.side-bar-cntr:hover {\\n  transform: translateZ(0) !important;\\n}\\n.side-bar-cntr::after {\\n  right: calc(100% + 4px);\\n  transform: translateY(-50%) rotate(45deg);\\n  width: 8px;\\n  height: 8px;\\n  border-radius: 2px;\\n  box-sizing: border-box;\\n  border: 4px solid #aaa;\\n  border-top-color: transparent;\\n  border-right-color: transparent;\\n}\\nbody.dark .side-bar-cntr::after {\\n  border: 4px solid #eee;\\n  border-top-color: transparent;\\n  border-right-color: transparent;\\n}\\n.side-bar-cntr::before {\\n  right: calc(100% - 8px);\\n  transform: translateY(-50%);\\n  width: 32px;\\n  height: 48px;\\n  border-radius: 8px 0 0 8px;\\n  background-color: #fff;\\n  border: 1px solid #e9eaec;\\n}\\nbody.dark .side-bar-cntr::before {\\n  background-color: #222;\\n  border-color: transparent;\\n}\\n.side-bar-cntr::before, .side-bar-cntr::after {\\n  content: \"\";\\n  transition: 0.24s ease-out;\\n  cursor: pointer;\\n  position: fixed;\\n  top: 50%;\\n}\\n.side-bar-cntr:hover::after, .side-bar-cntr:hover::before {\\n  opacity: 0;\\n}',\"\"]),e.exports=n},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var r=[];return r.toString=function(){return this.map((function(r){var t=e(r);return r[2]?\"@media \".concat(r[2],\" {\").concat(t,\"}\"):t})).join(\"\")},\n// eslint-disable-next-line func-names\nr.i=function(e,t,n){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var o={};if(n)for(var a=0;a<this.length;a++){\n// eslint-disable-next-line prefer-destructuring\nvar i=this[a][0];null!=i&&(o[i]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);n&&o[c[0]]||(t&&(c[2]?c[2]=\"\".concat(t,\" and \").concat(c[2]):c[2]=t),r.push(c))}},r}},978:(e,r,t)=>{var n=t(975);n&&n.__esModule&&(n=n.default),e.exports=\"string\"==typeof n?n:n.toString()}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={id:e,exports:{}};return t[e](a,a.exports,o),a.exports}r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(t,n){if(1&n&&(t=this(t)),8&n)return t;if(\"object\"==typeof t&&t){if(4&n&&t.__esModule)return t;if(16&n&&\"function\"==typeof t.then)return t}var a=Object.create(null);o.r(a);var i={};e=e||[null,r({}),r([]),r(r)];for(var s=2&n&&t;\"object\"==typeof s&&!~e.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>t[e]));return i.default=()=>t,o.d(a,i),a},o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),o.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var a={};return(()=>{\"use strict\";o.d(a,{component:()=>t});const e=coreApis.componentApis.define,r=coreApis.utils.urls,t=(0,e.defineComponentMetadata)({name:\"collapseLiveSideBar\",entry:none,instantStyles:[{name:\"collapseLiveSideBar\",style:()=>Promise.resolve().then(o.t.bind(o,978,23))}],displayName:\"自动收起直播侧栏\",description:'自动收起直播间右边偏下的侧栏. (上面有个 \"关注\" 的面板)',tags:[componentsTags.live,componentsTags.style],urlInclude:r.liveUrls,commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),a=a.component})()));",
      "metadata": {
        "name": "collapseLiveSideBar",
        "displayName": "自动收起直播侧栏",
        "description": "自动收起直播间右边偏下的侧栏. (上面有个 \"关注\" 的面板)",
        "tags": [
          {
            "name": "live",
            "displayName": "直播",
            "color": "#26A69A",
            "icon": "mdi-video-wireless-outline",
            "order": 4
          },
          {
            "name": "style",
            "displayName": "样式",
            "color": "#8BC34A",
            "icon": "mdi-palette-outline",
            "order": 2
          }
        ],
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "bvidConvert": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/bvid-convert\"]=t():e[\"video/bvid-convert\"]=t()}(globalThis,(()=>(()=>{var e={795:(e,t,n)=>{var i=n(218)((function(e){return e[1]}));i.push([e.id,\".bvid-convert {\\n  order: -1;\\n  flex-direction: column;\\n  border-radius: 4px;\\n  padding: 6px 8px;\\n  -webkit-user-select: text;\\n          user-select: text;\\n  box-sizing: border-box;\\n  box-shadow: 0 0 0 1px rgba(136, 136, 136, 0.2666666667);\\n  background-color: #fff;\\n}\\nbody.dark .bvid-convert {\\n  background-color: #333;\\n}\\n.bvid-convert-item {\\n  font-size: 14px;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n}\\n.bvid-convert-item-copy {\\n  transition: transform 0.3s ease-out;\\n  cursor: pointer;\\n}\\n.bvid-convert-item-copy:active {\\n  transform: scale(0.9);\\n}\",\"\"]),e.exports=i},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,n,i){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var o={};if(i)for(var r=0;r<this.length;r++){\n// eslint-disable-next-line prefer-destructuring\nvar s=this[r][0];null!=s&&(o[s]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);i&&o[c[0]]||(n&&(c[2]?c[2]=\"\".concat(n,\" and \").concat(c[2]):c[2]=n),t.push(c))}},t}},332:(e,t,n)=>{\"use strict\";var i,o=function(){return void 0===i&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\ni=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},i=[],o=0;o<e.length;o++){var r=e[o],c=t.base?r[0]+t.base:r[0],d=n[c]||0,l=\"\".concat(c,\" \").concat(d);n[c]=d+1;var u=a(l),p={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(s[u].references++,s[u].updater(p)):s.push({identifier:l,updater:b(p,t),references:1}),i.push(l)}return i}function d(e){var t=document.createElement(\"style\"),i=e.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),\"function\"==typeof e.insert)e.insert(t);else{var s=r(e.insert||\"head\");if(!s)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");s.appendChild(t)}return t}var l,u=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join(\"\\n\")});function p(e,t,n,i){var o=n?\"\":i.media?\"@media \".concat(i.media,\" {\").concat(i.css,\"}\"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function v(e,t,n){var i=n.css,o=n.media,r=n.sourceMap;if(o?e.setAttribute(\"media\",o):e.removeAttribute(\"media\"),r&&\"undefined\"!=typeof btoa&&(i+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r)))),\" */\")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var f=null,m=0;function b(e,t){var n,i,o;if(t.singleton){var r=m++;n=f||(f=d(t)),i=p.bind(null,n,r,!1),o=p.bind(null,n,r,!0)}else n=d(t),i=v.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=o());var n=c(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var o=a(n[i]);s[o].references--}for(var r=c(e,t),d=0;d<n.length;d++){var l=a(n[d]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}n=r}}}},54:(e,t,n)=>{\"use strict\";n.r(t),n.d(t,{default:()=>w});var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"div\",{staticClass:\"bvid-convert\"},[e.aid?t(\"div\",{staticClass:\"bvid-convert-item\"},[e._v(\"\\n    \"+e._s(e.aid)+\"\\n    \"),t(\"div\",{staticClass:\"bvid-convert-item-copy\",attrs:{title:\"复制链接\"},on:{click:function(t){return e.copyLink(\"aid\")}}},[t(\"VIcon\",{attrs:{size:16,icon:e.aidCopied?\"mdi-check\":\"mdi-link\"}})],1)]):e._e(),e._v(\" \"),e.bvid?t(\"div\",{staticClass:\"bvid-convert-item\"},[e._v(\"\\n    \"+e._s(e.bvid)+\"\\n    \"),t(\"div\",{staticClass:\"bvid-convert-item-copy\",attrs:{title:\"复制链接\"},on:{click:function(t){return e.copyLink(\"bvid\")}}},[t(\"VIcon\",{attrs:{size:16,icon:e.bvidCopied?\"mdi-check\":\"mdi-link\"}})],1)]):e._e()])};i._withStripped=!0;const o=coreApis.observer,r=coreApis.settings;var s=n(200);const a=coreApis.utils,c=coreApis.utils.title;var d=n(457);const l=coreApis.ui,{options:u}=(0,r.getComponentSettings)(\"bvidConvert\");var p=function(e){return e.Aid=\"aid\",e.Bvid=\"bvid\",e}(p||{});const v=[p.Aid,p.Bvid],f=[e=>{let{id:t,query:n}=e;return v.some((e=>n.includes(`${e}=`)))?`https://www.bilibili.com/video/${t}`:null},e=>{let{id:t}=e;return d.bangumiUrls.some((e=>(0,a.matchUrlPattern)(e)))?`https://www.bilibili.com/video/${t}`:null},e=>{let{id:t,query:n}=e;const i=new URLSearchParams(n),o=new URLSearchParams;for(const e of[\"p\",\"t\"]){const t=i.get(e);t&&o.set(e,t)}return`https://www.bilibili.com/video/${t}${o.size>0?`?${o.toString()}`:\"\"}`}],m=Vue.extend({components:{VIcon:l.VIcon},data:()=>({aid:\"\",aidCopied:!1,bvid:\"\",bvidCopied:!1}),async mounted(){(0,o.videoChange)((async()=>{this.aid=`av${unsafeWindow.aid}`,this.bvid=unsafeWindow.bvid;const e=await(0,s.select)(\".av-link,.bv-link,.bvid-link\");e&&(this.bvid=e.innerHTML.trim())}))},methods:{async copyLink(e){if(this[`${e}Copied`])return;const t={query:location.search,url:location.origin+location.pathname,id:this[e]},n=f.map((e=>e(t))).filter((e=>null!==e))[0];u.copyWithTitle?await navigator.clipboard.writeText(`${(0,c.getFriendlyTitle)()} ${n}`):await navigator.clipboard.writeText(n),this[`${e}Copied`]=!0,setTimeout((()=>this[`${e}Copied`]=!1),1e3)}}});var b=n(332),h=n.n(b),y=n(795),g=n.n(y),x={insert:\"head\",singleton:!1};h()(g(),x);g().locals;var C=function(e,t,n,i,o,r,s,a){var c,d=\"function\"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),i&&(d.functional=!0),r&&(d._scopeId=\"data-v-\"+r),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=c):o&&(c=a?function(){o.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(d.functional){d._injectStyles=c;var l=d.render;d.render=function(e,t){return c.call(t),l(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:d}}(m,i,[],!1,null,null,null);const w=C.exports},200:e=>{\"use strict\";e.exports=coreApis.spinQuery},457:e=>{\"use strict\";e.exports=coreApis.utils.urls}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={id:i,exports:{}};return e[i](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return(()=>{\"use strict\";n.d(i,{component:()=>s});const e=coreApis.componentApis.define;var t=n(200),o=n(457);const r=(0,e.defineOptionsMetadata)({copyWithTitle:{defaultValue:!1,displayName:\"复制链接时带上标题\"}}),s=(0,e.defineComponentMetadata)({name:\"bvidConvert\",displayName:\"BV 号转换\",options:r,entry:none,description:{\"zh-CN\":\"在功能面板中显示视频的 AV 号和 BV 号.\"},tags:[componentsTags.video,componentsTags.utils],widget:{component:()=>Promise.resolve().then(n.bind(n,54)).then((e=>e.default)),condition:t.hasVideo},urlInclude:o.videoAndBangumiUrls,commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),i=i.component})()));",
      "metadata": {
        "name": "bvidConvert",
        "displayName": "BV 号转换",
        "options": {
          "copyWithTitle": {
            "defaultValue": false,
            "displayName": "复制链接时带上标题"
          }
        },
        "description": {
          "zh-CN": "在功能面板中显示视频的 AV 号和 BV 号."
        },
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          },
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          }
        ],
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {
          "copyWithTitle": false
        }
      }
    },
    "livePip": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"live/pip\"]=t():e[\"live/pip\"]=t()}(self,(function(){return function(){var e={580:function(e,t,n){var r=n(645)((function(e){return e[1]}));r.push([e.id,\".live-pip .be-icon {\\n  transform: scale(0.9);\\n}\",\"\"]),e.exports=r},645:function(e){\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,n,r){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var o={};if(r)for(var i=0;i<this.length;i++){\n// eslint-disable-next-line prefer-destructuring\nvar c=this[i][0];null!=c&&(o[c]=!0)}for(var a=0;a<e.length;a++){var s=[].concat(e[a]);r&&o[s[0]]||(n&&(s[2]?s[2]=\"\".concat(n,\" and \").concat(s[2]):s[2]=n),t.push(s))}},t}},379:function(e,t,n){\"use strict\";var r,o=function(){return void 0===r&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\nr=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),c=[];function a(e){for(var t=-1,n=0;n<c.length;n++)if(c[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],o=0;o<e.length;o++){var i=e[o],s=t.base?i[0]+t.base:i[0],u=n[s]||0,l=\"\".concat(s,\" \").concat(u);n[s]=u+1;var f=a(l),d={css:i[1],media:i[2],sourceMap:i[3]};-1!==f?(c[f].references++,c[f].updater(d)):c.push({identifier:l,updater:h(d,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement(\"style\"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),\"function\"==typeof e.insert)e.insert(t);else{var c=i(e.insert||\"head\");if(!c)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");c.appendChild(t)}return t}var l,f=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join(\"\\n\")});function d(e,t,n,r){var o=n?\"\":r.media?\"@media \".concat(r.media,\" {\").concat(r.css,\"}\"):r.css;if(e.styleSheet)e.styleSheet.cssText=f(t,o);else{var i=document.createTextNode(o),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(i,c[t]):e.appendChild(i)}}function p(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute(\"media\",o):e.removeAttribute(\"media\"),i&&\"undefined\"!=typeof btoa&&(r+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i)))),\" */\")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var v=null,m=0;function h(e,t){var n,r,o;if(t.singleton){var i=m++;n=v||(v=u(t)),r=d.bind(null,n,i,!1),o=d.bind(null,n,i,!0)}else n=u(t),r=p.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=o());var n=s(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=a(n[r]);c[o].references--}for(var i=s(e,t),u=0;u<n.length;u++){var l=a(n[u]);0===c[l].references&&(c[l].updater(),c.splice(l,1))}n=i}}}},573:function(e,t,n){\"use strict\";n.r(t),n.d(t,{default:function(){return d}});var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)(\"DefaultWidget\",{staticClass:\"live-pip\",attrs:{name:\"画中画\",icon:\"mdi-picture-in-picture-bottom-right\"},on:{click:function(t){return e.togglePip()}}})};r._withStripped=!0;var o=coreApis.ui,i=Vue.extend({components:{DefaultWidget:o.DefaultWidget},methods:{async togglePip(){document.pictureInPictureElement?document.exitPictureInPicture():dq(\"video\")?.requestPictureInPicture()}}}),c=n(379),a=n.n(c),s=n(580),u=n.n(s),l={insert:\"head\",singleton:!1};a()(u(),l),u().locals;var f=function(e,t,n,r,o,i,c,a){var s,u=\"function\"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId=\"data-v-\"+i),c?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(c)},u._ssrRegister=s):o&&(s=a?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),s)if(u.functional){u._injectStyles=s;var l=u.render;u.render=function(e,t){return s.call(t),l(e,t)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,s):[s]}return{exports:e,options:u}}(i,r,[],!1,null,null,null);f.options.__file=\"registry/lib/components/live/pip/LivePip.vue\";var d=f.exports}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var r={};return function(){\"use strict\";n.d(r,{component:function(){return t}});var e=coreApis.utils.urls;const t={name:\"livePip\",displayName:\"直播画中画\",description:{\"zh-CN\":\"在直播间的功能面板中启用画中画支持, 不过现在好像 b 站已经直接支持了, 后续可能会删掉这个功能.\"},entry:none,tags:[componentsTags.live],widget:{component:()=>Promise.resolve().then(n.bind(n,573)).then((e=>e.default)),condition:()=>\"requestPictureInPicture\"in HTMLVideoElement.prototype},urlInclude:e.liveUrls,commitHash:\"9c9c5fd27250d3d9c2e74eb367ebb825cba14ab1\",coreVersion:\"2.1.9\"}}(),r=r.component}()}));",
      "metadata": {
        "name": "livePip",
        "displayName": "直播画中画",
        "description": {
          "zh-CN": "在直播间的功能面板中启用画中画支持, 不过现在好像 b 站已经直接支持了, 后续可能会删掉这个功能."
        },
        "tags": [
          {
            "name": "live",
            "displayName": "直播",
            "color": "#26A69A",
            "icon": "mdi-video-wireless-outline",
            "order": 4
          }
        ],
        "commitHash": "9c9c5fd27250d3d9c2e74eb367ebb825cba14ab1",
        "coreVersion": "2.1.9"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "extendFeedsLive": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"feeds/extend-live\"]=t():e[\"feeds/extend-live\"]=t()}(globalThis,(()=>(()=>{var e,t,n={975:(e,t,n)=>{var i=n(218)((function(e){return e[1]}));i.push([e.id,\".be-live-list {\\n  display: flex;\\n  align-items: stretch;\\n  flex-direction: column;\\n  gap: 12px;\\n  padding: 12px 16px;\\n  border-radius: 4px;\\n  font-size: 12px;\\n  color: #000;\\n  background-color: #fff;\\n}\\nbody.dark .be-live-list {\\n  background-color: #444;\\n  color: #eee;\\n}\\n.be-live-list-header {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n}\\n.be-live-list-title {\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n  font-size: 14px;\\n}\\n.be-live-list-count {\\n  opacity: 0.5;\\n  font-size: 12px;\\n}\\n.be-live-list-actions {\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n}\\n.be-live-list-refresh {\\n  cursor: pointer;\\n  padding: 2px;\\n}\\n.be-live-list-refresh .be-icon {\\n  opacity: 0.5;\\n  transition: 0.35s ease-out;\\n}\\n.be-live-list-refresh:hover .be-icon {\\n  transform: rotate(360deg);\\n  opacity: 1;\\n  color: var(--theme-color);\\n}\\n.be-live-list-more {\\n  opacity: 0.5;\\n  padding: 2px;\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n}\\n.be-live-list-more:hover {\\n  opacity: 1;\\n  color: var(--theme-color);\\n}\\n.be-live-list-search {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n.be-live-list-search .be-icon {\\n  opacity: 0.6;\\n}\\n.be-live-list-search .be-textbox {\\n  flex-grow: 1;\\n}\\n.be-live-list-content {\\n  overflow: auto;\\n  scrollbar-width: none !important;\\n  overscroll-behavior: contain;\\n  display: flex;\\n  align-items: stretch;\\n  flex-direction: column;\\n  gap: 8px;\\n  max-height: calc(100vh - 358px);\\n}\\n.be-live-list-content::-webkit-scrollbar {\\n  height: 0 !important;\\n  width: 0 !important;\\n}\\nbody.enable-feeds-filter .be-live-list-content {\\n  max-height: calc(100vh - 414px);\\n}\\nbody.feeds-filter-side-block-profile .be-live-list-content {\\n  max-height: calc(100vh - 218px);\\n}\\n.be-live-list-item {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  cursor: pointer;\\n}\\n.be-live-list-item-avatar {\\n  overflow: hidden;\\n  border-radius: 50%;\\n  display: flex;\\n  border: 1px solid rgba(136, 136, 136, 0.2666666667);\\n}\\n.be-live-list-item-info {\\n  display: flex;\\n  align-items: stretch;\\n  flex-direction: column;\\n  gap: 2px;\\n  flex-grow: 1;\\n  width: 0;\\n}\\n.be-live-list-item-title, .be-live-list-item-user {\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n.be-live-list-item-title {\\n  font-size: 14px;\\n  transition: 0.2s ease-out;\\n}\\n.be-live-list-item-user {\\n  opacity: 0.6;\\n}\\n.be-live-list-item:hover .be-live-list-item-title {\\n  color: var(--theme-color);\\n}\",\"\"]),e.exports=i},135:(e,t,n)=>{var i=n(218)((function(e){return e[1]}));i.push([e.id,\".live-up-list,\\n.bili-dyn-home--member .bili-dyn-live-users {\\n  display: none !important;\\n}\",\"\"]),e.exports=i},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,n,i){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var o={};if(i)for(var r=0;r<this.length;r++){\n// eslint-disable-next-line prefer-destructuring\nvar s=this[r][0];null!=s&&(o[s]=!0)}for(var l=0;l<e.length;l++){var a=[].concat(e[l]);i&&o[a[0]]||(n&&(a[2]?a[2]=\"\".concat(n,\" and \").concat(a[2]):a[2]=n),t.push(a))}},t}},332:(e,t,n)=>{\"use strict\";var i,o=function(){return void 0===i&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\ni=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function l(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},i=[],o=0;o<e.length;o++){var r=e[o],a=t.base?r[0]+t.base:r[0],c=n[a]||0,d=\"\".concat(a,\" \").concat(c);n[a]=c+1;var p=l(d),f={css:r[1],media:r[2],sourceMap:r[3]};-1!==p?(s[p].references++,s[p].updater(f)):s.push({identifier:d,updater:h(f,t),references:1}),i.push(d)}return i}function c(e){var t=document.createElement(\"style\"),i=e.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),\"function\"==typeof e.insert)e.insert(t);else{var s=r(e.insert||\"head\");if(!s)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");s.appendChild(t)}return t}var d,p=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join(\"\\n\")});function f(e,t,n,i){var o=n?\"\":i.media?\"@media \".concat(i.media,\" {\").concat(i.css,\"}\"):i.css;if(e.styleSheet)e.styleSheet.cssText=p(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function u(e,t,n){var i=n.css,o=n.media,r=n.sourceMap;if(o?e.setAttribute(\"media\",o):e.removeAttribute(\"media\"),r&&\"undefined\"!=typeof btoa&&(i+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r)))),\" */\")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var v=null,m=0;function h(e,t){var n,i,o;if(t.singleton){var r=m++;n=v||(v=c(t)),i=f.bind(null,n,r,!1),o=f.bind(null,n,r,!0)}else n=c(t),i=u.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=o());var n=a(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var o=l(n[i]);s[o].references--}for(var r=a(e,t),c=0;c<n.length;c++){var d=l(n[c]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}n=r}}}},406:(e,t,n)=>{var i=n(135);i&&i.__esModule&&(i=i.default),e.exports=\"string\"==typeof i?i:i.toString()},416:(e,t,n)=>{\"use strict\";n.r(t),n.d(t,{default:()=>u});var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"div\",{staticClass:\"be-live-list\"},[t(\"div\",{staticClass:\"be-live-list-header\"},[t(\"div\",{staticClass:\"be-live-list-title\"},[e._v(\"\\n      正在直播\\n      \"),t(\"div\",{staticClass:\"be-live-list-count\"},[e._v(\"(\"+e._s(e.items.length)+\")\")])]),e._v(\" \"),t(\"div\",{staticClass:\"be-live-list-actions\"},[e.loaded?t(\"div\",{staticClass:\"be-live-list-refresh\",attrs:{title:\"刷新\"},on:{click:e.refresh}},[t(\"VIcon\",{attrs:{icon:\"mdi-refresh\",size:16}})],1):e._e(),e._v(\" \"),t(\"a\",{staticClass:\"be-live-list-more\",attrs:{target:\"_blank\",href:\"https://link.bilibili.com/p/center/index#/user-center/follow/1\"}},[e._v(\"\\n        更多\\n        \"),t(\"VIcon\",{attrs:{icon:\"right-arrow\",size:14}})],1)])]),e._v(\" \"),t(\"div\",{staticClass:\"be-live-list-search\"},[t(\"VIcon\",{attrs:{icon:\"search\",size:18}}),e._v(\" \"),t(\"TextBox\",{attrs:{placeholder:\"搜索\"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:\"keyword\"}})],1),e._v(\" \"),t(\"div\",{staticClass:\"be-live-list-content\"},[e.loaded?e._e():t(\"VLoading\"),e._v(\" \"),e.loaded&&0===e.filteredItems.length?t(\"VEmpty\"):e._e(),e._v(\" \"),e._l(e.filteredItems,(function(n){return t(\"a\",{key:n.roomid,staticClass:\"be-live-list-item\",attrs:{target:\"_blank\",href:n.link}},[t(\"div\",{staticClass:\"be-live-list-item-avatar\"},[t(\"DpiImage\",{attrs:{src:n.face,alt:n.title,size:36}})],1),e._v(\" \"),t(\"div\",{staticClass:\"be-live-list-item-info\"},[t(\"div\",{staticClass:\"be-live-list-item-title\",attrs:{title:n.title}},[e._v(\"\\n          \"+e._s(e.decodeTitle(n.title))+\"\\n        \")]),e._v(\" \"),t(\"div\",{staticClass:\"be-live-list-item-user\",attrs:{title:n.uname}},[e._v(\"\\n          \"+e._s(n.uname)+\"\\n        \")])])])}))],2)])};i._withStripped=!0;const o=coreApis.ui,r=coreApis.ajax,s=Vue.extend({components:{VIcon:o.VIcon,TextBox:o.TextBox,DpiImage:o.DpiImage,VEmpty:o.VEmpty,VLoading:o.VLoading},data:()=>({items:[],loaded:!1,keyword:\"\"}),computed:{filteredItems(){return this.keyword?this.items.filter((e=>{const t=t=>e[t].toString().toLowerCase().includes(this.keyword.toLowerCase());return t(\"title\")||t(\"uname\")||t(\"roomid\")||t(\"uid\")})):this.items}},created(){this.refresh()},methods:{decodeTitle:e=>{const t=document.createElement(\"textarea\");return t.innerHTML=e,t.value},async refresh(){try{this.items=[],this.loaded=!1;const e=`https://api.live.bilibili.com/xlive/web-ucenter/v1/xfetter/GetWebList?hit_ab=true&_=${Date.now()}`,t=await(0,r.getJsonWithCredentials)(e);this.items=t.data.rooms.map((e=>{const{room_id:t,face:n,title:i,uname:o,uid:r}=e;return{cover:n,face:n,uname:o,title:i,roomid:t,pic:\"\",online:0,uid:r,link:`https://live.bilibili.com/${t}`}}))}finally{this.loaded=!0}}}});var l=n(332),a=n.n(l),c=n(975),d=n.n(c),p={insert:\"head\",singleton:!1};a()(d(),p);d().locals;var f=function(e,t,n,i,o,r,s,l){var a,c=\"function\"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),r&&(c._scopeId=\"data-v-\"+r),s?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=a):o&&(a=l?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),a)if(c.functional){c._injectStyles=a;var d=c.render;c.render=function(e,t){return a.call(t),d(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,a):[a]}return{exports:e,options:c}}(s,i,[],!1,null,null,null);const u=f.exports},405:e=>{function t(e){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}t.keys=()=>[],t.resolve=t,t.id=405,e.exports=t},478:e=>{\"use strict\";e.exports=\"替换动态的 `正在直播` 面板, 能够显示超过 10 个的直播间.\\n\"}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={id:e,exports:{}};return n[e](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if(\"object\"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&\"function\"==typeof n.then)return n}var r=Object.create(null);o.r(r);var s={};e=e||[null,t({}),t([]),t(t)];for(var l=2&i&&n;\"object\"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,o.d(r,s),r},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var r={};return(()=>{\"use strict\";o.d(r,{component:()=>l});const e=coreApis.componentApis.define,t=coreApis.componentApis.styledComponent,n=coreApis.spinQuery,i=coreApis.utils,s=coreApis.utils.log,l=(0,e.defineComponentMetadata)({name:\"extendFeedsLive\",displayName:\"直播信息扩充\",entry:(0,t.styledComponentEntry)((()=>Promise.resolve().then(o.t.bind(o,406,23))),(async()=>{const e=(0,s.useScopedConsole)(\"extendFeedsLive\"),t=await(0,n.select)(\".bili-dyn-home--member aside.left\");let r;t||e.error(\"aside not found\");if((l=t.childNodes[t.childNodes.length-1]).nodeType!==Node.COMMENT_NODE&&l instanceof HTMLElement&&\"section\"===l.tagName.toLowerCase()&&l.classList.contains(\"sticky\"))r=await(0,n.select)((()=>dq(t,\"section.sticky\")));else{const e=document.createElement(\"section\");e.classList.add(\"sticky\"),t.appendChild(e),r=e}var l;r||e.error(\"container not found\");const a=await Promise.resolve().then(o.bind(o,416)).then((e=>e.default)),c=(0,i.mountVueComponent)(a);r.appendChild(c.$el)})),tags:[componentsTags.feeds,componentsTags.live],urlInclude:[/^https:\\/\\/t\\.bilibili\\.com\\/$/],commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\",description:(()=>{const e=o(405);return{...Object.fromEntries(e.keys().map((t=>[t.match(/index\\.(.+)\\.md$/)[1],e(t)]))),\"zh-CN\":()=>Promise.resolve().then(o.t.bind(o,478,17)).then((e=>e.default))}})()})})(),r=r.component})()));",
      "metadata": {
        "name": "extendFeedsLive",
        "displayName": "直播信息扩充",
        "tags": [
          {
            "name": "feeds",
            "displayName": "动态",
            "color": "#00ACC1",
            "icon": "mdi-pinwheel-outline",
            "order": 3
          },
          {
            "name": "live",
            "displayName": "直播",
            "color": "#26A69A",
            "icon": "mdi-video-wireless-outline",
            "order": 4
          }
        ],
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5",
        "description": {}
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "imageExporter": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"utils/image-exporter\"]=t():e[\"utils/image-exporter\"]=t()}(globalThis,(()=>(()=>{var e,t,n={827:(e,t,n)=>{\"use strict\";n.r(t),n.d(t,{default:()=>m});var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"DefaultWidget\",{attrs:{name:\"导出图片\",icon:\"mdi-export\",disabled:e.busy},on:{click:function(t){return e.exportImages()}}})};i._withStripped=!0;var o=n(375),r=n(444);const s=coreApis.settings;var a=n(391),l=n(605);const u=coreApis.utils.log;var c=n(674);const d=coreApis.ui;var p=function(e,t,n,i,o,r,s,a){var l,u=\"function\"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),r&&(u._scopeId=\"data-v-\"+r),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},u._ssrRegister=l):o&&(l=a?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(e,t){return l.call(t),c(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:u}}(Vue.extend({components:{DefaultWidget:d.DefaultWidget},data:()=>({busy:!1}),methods:{async exportImages(){const{columnFormat:e}=(0,s.getComponentSettings)(\"imageExporter\").options,t=a.Toast.info(\"下载中...\",\"导出图片\");this.busy=!0;try{const n=(0,c.getTitleVariablesFromDate)(new Date(\n// eslint-disable-next-line no-underscore-dangle\n1e3*(unsafeWindow.__INITIAL_STATE__?.readInfo?.publish_time??0))),i={cv:document.URL.match(/read\\/cv(\\d+)/)?.at(1),publishYear:n.year,publishMonth:n.month,publishDay:n.day,publishHour:n.hour,publishMinute:n.minute,publishSecond:n.second,publishMillisecond:n.millisecond},s=[],u=dq(\".banner-image .card-image__image\"),d=(0,l.retrieveImageUrl)(u);d&&(s.push({...d,name:`${(0,c.formatTitle)(e,!1,{n:\"1\",...i})}${d.extension}`}),console.log(u,d,s));if(dqa(\".article-content :is(img.normal-img, .normal-img img)\").forEach((t=>{const n=(0,l.retrieveImageUrl)(t);n&&s.push({...n,name:`${(0,c.formatTitle)(e,!1,{n:(s.length+1).toString(),...i})}${n.extension}`})})),0===s.length)return void a.Toast.info(\"此页面没有检测到任何可导出图片.\",\"图片导出\");let p=0;const m=await Promise.all(s.map((async e=>{let{url:n}=e;const i=await(0,o.getBlob)(n);return p++,t.message=`下载中... (${p}/${s.length})`,i}))),h=new r.DownloadPackage;m.forEach(((e,t)=>h.add(s[t].name,e))),await h.emit(`${(0,c.formatTitle)(e,!1,{n:\"\",...i})}.zip`)}catch(e){(0,u.logError)(e)}finally{this.busy=!1,t.close()}}}}),i,[],!1,null,null,null);const m=p.exports},79:e=>{function t(e){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}t.keys=()=>[],t.resolve=t,t.id=79,e.exports=t},87:e=>{\"use strict\";e.exports=\"可以批量导出某个地方的图片, 目前支持动态和专栏.\\n\\n动态文件名变量:\\n- `n`: 第 n 张图\\n- `id`: 动态 ID\\n- `user`: 用户名\\n- `userID`: 用户 ID\\n- 动态发布时间:\\n  - `publishYear`\\n  - `publishMonth`\\n  - `publishDay`\\n  - `publishHour`\\n  - `publishMinute`\\n  - `publishSecond`\\n  - `publishMillisecond`\\n- 被转发的数据 (如果不是转发类型的动态, 则和上面的对应变量相同):\\n  - `originalID`: 被转发的动态 ID\\n  - `originalUser`: 被转发的用户名\\n  - `originalUserID`: 被转发用户 ID\\n  - 被转发的动态发布时间:\\n    - `originalPublishYear`\\n    - `originalPublishMonth`\\n    - `originalPublishDay`\\n    - `originalPublishHour`\\n    - `originalPublishMinute`\\n    - `originalPublishSecond`\\n    - `originalPublishMillisecond`\\n\\n专栏文件名变量:\\n- `n`: 第 n 张图\\n- `title`: 专栏标题\\n- `cv`: 专栏 cv 号\\n- 专栏发布时间:\\n  - `publishYear`\\n  - `publishMonth`\\n  - `publishDay`\\n  - `publishHour`\\n  - `publishMinute`\\n  - `publishSecond`\\n  - `publishMillisecond`\\n\"},375:e=>{\"use strict\";e.exports=coreApis.ajax},444:e=>{\"use strict\";e.exports=coreApis.download},391:e=>{\"use strict\";e.exports=coreApis.toast},674:e=>{\"use strict\";e.exports=coreApis.utils.title},605:e=>{\"use strict\";e.exports=coreApis.utils}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return n[e](r,r.exports,o),r.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if(\"object\"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&\"function\"==typeof n.then)return n}var r=Object.create(null);o.r(r);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&n;\"object\"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,o.d(r,s),r},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var r={};return(()=>{\"use strict\";o.d(r,{component:()=>d});const e=coreApis.componentApis.define;var t=o(605);const n=coreApis.utils.urls,i=coreApis.componentApis.feeds.api;var s=o(375),a=o(444),l=o(391),u=o(674);const c=(0,e.defineOptionsMetadata)({columnFormat:{defaultValue:\"[title][ - n]\",displayName:\"专栏图片命名格式\",multiline:!0},feedFormat:{defaultValue:\"[user][ - id][ - n]\",displayName:\"动态图片命名格式\",multiline:!0}}),d=(0,e.defineComponentMetadata)({name:\"imageExporter\",displayName:\"图片批量导出\",tags:[componentsTags.feeds,componentsTags.utils],entry:async e=>{await(async e=>{let{settings:{options:o}}=e;if(!n.feedsUrls.some((e=>(0,t.matchUrlPattern)(e))))return;(0,i.forEachFeedsCard)({added:e=>{(0,i.addMenuItem)(e,{className:\"image-export\",text:\"导出图片\",action:async()=>{const n=[];if(dqa(e.element,\".main-content .img-content, .bili-album__preview__picture__img, .bili-album .preview__picture__img, .bili-dyn-gallery__image img\").forEach((e=>{const i=(0,t.retrieveImageUrl)(e);i&&!n.some((e=>{let{url:t}=e;return t===i.url}))&&n.push(i)})),0===n.length)return void l.Toast.info(\"此条动态没有检测到任何图片.\",\"导出图片\");const i=l.Toast.info(\"下载中...\",\"导出图片\");let r=0;const c=(0,t.getVue2Data)(e.element),d=lodash.get(c,\"data.modules.module_author\",{}),p=lodash.get(c,\"data.orig.modules.module_author\",{}),m=(0,u.getTitleVariablesFromDate)(new Date(1e3*d.pub_ts)),h=(0,u.getTitleVariablesFromDate)(new Date(1e3*(p.pub_ts??d.pub_ts))),g={id:e.id,user:e.username,userID:d.mid?.toString(),originalUser:e.repostUsername??e.username,originalUserID:p.mid?.toString()??d.mid?.toString(),originalID:lodash.get(c,\"data.orig.id_str\",e.id),publishYear:m.year,publishMonth:m.month,publishDay:m.day,publishHour:m.hour,publishMinute:m.minute,publishSecond:m.second,publishMillisecond:m.millisecond,originalPublishYear:h.year,originalPublishMonth:h.month,originalPublishDay:h.day,originalPublishHour:h.hour,originalPublishMinute:h.minute,originalPublishSecond:h.second,originalPublishMillisecond:h.millisecond},f=await Promise.all(n.map((async e=>{let{url:t}=e;const o=await(0,s.getBlob)(t);return r++,i.message=`下载中... (${r}/${n.length})`,o}))),b=new a.DownloadPackage,{feedFormat:_}=o;f.forEach(((e,t)=>{const i={n:(t+1).toString(),...g};b.add(`${(0,u.formatTitle)(_,!1,i)}${n[t].extension}`,e)})),i.close();const y={n:\"\",...g};await b.emit(`${(0,u.formatTitle)(_,!1,y)}.zip`)}})}})})(e)},widget:{condition:()=>n.columnUrls.some((e=>(0,t.matchUrlPattern)(e))),component:()=>Promise.resolve().then(o.bind(o,827)).then((e=>e.default))},urlInclude:[...n.feedsUrls,...n.columnUrls],options:c,commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\",description:(()=>{const e=o(79);return{...Object.fromEntries(e.keys().map((t=>[t.match(/index\\.(.+)\\.md$/)[1],e(t)]))),\"zh-CN\":()=>Promise.resolve().then(o.t.bind(o,87,17)).then((e=>e.default))}})()})})(),r=r.component})()));",
      "metadata": {
        "name": "imageExporter",
        "displayName": "图片批量导出",
        "tags": [
          {
            "name": "feeds",
            "displayName": "动态",
            "color": "#00ACC1",
            "icon": "mdi-pinwheel-outline",
            "order": 3
          },
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          }
        ],
        "options": {
          "columnFormat": {
            "defaultValue": "[title][ - n]",
            "displayName": "专栏图片命名格式",
            "multiline": true
          },
          "feedFormat": {
            "defaultValue": "[user][ - id][ - n]",
            "displayName": "动态图片命名格式",
            "multiline": true
          }
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5",
        "description": {}
      },
      "settings": {
        "enabled": true,
        "options": {
          "columnFormat": "[title][ - n]",
          "feedFormat": "[user][ - id][ - n]"
        }
      }
    },
    "removePlayerPopup": {
      "code": "!function(e,o){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=o():\"function\"==typeof define&&define.amd?define([],o):\"object\"==typeof exports?exports[\"video/player/remove-popup\"]=o():e[\"video/player/remove-popup\"]=o()}(globalThis,(()=>(()=>{var e,o,p={246:(e,o,p)=>{var r=p(218)((function(e){return e[1]}));r.push([e.id,\"body.remove-player-popup .bili-danmaku-x-cmd-shrink,\\nbody.remove-player-popup .bili-cmd-shrink {\\n  display: none !important;\\n}\\nbody.remove-player-popup-combo-likes .bili-danmaku-x-guide,\\nbody.remove-player-popup-combo-likes .bili-guide,\\nbody.remove-player-popup-combo-likes .bilibili-player-video-popup-three,\\nbody.remove-player-popup-combo-likes .bilibili-player-video-popup-three-animate,\\nbody.remove-player-popup-combo-likes .bilibili-player-video-popup-follow,\\nbody.remove-player-popup-combo-likes .bilibili-player-video-popup-there-cyc,\\nbody.remove-player-popup-combo-likes .bpx-player-popup-three,\\nbody.remove-player-popup-combo-likes .bpx-player-popup-animate,\\nbody.remove-player-popup-combo-likes .bpx-player-popup-follow,\\nbody.remove-player-popup-combo-likes .bpx-player-popup-cyc {\\n  display: none !important;\\n}\\nbody.remove-player-popup-related-videos .bili-danmaku-x-link,\\nbody.remove-player-popup-related-videos .bili-link,\\nbody.remove-player-popup-related-videos .bilibili-player-video-link,\\nbody.remove-player-popup-related-videos .bilibili-player-link,\\nbody.remove-player-popup-related-videos .bpx-player-link {\\n  display: none !important;\\n}\\nbody.remove-player-popup-votes .bili-danmaku-x-vote,\\nbody.remove-player-popup-votes .bili-vote,\\nbody.remove-player-popup-votes .bilibili-player-video-popup-vote,\\nbody.remove-player-popup-votes .bpx-player-popup-dm-close,\\nbody.remove-player-popup-votes .bpx-player-popup-dm-shrink,\\nbody.remove-player-popup-votes .bpx-player-popup-vote {\\n  display: none !important;\\n}\\nbody.remove-player-popup-rates .bili-danmaku-x-score,\\nbody.remove-player-popup-rates .bili-score,\\nbody.remove-player-popup-rates .bilibili-player-score,\\nbody.remove-player-popup-rates .bpx-player-popup-dm-close,\\nbody.remove-player-popup-rates .bpx-player-score-summary-wrap,\\nbody.remove-player-popup-rates .bpx-player-score,\\nbody.remove-player-popup-rates .bili-qoeFeedback {\\n  display: none !important;\\n}\\nbody.remove-player-popup-reservations .bili-danmaku-x-reserve,\\nbody.remove-player-popup-reservations .bili-reserve,\\nbody.remove-player-popup-reservations .bpx-player-reserve {\\n  display: none !important;\\n}\\nbody.remove-player-popup-promotions .bili-danmaku-x-cmtime,\\nbody.remove-player-popup-promotions .bili-cmtime,\\nbody.remove-player-popup-promotions .bpx-player-cmtime,\\nbody.remove-player-popup-promotions .bpx-player-skipcard {\\n  display: none !important;\\n}\",\"\"]),e.exports=r},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var o=[];return o.toString=function(){return this.map((function(o){var p=e(o);return o[2]?\"@media \".concat(o[2],\" {\").concat(p,\"}\"):p})).join(\"\")},\n// eslint-disable-next-line func-names\no.i=function(e,p,r){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var t={};if(r)for(var n=0;n<this.length;n++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[n][0];null!=a&&(t[a]=!0)}for(var i=0;i<e.length;i++){var l=[].concat(e[i]);r&&t[l[0]]||(p&&(l[2]?l[2]=\"\".concat(p,\" and \").concat(l[2]):l[2]=p),o.push(l))}},o}},428:(e,o,p)=>{var r=p(246);r&&r.__esModule&&(r=r.default),e.exports=\"string\"==typeof r?r:r.toString()},912:e=>{function o(e){var o=new Error(\"Cannot find module '\"+e+\"'\");throw o.code=\"MODULE_NOT_FOUND\",o}o.keys=()=>[],o.resolve=o,o.id=912,e.exports=o},541:e=>{\"use strict\";e.exports=\"删除视频播放器中出现的各种弹窗, 类别可在选项中分别选择. 如果之前点了收起弹窗, 则收起后的小弹窗则会直接删除. (不受类别选择影响)\\n\"}},r={};function t(e){var o=r[e];if(void 0!==o)return o.exports;var n=r[e]={id:e,exports:{}};return p[e](n,n.exports,t),n.exports}o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,t.t=function(p,r){if(1&r&&(p=this(p)),8&r)return p;if(\"object\"==typeof p&&p){if(4&r&&p.__esModule)return p;if(16&r&&\"function\"==typeof p.then)return p}var n=Object.create(null);t.r(n);var a={};e=e||[null,o({}),o([]),o(o)];for(var i=2&r&&p;\"object\"==typeof i&&!~e.indexOf(i);i=o(i))Object.getOwnPropertyNames(i).forEach((e=>a[e]=()=>p[e]));return a.default=()=>p,t.d(n,a),n},t.d=(e,o)=>{for(var p in o)t.o(o,p)&&!t.o(e,p)&&Object.defineProperty(e,p,{enumerable:!0,get:o[p]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),t.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var n={};return(()=>{\"use strict\";t.d(n,{component:()=>a});const e=coreApis.componentApis.define,o=coreApis.settings,p=coreApis.utils.urls,r=\"removePlayerPopup\",a=(0,e.defineComponentMetadata)({name:r,entry:e=>{let{settings:p,metadata:r}=e;const{options:t}=p,{kebabCase:n}=lodash;(0,o.addComponentListener)(r.name,(e=>{document.body.classList.toggle(n(r.name),e)}),!0),Object.keys(t).forEach((e=>{(0,o.addComponentListener)(`${r.name}.${e}`,(o=>{document.body.classList.toggle(`${n(r.name)}-${n(e)}`,o)}),!0)}))},instantStyles:[{name:r,style:()=>Promise.resolve().then(t.t.bind(t,428,23))}],displayName:\"删除视频弹窗\",tags:[componentsTags.video,componentsTags.style],urlInclude:p.playerUrls,options:{votes:{defaultValue:!1,displayName:\"投票\"},relatedVideos:{defaultValue:!0,displayName:\"关联视频\"},comboLikes:{defaultValue:!0,displayName:\"关注/三连\"},rates:{defaultValue:!0,displayName:\"评分\"},reservations:{defaultValue:!0,displayName:\"预告\"},promotions:{defaultValue:!0,displayName:\"心动\"}},commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\",description:(()=>{const e=t(912);return{...Object.fromEntries(e.keys().map((o=>[o.match(/index\\.(.+)\\.md$/)[1],e(o)]))),\"zh-CN\":()=>Promise.resolve().then(t.t.bind(t,541,17)).then((e=>e.default))}})()})})(),n=n.component})()));",
      "metadata": {
        "name": "removePlayerPopup",
        "displayName": "删除视频弹窗",
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          },
          {
            "name": "style",
            "displayName": "样式",
            "color": "#8BC34A",
            "icon": "mdi-palette-outline",
            "order": 2
          }
        ],
        "options": {
          "votes": {
            "defaultValue": false,
            "displayName": "投票"
          },
          "relatedVideos": {
            "defaultValue": true,
            "displayName": "关联视频"
          },
          "comboLikes": {
            "defaultValue": true,
            "displayName": "关注/三连"
          },
          "rates": {
            "defaultValue": true,
            "displayName": "评分"
          },
          "reservations": {
            "defaultValue": true,
            "displayName": "预告"
          },
          "promotions": {
            "defaultValue": true,
            "displayName": "心动"
          }
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5",
        "description": {}
      },
      "settings": {
        "enabled": true,
        "options": {
          "votes": false,
          "relatedVideos": true,
          "comboLikes": true,
          "rates": true,
          "reservations": true,
          "promotions": true
        }
      }
    },
    "viewCover": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"utils/view-cover\"]=t():e[\"utils/view-cover\"]=t()}(globalThis,(()=>(()=>{var e={696:(e,t,n)=>{var o=n(218)((function(e){return e[1]}));o.push([e.id,\".download-cover-config.download-video-config-section .be-dropdown {\\n  text-transform: uppercase;\\n}\",\"\"]),e.exports=o},218:e=>{\"use strict\";\n// eslint-disable-next-line func-names\ne.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},\n// eslint-disable-next-line func-names\nt.i=function(e,n,o){\"string\"==typeof e&&(\n// eslint-disable-next-line no-param-reassign\ne=[[null,e,\"\"]]);var r={};if(o)for(var i=0;i<this.length;i++){\n// eslint-disable-next-line prefer-destructuring\nvar a=this[i][0];null!=a&&(r[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);o&&r[c[0]]||(n&&(c[2]?c[2]=\"\".concat(n,\" and \").concat(c[2]):c[2]=n),t.push(c))}},t}},332:(e,t,n)=>{\"use strict\";var o,r=function(){return void 0===o&&(\n// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n// @see https://github.com/webpack-contrib/style-loader/issues/177\no=Boolean(window&&document&&document.all&&!window.atob)),o},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},o=[],r=0;r<e.length;r++){var i=e[r],c=t.base?i[0]+t.base:i[0],l=n[c]||0,d=\"\".concat(c,\" \").concat(l);n[c]=l+1;var u=s(d),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==u?(a[u].references++,a[u].updater(p)):a.push({identifier:d,updater:h(p,t),references:1}),o.push(d)}return o}function l(e){var t=document.createElement(\"style\"),o=e.attributes||{};if(void 0===o.nonce){var r=n.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),\"function\"==typeof e.insert)e.insert(t);else{var a=i(e.insert||\"head\");if(!a)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");a.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join(\"\\n\")});function p(e,t,n,o){var r=n?\"\":o.media?\"@media \".concat(o.media,\" {\").concat(o.css,\"}\"):o.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var i=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function f(e,t,n){var o=n.css,r=n.media,i=n.sourceMap;if(r?e.setAttribute(\"media\",r):e.removeAttribute(\"media\"),i&&\"undefined\"!=typeof btoa&&(o+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i)))),\" */\")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var v=null,m=0;function h(e,t){var n,o,r;if(t.singleton){var i=m++;n=v||(v=l(t)),o=p.bind(null,n,i,!1),r=p.bind(null,n,i,!0)}else n=l(t),o=f.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=r());var n=c(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var r=s(n[o]);a[r].references--}for(var i=c(e,t),l=0;l<n.length;l++){var d=s(n[l]);0===a[d].references&&(a[d].updater(),a.splice(d,1))}n=i}}}},289:(e,t,n)=>{\"use strict\";n.r(t),n.d(t,{default:()=>f});var o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"div\",{staticClass:\"download-cover-config download-video-config-section\"},[t(\"div\",{staticClass:\"download-video-config-item\"},[t(\"div\",{staticClass:\"download-video-config-title\"},[e._v(\"封面:\")]),e._v(\" \"),t(\"VDropdown\",{attrs:{items:e.items},scopedSlots:e._u([{key:\"item\",fn:function({item:t}){return[e._v(\"\\n        \"+e._s(t)+\"\\n      \")]}}]),model:{value:e.type,callback:function(t){e.type=t},expression:\"type\"}})],1)])};o._withStripped=!0;const r=coreApis.settings;var i=n(648);const{options:a}=(0,r.getComponentSettings)(\"downloadVideo\"),s=Vue.extend({components:{VDropdown:i.VDropdown},data:()=>({type:a.CoverType??\"无\",items:[\"无\",\"jpg\"]}),computed:{enabled(){return\"无\"!==this.type}},watch:{type(e){a.CoverType=e}}});var c=n(332),l=n.n(c),d=n(696),u=n.n(d),p={insert:\"head\",singleton:!1};l()(u(),p);u().locals;const f=(0,n(893).Z)(s,o,[],!1,null,null,null).exports},793:(e,t,n)=>{\"use strict\";n.r(t),n.d(t,{default:()=>d});var o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"DefaultWidget\",{staticClass:\"view-cover\",attrs:{disabled:!e.imageUrl,name:\"查看封面\",icon:\"mdi-image-outline\"},on:{click:function(t){return e.viewCover()}}})};o._withStripped=!0;var r=n(284);const i=coreApis.ajax,a=coreApis.observer,s=coreApis.spinQuery;var c=n(648);const l=Vue.extend({components:{DefaultWidget:c.DefaultWidget},data:()=>({imageUrl:\"\"}),async mounted(){if(document.URL.includes(\"live.bilibili.com\")){const e=\".header-info-ctnr .room-cover, .header-info-ctnr .avatar\",t=await(0,s.select)(e);if(!t)return;const n=t.getAttribute(\"href\").match(/space\\.bilibili\\.com\\/([\\d]+)/);if(n&&n[1]){const e=`https://api.live.bilibili.com/room/v1/Room/getRoomInfoOld?mid=${n[1]}`,t=await(0,i.getJson)(e);this.imageUrl=t.data.cover.replace(\"http:\",\"https:\")}}else(0,a.videoChange)((async()=>{const{aid:e}=unsafeWindow;this.imageUrl=await(0,r.getVideoCoverUrlByAid)(e)}))},methods:{async viewCover(){(0,c.showImage)(this.imageUrl)}}});const d=(0,n(893).Z)(l,o,[],!1,null,null,null).exports},893:(e,t,n)=>{\"use strict\";function o(e,t,n,o,r,i,a,s){var c,l=\"function\"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),o&&(l.functional=!0),i&&(l._scopeId=\"data-v-\"+i),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):r&&(c=s?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}n.d(t,{Z:()=>o})},284:e=>{\"use strict\";e.exports=coreApis.componentApis.video.videoCover},648:e=>{\"use strict\";e.exports=coreApis.ui}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var o={};return(()=>{\"use strict\";n.d(o,{component:()=>a});const e=coreApis.componentApis.define;var t=n(284);const r=coreApis.utils.urls,i=coreApis.toast,a=(0,e.defineComponentMetadata)({name:\"viewCover\",displayName:\"查看封面\",tags:[componentsTags.utils,componentsTags.video],entry:none,reload:none,unload:none,plugin:{displayName:\"下载视频 - 下载封面支持\",setup:e=>{let{addData:o}=e;o(\"downloadVideo.assets\",(async e=>{e.push({name:\"downloadCover\",displayName:\"下载封面\",getAssets:async(e,n)=>{const{type:o,enabled:r}=n;if(!r)return[];const a=i.Toast.info(\"获取封面中...\",\"下载封面\");let s=0;const c=await Promise.allSettled(e.map((async n=>{const r=await(0,t.getBlobByAid)(n.input.aid);return s++,a.message=`获取封面中... (${s}/${e.length})`,{name:`${n.input.title}.${o}`,data:r}}))),l=c.filter((e=>\"fulfilled\"===e.status)),d=c.filter((e=>\"rejected\"===e.status));return a.message=`获取完成. 成功 ${l.length} 个, 失败 ${d.length} 个.`,l.map((e=>e.value))},getUrls:async(e,n)=>{const{type:o,enabled:r}=n;return r?Promise.all(e.map((async e=>({name:`${e.input.title}.${o}`,url:await(0,t.getVideoCoverUrlByAid)(e.input.aid)})))):[]},component:()=>Promise.resolve().then(n.bind(n,289)).then((e=>e.default))})}))}},widget:{component:()=>Promise.resolve().then(n.bind(n,793)).then((e=>e.default))},description:{\"zh-CN\":\"在视频页面中, 可从功能面板中查看封面.\"},urlInclude:[...r.videoAndBangumiUrls],commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),o=o.component})()));",
      "metadata": {
        "name": "viewCover",
        "displayName": "查看封面",
        "tags": [
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          },
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "description": {
          "zh-CN": "在视频页面中, 可从功能面板中查看封面."
        },
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "copyFeedsLink": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"feeds/copy-link\"]=t():e[\"feeds/copy-link\"]=t()}(globalThis,(()=>(()=>{\"use strict\";var e,t,o={799:e=>{e.exports=coreApis.componentApis.feeds.api}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return o[e](i,i.exports,n),i.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if(\"object\"==typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&\"function\"==typeof o.then)return o}var i=Object.create(null);n.r(i);var c={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&o;\"object\"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>c[e]=()=>o[e]));return c.default=()=>o,n.d(i,c),i},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var i={};return(()=>{n.d(i,{component:()=>o});const e=coreApis.componentApis.define,t=coreApis.utils.urls,o=(0,e.defineComponentMetadata)({name:\"copyFeedsLink\",displayName:\"复制动态链接\",description:{\"zh-CN\":\"开启后, 可在每条动态的菜单中选择复制链接.\"},entry:async()=>{const{forEachFeedsCard:e,addMenuItem:t}=await Promise.resolve().then(n.t.bind(n,799,23));e({added:e=>{t(e,{className:\"copy-link\",text:\"复制链接\",action:async()=>{await navigator.clipboard.writeText(`https://t.bilibili.com/${e.id}`)}})}})},urlInclude:t.feedsUrls,tags:[componentsTags.feeds,componentsTags.utils],commitHash:\"7e5167c8b2b138051c1829ed8a366b2fba26ec70\",coreVersion:\"2.9.5\"})})(),i=i.component})()));",
      "metadata": {
        "name": "copyFeedsLink",
        "displayName": "复制动态链接",
        "description": {
          "zh-CN": "开启后, 可在每条动态的菜单中选择复制链接."
        },
        "tags": [
          {
            "name": "feeds",
            "displayName": "动态",
            "color": "#00ACC1",
            "icon": "mdi-pinwheel-outline",
            "order": 3
          },
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          }
        ],
        "commitHash": "7e5167c8b2b138051c1829ed8a366b2fba26ec70",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    },
    "videoCurTime": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"video/player/localtime\"]=t():e[\"video/player/localtime\"]=t()}(globalThis,(()=>(()=>{\"use strict\";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{component:()=>d});const o=coreApis.componentApis.video.playerAgent,n=coreApis.observer,a=coreApis.settings,i=coreApis.utils.urls;let r,s=none;var l=function(e){return e.TR=\"右上角\",e.TL=\"左上角\",e}(l||{});const d={name:\"videoCurTime\",author:{name:\"FoundTheWOUT\",link:\"https://github.com/FoundTheWOUT\"},description:{\"zh-CN\":\"在视频的右上角显示当前时间\"},displayName:\"视频内显示时间\",entry:async e=>{let{settings:{options:t},metadata:i}=e;const d=document.createElement(\"span\");d.id=\"cur-time\";const c={position:\"absolute\",top:\"0\",right:\"0\",zIndex:\"10\",fontSize:\"x-large\",fontWeight:\"bold\",margin:\"1rem\"},p={color:t.color,opacity:t.opacity};Object.keys(Object.assign(c,p)).forEach((e=>{d.style[e]=c[e]})),Object.keys(p).forEach((e=>{(0,a.addComponentListener)(`${i.name}.${e}`,(t=>{d.style[e]=t}))})),(0,a.addComponentListener)(`${i.name}.position`,(e=>{e===l.TR?(d.style.left=\"\",d.style.right=\"0\"):e===l.TL&&(d.style.right=\"\",d.style.left=\"0\")}),!0),(0,n.videoChange)((async()=>{(await o.playerAgent.query.video.wrap()).appendChild(d)})),s=()=>{const e=new Date;d.innerHTML=((e,t)=>{let o=e.getHours(),n=e.getMinutes().toFixed(),a=e.getSeconds().toFixed();Number(n)<10&&(n=n.padStart(2,\"0\")),Number(a)<10&&(a=a.padStart(2,\"0\")),!t?.TFFormat&&o>12&&(o-=12);const i=`${o}:${n}`;return t?.showSecond?`${i}:${a}`:i})(e,t)},r=setInterval(s,1e3)},reload(){document.getElementById(\"cur-time\").style.visibility=\"\",r=setInterval(s,1e3)},unload(){document.getElementById(\"cur-time\").style.visibility=\"hidden\",clearInterval(r)},tags:[componentsTags.video],options:{opacity:{slider:{max:1,min:0,step:.01},defaultValue:.5,displayName:\"透明度\"},color:{color:!0,defaultValue:\"#d1d5db\",displayName:\"颜色\"},showSecond:{defaultValue:!1,displayName:\"显示秒\"},TFFormat:{defaultValue:!0,displayName:\"24小时制\"},position:{defaultValue:l.TR,displayName:\"位置\",dropdownEnum:l}},urlInclude:i.allVideoUrls,commitHash:\"b9b3715a132aead43688cbead0943e66d88db501\",coreVersion:\"2.8.8\"};return t=t.component})()));",
      "metadata": {
        "name": "videoCurTime",
        "author": {
          "name": "FoundTheWOUT",
          "link": "https://github.com/FoundTheWOUT"
        },
        "description": {
          "zh-CN": "在视频的右上角显示当前时间"
        },
        "displayName": "视频内显示时间",
        "tags": [
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "options": {
          "opacity": {
            "slider": {
              "max": 1,
              "min": 0,
              "step": 0.01
            },
            "defaultValue": 0.5,
            "displayName": "透明度"
          },
          "color": {
            "color": true,
            "defaultValue": "#d1d5db",
            "displayName": "颜色"
          },
          "showSecond": {
            "defaultValue": false,
            "displayName": "显示秒"
          },
          "TFFormat": {
            "defaultValue": true,
            "displayName": "24小时制"
          },
          "position": {
            "defaultValue": "右上角",
            "displayName": "位置",
            "dropdownEnum": {
              "TR": "右上角",
              "TL": "左上角"
            }
          }
        },
        "commitHash": "b9b3715a132aead43688cbead0943e66d88db501",
        "coreVersion": "2.8.8"
      },
      "settings": {
        "enabled": true,
        "options": {
          "opacity": 0.5,
          "color": "#d1d5db",
          "showSecond": false,
          "TFFormat": true,
          "position": "右上角"
        }
      }
    },
    "watchlaterRedirect": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"utils/watchlater-redirect\"]=t():e[\"utils/watchlater-redirect\"]=t()}(globalThis,(()=>(()=>{var e,t,o={517:e=>{function t(e){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}t.keys=()=>[],t.resolve=t,t.id=517,e.exports=t},346:e=>{\"use strict\";e.exports=\"将稍后再看的链接重定向为普通播放网址.\\n- `重定向页面`: 对稍后再看列表页面里的链接重定向.\\n- `重定向顶栏`: 对 `自定义顶栏` 里的稍后再看链接重定向.\\n\"},952:e=>{\"use strict\";e.exports=coreApis.componentApis.video.watchlater},391:e=>{\"use strict\";e.exports=coreApis.observer},200:e=>{\"use strict\";e.exports=coreApis.spinQuery}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return o[e](n,n.exports,i),n.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if(\"object\"==typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&\"function\"==typeof o.then)return o}var n=Object.create(null);i.r(n);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&o;\"object\"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>o[e]));return s.default=()=>o,i.d(n,s),n},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var n={};return(()=>{\"use strict\";i.d(n,{component:()=>e});const e=(0,coreApis.componentApis.define.defineComponentMetadata)({name:\"watchlaterRedirect\",displayName:\"稍后再看重定向\",entry:async e=>{let{settings:t}=e;if(t.options.page){const{select:e}=await Promise.resolve().then(i.t.bind(i,200,23)),{childList:t}=await Promise.resolve().then(i.t.bind(i,391,23)),{getWatchlaterList:o}=await Promise.resolve().then(i.t.bind(i,952,23)),r=await o(!0),n=await e(\".watch-later-list .list-box > span\");if(!n)return;const s=(e,t)=>{try{const o=r[t],{bvid:i,cid:n,pages:s}=o,a=s.find((e=>e.cid===n))?.page??1,c=a>1?`https://www.bilibili.com/video/${i}?p=${a}`:`https://www.bilibili.com/video/${i}`,l=e.querySelector(\".av-pic\");l.target=\"_blank\",l.href=c;const p=e.querySelector(\".av-about .t\");p.target=\"_blank\",p.href=c}catch(o){console.error(`[watchlater redirect] error at index ${t}`,e,o)}},a=()=>{n.querySelectorAll(\".av-item\").forEach(s)};t(n,(e=>{e.forEach((e=>{e.removedNodes.forEach((e=>{if(e instanceof HTMLElement&&!e.classList.contains(\"itemlist-move\")){const t=parseInt(dq(e,\".key\").textContent)-1;console.log(\"remove index\",t),r.splice(t,1)}}))})),a()}))}},options:{page:{displayName:\"重定向页面\",defaultValue:!0},navbar:{displayName:\"重定向顶栏\",defaultValue:!0}},urlInclude:[\"https://www.bilibili.com/watchlater/#/list\"],tags:[componentsTags.utils,componentsTags.video],commitHash:\"7c0f561bf67af23f5d7bd22b7346e259d8e4dc73\",coreVersion:\"2.9.5\",description:(()=>{const e=i(517);return{...Object.fromEntries(e.keys().map((t=>[t.match(/index\\.(.+)\\.md$/)[1],e(t)]))),\"zh-CN\":()=>Promise.resolve().then(i.t.bind(i,346,17)).then((e=>e.default))}})()})})(),n=n.component})()));",
      "metadata": {
        "name": "watchlaterRedirect",
        "displayName": "稍后再看重定向",
        "options": {
          "page": {
            "displayName": "重定向页面",
            "defaultValue": true
          },
          "navbar": {
            "displayName": "重定向顶栏",
            "defaultValue": true
          }
        },
        "tags": [
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          },
          {
            "name": "video",
            "displayName": "视频",
            "color": "#2196F3",
            "icon": "mdi-play-circle-outline",
            "order": 1
          }
        ],
        "commitHash": "7c0f561bf67af23f5d7bd22b7346e259d8e4dc73",
        "coreVersion": "2.9.5",
        "description": {}
      },
      "settings": {
        "enabled": true,
        "options": {
          "page": true,
          "navbar": true
        }
      }
    },
    "ipShow": {
      "code": "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports[\"utils/ip-show\"]=t():e[\"utils/ip-show\"]=t()}(globalThis,(()=>(()=>{\"use strict\";var e,t,i={206:e=>{e.exports=coreApis.componentApis.utils.commentApis}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var l=a[e]={exports:{}};return i[e](l,l.exports,s),l.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(i,a){if(1&a&&(i=this(i)),8&a)return i;if(\"object\"==typeof i&&i){if(4&a&&i.__esModule)return i;if(16&a&&\"function\"==typeof i.then)return i}var l=Object.create(null);s.r(l);var o={};e=e||[null,t({}),t([]),t(t)];for(var n=2&a&&i;\"object\"==typeof n&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach((e=>o[e]=()=>i[e]));return o.default=()=>i,s.d(l,o),l},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var l={};return(()=>{s.d(l,{component:()=>m});const e=coreApis.componentApis.define,t=coreApis.spinQuery;let i,a=2;const o=function(e,t,a){const s=this._parentBlacklistDom(e,t,a),l=[`<div class=\"con ${a===t?\"no-border\":\"\"}\">`,`<div class=\"user\">${this._createNickNameDom(e)}`,this._createLevelLink(e),this._identity(e.mid,e.assist,e.member.fans_detail),`${this._createNameplate(e.member.nameplate)+this._createUserSailing(e)}</div>`,this._createMsgContent(e),this._createPerfectReply(e),'<div class=\"info\">',this._createPlatformDom(e.content.plat),'<span class=\"time-location\">','<span class=\"reply-time\">'.concat(this._formateTime(e.ctime),\"</span>\"),e?.reply_control?.location?`<span class=\"reply-location\" style=\"margin-left:15px;\">${e?.reply_control?.location||\"\"}</span>`:\"\",\"</span>\",e.lottery_id?\"\":`<span class=\"like ${1===e.action?\"liked\":\"\"}\"><i></i><span>${e.like?e.like:\"\"}</span></span>`,e.lottery_id?\"\":`<span class=\"hate ${2===e.action?\"hated\":\"\"}\"><i></i></span>`,e.lottery_id?\"\":this._createReplyBtn(e.rcount),e.lottery_id&&e.mid!==i.userStatus.mid?\"\":`<div class=\"operation more-operation\"><div class=\"spot\"></div><div class=\"opera-list\"><ul>${this._canSetTop(e)?`<li class=\"set-top\">${e.isUpTop?\"取消置顶\":\"设为置顶\"}</li>`:\"\"}${this._canBlackList(e.mid)?'<li class=\"blacklist\">加入黑名单</li>':\"\"}${this._canReport(e.mid)?'<li class=\"report\">举报</li>':\"\"}${this._canDel(e.mid)&&!e.isTop?`<li class=\"del\" data-mid=\"${e.mid}\">删除</li>`:\"\"}</ul></div></div>`,this._createLotteryContent(e.content),this._createVoteContent(e.content),this._createTags(e),\"</div>\",'<div class=\"reply-box\">',this._createSubReplyList(e.replies,e.rcount,!1,e.rpid,e.folder&&e.folder.has_folded,e.reply_control),\"</div>\",'<div class=\"paging-box\">',\"</div>\",\"</div>\"].join(\"\");return e.state===i.blacklistCode?s:l},n=function(e,t){return[`<div class=\"reply-item reply-wrap\" data-id=\"${e.rpid}\" data-index=\"${t}\">`,this._createSubReplyUserFace(e),'<div class=\"reply-con\">','<div class=\"user\">',this._createNickNameDom(e),this._createLevelLink(e),this._identity(e.mid),this._createSubMsgContent(e),\"</div>\",\"</div>\",'<div class=\"info\">','<span class=\"time-location\">','<span class=\"reply-time\">'.concat(this._formateTime(e.ctime),\"</span>\"),e?.reply_control?.location?`<span class=\"reply-location\" style=\"margin-left:15px;\">${e?.reply_control?.location||\"\"}</span>`:\"\",\"</span>\",`<span class=\"like ${1===e.action?\"liked\":\"\"}\"><i></i><span>${e.like?e.like:\"\"}</span></span>`,`<span class=\"hate ${2===e.action?\"hated\":\"\"}\"><i></i></span>`,'<span class=\"reply btn-hover\">回复</span>',`<div class=\"operation btn-hover btn-hide-re\"><div class=\"spot\"></div><div class=\"opera-list\"><ul>${this._canBlackList(e.mid)?'<li class=\"blacklist\">加入黑名单</li>':\"\"}${this._canReport(e.mid)?'<li class=\"report\">举报</li>':\"\"}${this._canDel(e.mid)?`<li class=\"del\" data-mid=\"${e.mid}\">删除</li>`:\"\"}</ul></div></div>`,\"</div>\",\"</div>\"].join(\"\")},r=function(e,t,i){const a=this._parentBlacklistDom(e,t,i),s=[`<div class=\"con ${i===t?\"no-border\":\"\"}\">`,`<div class=\"user\">${this._identity(e.mid,e.assist,e.member.fans_detail)}`,`<a data-usercard-mid=\"${e.mid}\" href=\"//space.bilibili.com/${e.mid}\" target=\"_blank\" class=\"name ${this._createVipClass(e.member.vip.vipType,e.member.vip.vipStatus,e.member.vip.themeType)}\">${this._unhtmlFix(e.member.uname)}</a><a class=\"level-link\" href=\"//www.bilibili.com/blackboard/help.html#%E4%BC%9A%E5%91%98%E7%AD%89%E7%BA%A7%E7%9B%B8%E5%85%B3\" target=\"_blank\"><i class=\"level l${e.member.level_info.current_level}\"></i></a>${this._createNameplate(e.member.nameplate)}${this._createUserSailing(e.member&&e.member.user_sailing||{})}</div>`,this._createMsgContent(e),'<div class=\"info\">',e.floor?`<span class=\"floor\">#${e.floor}</span>`:\"\",this._createPlatformDom(e.content.plat),`<span class=\"time\">${this._formateTime(e.ctime)}</span>`,e?.reply_control?.location?`<span style=\"margin-left:0px;\">${e?.reply_control?.location||\"\"}</span>`:\"\",e.lottery_id?\"\":`<span class=\"like ${1===e.action?\"liked\":\"\"}\"><i></i><span>${e.like||\"\"}</span></span>`,e.lottery_id?\"\":`<span class=\"hate ${2===e.action?\"hated\":\"\"}\"><i></i></span>`,e.lottery_id?\"\":this._createReplyBtn(e.rcount),e.lottery_id&&e.mid!==this.userStatus.mid?\"\":`<div class=\"operation more-operation\"><div class=\"spot\"></div><div class=\"opera-list\"><ul>${this._canSetTop(e)?`<li class=\"set-top\">${e.isUpTop?\"取消置顶\":\"设为置顶\"}</li>`:\"\"}${this._canBlackList(e.mid)?'<li class=\"blacklist\">加入黑名单</li>':\"\"}${this._canReport(e.mid)?'<li class=\"report\">举报</li>':\"\"}${this._canDel(e.mid)&&!e.isTop?`<li class=\"del\" data-mid=\"${e.mid}\">删除</li>`:\"\"}</ul></div></div>`,this._createLotteryContent(e.content),this._createVoteContent(e.content),this._createTags(e),\"</div>\",'<div class=\"reply-box\">',this._createSubReplyList(e.replies,e.rcount,!1,e.rpid,e.folder&&e.folder.has_folded),\"</div>\",'<div class=\"paging-box\">',\"</div>\",\"</div>\"].join(\"\");return e.state===this.blacklistCode?a:s},c=function(e,t){return[`<div class=\"reply-item reply-wrap\" data-id=\"${e.rpid}\" data-index=\"${t}\">`,`<a href=\"//space.bilibili.com/${e.mid}\" data-usercard-mid=\"${e.mid}\" target=\"_blank\" class=\"reply-face\">`,`<img src=\"${this._trimHttpFix(this._webpFix(e.member.avatar,{w:52,h:52}))}\" alt=\"\">`,\"</a>\",'<div class=\"reply-con\">','<div class=\"user\">',`<a href=\"//space.bilibili.com/${e.mid}\" target=\"_blank\" data-usercard-mid=\"${e.mid}\" class=\"name ${this._createVipClass(e.member.vip.vipType,e.member.vip.vipStatus,e.member.vip.themeType)}\">${this._unhtmlFix(e.member.uname)}</a>`,`<a class=\"level-link\" href=\"//www.bilibili.com/blackboard/help.html#%E4%BC%9A%E5%91%98%E7%AD%89%E7%BA%A7%E7%9B%B8%E5%85%B3\" target=\"_blank\"><i class=\"level l${e.member.level_info.current_level}\"></i></a>`,this._createSubMsgContent(e),\"</div>\",\"</div>\",'<div class=\"info\">',`<span class=\"time\">${this._formateTime(e.ctime)}</span>`,e?.reply_control?.location?`<span style=\"margin-left:0px;\">${e?.reply_control?.location||\"\"}</span>`:\"\",`<span class=\"like ${1===e.action?\"liked\":\"\"}\"><i></i><span>${e.like||\"\"}</span></span>`,`<span class=\"hate ${2===e.action?\"hated\":\"\"}\"><i></i></span>`,'<span class=\"reply btn-hover\">回复</span>',`<div class=\"operation btn-hover btn-hide-re\"><div class=\"spot\"></div><div class=\"opera-list\"><ul>${this._canBlackList(e.mid)?'<li class=\"blacklist\">加入黑名单</li>':\"\"}${this._canReport(e.mid)?'<li class=\"report\">举报</li>':\"\"}${this._canDel(e.mid)?`<li class=\"del\" data-mid=\"${e.mid}\">删除</li>`:\"\"}</ul></div></div>`,\"</div>\",\"</div>\"].join(\"\")},p=new MutationObserver((e=>{e.forEach((()=>{void 0!==unsafeWindow.bbComment&&(i=unsafeWindow.bbComment,\"blackroom\"===unsafeWindow.location.href.split(\"/\")[3]?(i.prototype._unhtmlFix=function(e,t){return e?\n// eslint-disable-next-line @typescript-eslint/no-shadow\ne.replace(t||/[&<\">'](?:(amp|lt|quot|gt|#39|nbsp|#\\\\d+);)?/g,(function(e,t){return t?e:{\"<\":\"\",\"&\":\"\",'\"':\"\",\">\":\"\",\"'\":\"\"}[e]})):\"\"},i.prototype._trimHttpFix=function(e){return e?e.replace(/^http:/,\"\"):\"\"},i.prototype._webpFix=function(e,t){if(!e)return e;const i=e.match(/(.*\\\\.(jpg|jpeg|gif|png|bmp))(\\\\?.*)?/);let a=-1!==e.indexOf(\"/bfs/\");return i&&\"gif\"!==i[2]&&\"bmp\"!==i[2]&&a?(a=t.w,e=t.h,e=a&&e?`@${a}w_${e}h`:\"@\",t=i[3]||\"\",this.isWebp?`${i[1]+e}.webp${t}`:`${i[1]+e}.${i[2]}${t}`):e},i.prototype._createListCon=r,i.prototype._createSubReplyItem=c):(i.prototype._createListCon=o,i.prototype._createSubReplyItem=n),a=1,p.disconnect())}))}));p.observe(document.head,{childList:!0});const d=e=>{e.forEach((async e=>{const i=(e=>e.frameworkSpecificProps?.reply_control?.location??void 0)(e);if(void 0===i)return;const a=await(e.shadowDomEntry?(0,t.select)((()=>e.shadowDomEntry.querySelector(\"#pubdate\")),{queryInterval:100,maxRetry:30}):e.element.querySelector(\".reply-info>.reply-time\")??e.element.querySelector(\".sub-reply-info>.sub-reply-time\"));if(null===a)return;const s=a.querySelector(\".ip-location\");if(null!==s)return void(s.innerText=i);const l=document.createElement(\"span\");l.className=\"ip-location\",l.style.marginLeft=\"15px\",l.innerText=i,a.appendChild(l)}))},m=(0,e.defineComponentMetadata)({name:\"ipShow\",author:{name:\"Light_Quanta\",link:\"https://github.com/LightQuanta\"},displayName:\"评论区IP属地显示\",tags:[componentsTags.utils],entry:async()=>{const{forEachCommentItem:e}=await Promise.resolve().then(s.t.bind(s,206,23));e({added:e=>{2===a&&(d([e,...e.replies]),e.addEventListener(\"repliesUpdate\",(e=>d(e.detail))))}})},description:{\"zh-CN\":\"在评论区显示评论的IP属地信息\"},commitHash:\"7c0f561bf67af23f5d7bd22b7346e259d8e4dc73\",coreVersion:\"2.9.5\"})})(),l=l.component})()));",
      "metadata": {
        "name": "ipShow",
        "author": {
          "name": "Light_Quanta",
          "link": "https://github.com/LightQuanta"
        },
        "displayName": "评论区IP属地显示",
        "tags": [
          {
            "name": "utils",
            "displayName": "工具",
            "color": "#A36FFD",
            "icon": "mdi-rocket-launch-outline",
            "order": 5
          }
        ],
        "description": {
          "zh-CN": "在评论区显示评论的IP属地信息"
        },
        "commitHash": "7c0f561bf67af23f5d7bd22b7346e259d8e4dc73",
        "coreVersion": "2.9.5"
      },
      "settings": {
        "enabled": true,
        "options": {}
      }
    }
  },
  "components": {
    "settingsPanel": {
      "enabled": true,
      "options": {
        "themeColor": "#e57373",
        "scriptLoadingMode": "延后",
        "styleLoadingMode": "同时",
        "textColor": "自动",
        "cdnRoot": "jsDelivr",
        "dockSide": "左侧",
        "filenameFormat": "[title][ - ep]",
        "batchFilenameFormat": "[n - ][ep]",
        "downloadPackageEmitMode": "打包下载",
        "devMode": false,
        "registryBranch": "preview"
      }
    },
    "launchBar": {
      "enabled": true,
      "options": {}
    },
    "i18n": {
      "enabled": true,
      "options": {
        "language": "简体中文",
        "translator": "GoogleCN"
      }
    },
    "autoUpdate": {
      "enabled": true,
      "options": {
        "lastUpdateCheck": 1734352440335,
        "localPortOverride": "",
        "minimumDuration": 86400000,
        "urls": {
          "components": {
            "downloadLiveRecords": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/live/download-records.js",
              "lastUpdateCheck": 1734352438990,
              "installTime": 1639573222613,
              "alwaysUpdate": false
            },
            "downloadDanmaku": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/video/danmaku/download.js",
              "lastUpdateCheck": 1734352438050,
              "installTime": 1639573222632,
              "alwaysUpdate": false
            },
            "downloadVideo": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/video/download.js",
              "lastUpdateCheck": 1734352438969,
              "installTime": 1639573222641,
              "alwaysUpdate": false
            },
            "downloadSubtitle": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/video/subtitle/download.js",
              "lastUpdateCheck": 1734352439408,
              "installTime": 1639573222653,
              "alwaysUpdate": false
            },
            "downloadAudio": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/utils/download-audio.js",
              "lastUpdateCheck": 1734352437988,
              "installTime": 1639573222663,
              "alwaysUpdate": false
            },
            "foldComments": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/feeds/fold-comments.js",
              "lastUpdateCheck": 1734352439015,
              "installTime": 1639573251590,
              "alwaysUpdate": false
            },
            "unfoldFeeds": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/feeds/unfold.js",
              "lastUpdateCheck": 1734352439039,
              "installTime": 1639573263849,
              "alwaysUpdate": false
            },
            "liveAutoDraw": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/live/auto-draw.js",
              "lastUpdateCheck": 1656591192161,
              "installTime": 1639573270350,
              "alwaysUpdate": false
            },
            "disableFeedsDetails": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/feeds/disable-details.js",
              "lastUpdateCheck": 1734352438161,
              "installTime": 1639573282144,
              "alwaysUpdate": false
            },
            "badgeHelper": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/live/badge-helper.js",
              "lastUpdateCheck": 1734352438210,
              "installTime": 1639573306494,
              "alwaysUpdate": false
            },
            "liveHomeMute": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/live/home-mute.js",
              "lastUpdateCheck": 1734352439435,
              "installTime": 1639573315525,
              "alwaysUpdate": false
            },
            "removeLiveWatermark": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/live/remove-watermark.js",
              "lastUpdateCheck": 1734352439462,
              "installTime": 1639573326702,
              "alwaysUpdate": false
            },
            "sidebarOffset": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/style/sidebar-offset.js",
              "lastUpdateCheck": 1734352439509,
              "installTime": 1639573492045,
              "alwaysUpdate": false
            },
            "checkInCenter": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/utils/check-in-center.js",
              "lastUpdateCheck": 1734352438184,
              "installTime": 1639573528168,
              "alwaysUpdate": false
            },
            "copyCommentsLink": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/utils/comments/copy-link.js",
              "lastUpdateCheck": 1734352438233,
              "installTime": 1639573539030,
              "alwaysUpdate": false
            },
            "fullFeedsTitle": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/feeds/full-title.js",
              "lastUpdateCheck": 1734352438278,
              "installTime": 1639573619458,
              "alwaysUpdate": false
            },
            "dpiLiveShowgirl": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/live/showgirl.js",
              "lastUpdateCheck": 1734352438304,
              "installTime": 1639573619668,
              "alwaysUpdate": false
            },
            "danmakuAirborne": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/video/danmaku/airborne.js",
              "lastUpdateCheck": 1734352439534,
              "installTime": 1639573619870,
              "alwaysUpdate": false
            },
            "seekByFrames": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/video/player/seek-by-frames.js",
              "lastUpdateCheck": 1734352439559,
              "installTime": 1639573620080,
              "alwaysUpdate": false
            },
            "preserveDanmakuInput": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/video/player/preserve-danmaku-input.js",
              "lastUpdateCheck": 1734352438332,
              "installTime": 1639573620464,
              "alwaysUpdate": false
            },
            "outerWatchlater": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/video/outer-watchlater.js",
              "lastUpdateCheck": 1734352439583,
              "installTime": 1639573620655,
              "alwaysUpdate": false
            },
            "videoScreenshot": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/video/player/screenshot.js",
              "lastUpdateCheck": 1734352438684,
              "installTime": 1639573620865,
              "alwaysUpdate": false
            },
            "rememberVideoSpeed": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/video/player/remember-speed.js",
              "lastUpdateCheck": 1734352438716,
              "installTime": 1639573621108,
              "alwaysUpdate": false
            },
            "fullFeedsContent": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/feeds/full-content.js",
              "lastUpdateCheck": 1734352438872,
              "installTime": 1639573621383,
              "alwaysUpdate": false
            },
            "columnUnlock": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/utils/column-unlock.js",
              "lastUpdateCheck": 1734352438739,
              "installTime": 1639573621681,
              "alwaysUpdate": false
            },
            "urlParamsClean": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/utils/url-params-clean.js",
              "lastUpdateCheck": 1734352439615,
              "installTime": 1639573621880,
              "alwaysUpdate": false
            },
            "collapseLiveSideBar": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/live/side-bar.js",
              "lastUpdateCheck": 1734352439639,
              "installTime": 1639573622099,
              "alwaysUpdate": false
            },
            "bvidConvert": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/video/bvid-convert.js",
              "lastUpdateCheck": 1734352439663,
              "installTime": 1639573622304,
              "alwaysUpdate": false
            },
            "livePip": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/live/pip.js",
              "lastUpdateCheck": 1656503194479,
              "installTime": 1639573622487,
              "alwaysUpdate": false
            },
            "extendFeedsLive": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/feeds/extend-live.js",
              "lastUpdateCheck": 1734352438894,
              "installTime": 1639573622697,
              "alwaysUpdate": false
            },
            "imageExporter": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/utils/image-exporter.js",
              "lastUpdateCheck": 1734352438825,
              "installTime": 1639573622909,
              "alwaysUpdate": false
            },
            "removePlayerPopup": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/video/player/remove-popup.js",
              "lastUpdateCheck": 1734352438847,
              "installTime": 1639573623111,
              "alwaysUpdate": false
            },
            "viewCover": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/utils/view-cover.js",
              "lastUpdateCheck": 1734352439689,
              "installTime": 1639573623314,
              "alwaysUpdate": false
            },
            "copyFeedsLink": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/components/feeds/copy-link.js",
              "lastUpdateCheck": 1734352438798,
              "installTime": 1644330504078,
              "alwaysUpdate": false
            },
            "videoCurTime": {
              "url": "https://cdn.jsdelivr.net/gh/FoundTheWOUT/Bilibili-Evolved@master/registry/dist/components/video/player/localtime.js",
              "lastUpdateCheck": 1734352438920,
              "installTime": 1644330729461,
              "alwaysUpdate": false
            },
            "watchlaterRedirect": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@preview/registry/dist/components/utils/watchlater-redirect.js",
              "lastUpdateCheck": 1734352438767,
              "installTime": 1644330770006,
              "alwaysUpdate": false
            },
            "ipShow": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@preview/registry/dist/components/utils/ip-show.js",
              "lastUpdateCheck": 1734352438942,
              "installTime": 1721527529703,
              "alwaysUpdate": false
            }
          },
          "plugins": {
            "downloadVideo.outputs.aria2": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/registry/dist/plugins/video/download/aria2-output.js",
              "lastUpdateCheck": 1734352440276,
              "installTime": 1639573623509,
              "alwaysUpdate": false
            },
            "downloadVideo.outputs.idm": {
              "url": "https://fastly.jsdelivr.net/gh/the1812/Bilibili-Evolved@preview/registry/dist/plugins/video/download/idm-output.js",
              "lastUpdateCheck": 1734352440333,
              "installTime": 1672976064584,
              "alwaysUpdate": false
            },
            "downloadVideo.outputs.motrix": {
              "url": "https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@preview/registry/dist/plugins/video/download/motrix-output.js",
              "lastUpdateCheck": 1734352440269,
              "installTime": 1721527649061,
              "alwaysUpdate": false
            }
          },
          "styles": {}
        },
        "maxUpdateCount": 4,
        "lastInstalledVersion": "2.9.5"
      }
    },
    "notifyNewVersion": {
      "enabled": true,
      "options": {
        "lastUpdateCheck": 1734352295044,
        "minimumDuration": 86400000
      }
    },
    "compatibilities": {
      "enabled": true,
      "options": {
        "disableOnBalh": false
      }
    },
    "bisector": {
      "enabled": true,
      "options": {
        "originalComponentEnableState": {},
        "keepDisabledComponents": [],
        "keepEnabledComponents": [],
        "bisectInitialState": {}
      }
    }
  },
  "plugins": {
    "ajaxHook": true,
    "launchBar.actions.IDSearch": true
  }
}